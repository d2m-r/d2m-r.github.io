<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2026-02-10">

<title>Tidyverse Wrangling with Strings – Data to Manuscript in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../images/icons/hex3.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-2d6844ac1bd792b9f6361cb8f3ccdccf.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/quarto-contrib/bootstrap-icons-1.13.1/bootstrap-icons.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Data to Manuscript in R</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-syllabus" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Syllabus</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-syllabus">    
        <li>
    <a class="dropdown-item" href="../syllabus/structure.html">
 <span class="dropdown-text">Course Structure</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../syllabus/communication.html">
 <span class="dropdown-text">Communication</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../syllabus/ai-policy.html">
 <span class="dropdown-text">AI Use</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../syllabus/climate.html">
 <span class="dropdown-text">Climate &amp; Inclusion</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-assessment" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Assessment</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-assessment">    
        <li>
    <a class="dropdown-item" href="../assessment/overview.html">
 <span class="dropdown-text">Overview</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../assessment/objectives.html">
 <span class="dropdown-text">Learning Objectives</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../assessment/accountability.html">
 <span class="dropdown-text">Accountability</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../assessment/engagement.html">
 <span class="dropdown-text">Community Engagement</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../assessment/menu.html">
 <span class="dropdown-text">Project Menu</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../assessment/enrichment.html">
 <span class="dropdown-text">Enrichment Activities</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../assessment/data-project.html">
 <span class="dropdown-text">Integrative Data Project</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-materials" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Materials</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-materials">    
        <li>
    <a class="dropdown-item" href="../github.com/d2m-r/book/index.html">
 <span class="dropdown-text">Textbook (WIP)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../materials/slides.html">
 <span class="dropdown-text">Slides</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../materials/course-resources.html">
 <span class="dropdown-text">Course Resources</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../materials/resources.html">
 <span class="dropdown-text">External Resources</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../materials/finding-data.html">
 <span class="dropdown-text">Finding Data</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="https://d2m-r.github.io/submit.html"> 
<span class="menu-text">Submit</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../d2m-r.github.io"> 
<span class="menu-text">FAQ</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#strings" id="toc-strings" class="nav-link active" data-scroll-target="#strings">Strings</a>
  <ul class="collapse">
  <li><a href="#character-data" id="toc-character-data" class="nav-link" data-scroll-target="#character-data">Character data</a></li>
  <li><a href="#create-strings-and-character-vectors" id="toc-create-strings-and-character-vectors" class="nav-link" data-scroll-target="#create-strings-and-character-vectors">Create strings and character vectors</a></li>
  <li><a href="#define-examples" id="toc-define-examples" class="nav-link" data-scroll-target="#define-examples">Define Examples</a></li>
  <li><a href="#base-r-vs-tidyverse" id="toc-base-r-vs-tidyverse" class="nav-link" data-scroll-target="#base-r-vs-tidyverse">Base R vs tidyverse</a></li>
  <li><a href="#stringr-simplify-working-with-strings" id="toc-stringr-simplify-working-with-strings" class="nav-link" data-scroll-target="#stringr-simplify-working-with-strings"><code>stringr</code>: Simplify working with strings</a></li>
  </ul></li>
  <li><a href="#create-and-combine-strings" id="toc-create-and-combine-strings" class="nav-link" data-scroll-target="#create-and-combine-strings">Create and Combine Strings</a>
  <ul class="collapse">
  <li><a href="#combine-concatenate" id="toc-combine-concatenate" class="nav-link" data-scroll-target="#combine-concatenate">Combine: Concatenate</a></li>
  <li><a href="#compare-combine-vs-concatenate" id="toc-compare-combine-vs-concatenate" class="nav-link" data-scroll-target="#compare-combine-vs-concatenate">Compare combine vs concatenate</a></li>
  <li><a href="#compare-separator-behavior" id="toc-compare-separator-behavior" class="nav-link" data-scroll-target="#compare-separator-behavior">Compare separator behavior</a></li>
  <li><a href="#compare-na-handling" id="toc-compare-na-handling" class="nav-link" data-scroll-target="#compare-na-handling">Compare NA handling</a></li>
  <li><a href="#compare-vectorized-same" id="toc-compare-vectorized-same" class="nav-link" data-scroll-target="#compare-vectorized-same">Compare vectorized (same)</a></li>
  <li><a href="#combine-collapse" id="toc-combine-collapse" class="nav-link" data-scroll-target="#combine-collapse">Combine: Collapse</a></li>
  <li><a href="#combine-collapse-1" id="toc-combine-collapse-1" class="nav-link" data-scroll-target="#combine-collapse-1">Combine: Collapse</a></li>
  <li><a href="#interpolate" id="toc-interpolate" class="nav-link" data-scroll-target="#interpolate">Interpolate</a></li>
  <li><a href="#interpolate-calculations-and-functions" id="toc-interpolate-calculations-and-functions" class="nav-link" data-scroll-target="#interpolate-calculations-and-functions">Interpolate: Calculations and functions</a></li>
  </ul></li>
  <li><a href="#string-detection-and-matching" id="toc-string-detection-and-matching" class="nav-link" data-scroll-target="#string-detection-and-matching">String Detection and Matching</a>
  <ul class="collapse">
  <li><a href="#detect-identify-patterns" id="toc-detect-identify-patterns" class="nav-link" data-scroll-target="#detect-identify-patterns">Detect: Identify patterns</a></li>
  <li><a href="#tidy-string-detection" id="toc-tidy-string-detection" class="nav-link" data-scroll-target="#tidy-string-detection">Tidy string detection</a></li>
  <li><a href="#detect-locate-patterns-first" id="toc-detect-locate-patterns-first" class="nav-link" data-scroll-target="#detect-locate-patterns-first">Detect: Locate patterns (first)</a></li>
  <li><a href="#detect-locate-patterns-all" id="toc-detect-locate-patterns-all" class="nav-link" data-scroll-target="#detect-locate-patterns-all">Detect: Locate patterns (all)</a></li>
  <li><a href="#detect-count-patterns" id="toc-detect-count-patterns" class="nav-link" data-scroll-target="#detect-count-patterns">Detect: Count patterns</a></li>
  </ul></li>
  <li><a href="#string-manipulation" id="toc-string-manipulation" class="nav-link" data-scroll-target="#string-manipulation">String Manipulation</a>
  <ul class="collapse">
  <li><a href="#extract-subset-by-pattern" id="toc-extract-subset-by-pattern" class="nav-link" data-scroll-target="#extract-subset-by-pattern">Extract: Subset by pattern</a></li>
  <li><a href="#extract-subset-by-position" id="toc-extract-subset-by-position" class="nav-link" data-scroll-target="#extract-subset-by-position">Extract: Subset by position</a></li>
  <li><a href="#extract-extract-by-pattern" id="toc-extract-extract-by-pattern" class="nav-link" data-scroll-target="#extract-extract-by-pattern">Extract: Extract by pattern</a></li>
  <li><a href="#extract-extract-by-pattern-with-regex" id="toc-extract-extract-by-pattern-with-regex" class="nav-link" data-scroll-target="#extract-extract-by-pattern-with-regex">Extract: Extract by pattern with regex</a></li>
  <li><a href="#replace-exchange-2-patterns" id="toc-replace-exchange-2-patterns" class="nav-link" data-scroll-target="#replace-exchange-2-patterns">Replace: Exchange 2 patterns</a></li>
  <li><a href="#replace-remove-patterns" id="toc-replace-remove-patterns" class="nav-link" data-scroll-target="#replace-remove-patterns">Replace: Remove patterns</a></li>
  <li><a href="#replace-regex-patterns" id="toc-replace-regex-patterns" class="nav-link" data-scroll-target="#replace-regex-patterns">Replace: regex patterns</a></li>
  <li><a href="#transform-trim-whitespace" id="toc-transform-trim-whitespace" class="nav-link" data-scroll-target="#transform-trim-whitespace">Transform: Trim whitespace</a></li>
  <li><a href="#transform-pad-strings" id="toc-transform-pad-strings" class="nav-link" data-scroll-target="#transform-pad-strings">Transform: Pad strings</a></li>
  <li><a href="#transform-convert-case" id="toc-transform-convert-case" class="nav-link" data-scroll-target="#transform-convert-case">Transform: Convert case</a></li>
  </ul></li>
  <li><a href="#regular-expressions" id="toc-regular-expressions" class="nav-link" data-scroll-target="#regular-expressions">Regular Expressions</a>
  <ul class="collapse">
  <li><a href="#regex-overview" id="toc-regex-overview" class="nav-link" data-scroll-target="#regex-overview">Regex overview</a></li>
  <li><a href="#character-classes" id="toc-character-classes" class="nav-link" data-scroll-target="#character-classes">Character classes</a></li>
  <li><a href="#quantifiers" id="toc-quantifiers" class="nav-link" data-scroll-target="#quantifiers">Quantifiers</a></li>
  <li><a href="#example-quantifiers-in-stringr-functions" id="toc-example-quantifiers-in-stringr-functions" class="nav-link" data-scroll-target="#example-quantifiers-in-stringr-functions">Example: Quantifiers in stringr functions</a></li>
  <li><a href="#greedy-vs-lazy-matching" id="toc-greedy-vs-lazy-matching" class="nav-link" data-scroll-target="#greedy-vs-lazy-matching">Greedy vs lazy matching</a></li>
  <li><a href="#anchors-boundaries" id="toc-anchors-boundaries" class="nav-link" data-scroll-target="#anchors-boundaries">Anchors &amp; boundaries</a></li>
  <li><a href="#example-whole-word-matching" id="toc-example-whole-word-matching" class="nav-link" data-scroll-target="#example-whole-word-matching">Example: Whole-Word Matching</a></li>
  <li><a href="#example-pattern-validation" id="toc-example-pattern-validation" class="nav-link" data-scroll-target="#example-pattern-validation">Example: Pattern Validation</a></li>
  <li><a href="#capture-groups-back-references" id="toc-capture-groups-back-references" class="nav-link" data-scroll-target="#capture-groups-back-references">Capture groups &amp; back-references</a></li>
  <li><a href="#example-reorder-us-date-format" id="toc-example-reorder-us-date-format" class="nav-link" data-scroll-target="#example-reorder-us-date-format">Example: Reorder US date format</a></li>
  <li><a href="#regex-challenge" id="toc-regex-challenge" class="nav-link" data-scroll-target="#regex-challenge">Regex Challenge</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="Q1-W6_tidyverse-strings.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Tidyverse Wrangling with Strings</h1>
<p class="subtitle lead">strings, regex, and character data w/ base &amp; <code>stringr</code></p>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 10, 2026</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="strings" class="level1">
<h1>Strings</h1>
<section id="character-data" class="level2">
<h2 class="anchored" data-anchor-id="character-data">Character data</h2>
<ul>
<li><span class="keyword">Character data</span>: R datatype for text</li>
<li><span class="keyword">Character</span>: Smallest unit of text</li>
<li><span class="keyword">String</span>: Sequence of zero or more characters</li>
<li><span class="keyword">Character vector</span>: Collection of one or more strings
<ul>
<li>A single string is a character vector of length 1</li>
</ul></li>
</ul>
</section>
<section id="create-strings-and-character-vectors" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="create-strings-and-character-vectors">Create strings and character vectors</h2>
<div class="row">
<div class="col-6 fragment">
<p>Use single <code>'</code> or double <code>"</code> quotes to define strings:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>favorite_class <span class="ot">&lt;-</span> <span class="st">"d2m-R"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell fragment">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(favorite_class) <span class="co"># data type</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(favorite_class) <span class="co"># object class</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(favorite_class) <span class="co"># no. elements</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_length</span>(favorite_class) <span class="co"># no. characters</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p>Use the combine function <span class="func">c()</span> to create vectors of strings:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>favorite_class_units <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"d"</span>, <span class="st">"2"</span>, <span class="st">"m"</span>, <span class="st">"-"</span>, <span class="st">"R"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell fragment">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(favorite_class_units) <span class="co"># data type</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(favorite_class_units) <span class="co"># object class</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(favorite_class_units) <span class="co"># no. elements</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_length</span>(favorite_class_units) <span class="co"># no. char.</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 1 1 1 1</code></pre>
</div>
</div>
</div>
</div>
<div class="notes">
<p><code>typeof()</code> vs.&nbsp;<code>class()</code>: <code>typeof()</code> gives the low-level data type (character), while <code>class()</code> gives the high-level object class (character vector). A single string is a character vector of length 1, while multiple strings form a character vector of length &gt; 1. With strings this will be the same (character), but you’ll see the difference with factors.</p>
</div>
</section>
<section id="define-examples" class="level2">
<h2 class="anchored" data-anchor-id="define-examples">Define Examples</h2>
<p><em>Define strings and vectors to use as examples in later slides:</em></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Strings</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>sentence <span class="ot">&lt;-</span> <span class="st">'The QUICK brown fox jumps over the LAZY dog.'</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>favorite_class <span class="ot">&lt;-</span> <span class="st">"d2m-R"</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>messy_string <span class="ot">&lt;-</span> <span class="st">"   Hello,   World!   "</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Character vectors</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>favorite_class_units <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"d"</span>, <span class="st">"2"</span>, <span class="st">"m"</span>, <span class="st">"-"</span>, <span class="st">"R"</span>)</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>fruit <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"apple"</span>, <span class="st">"banana"</span>, <span class="st">"cherry"</span>, <span class="st">"date"</span>, <span class="st">"elderberry"</span>)</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>greeting <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"hello"</span>, <span class="st">"world"</span>)</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>farewell <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"goodbye"</span>, <span class="st">"everyone"</span>)</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>abed_ratings <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"cool"</span>, <span class="st">"cool cool cool"</span>, <span class="st">"cool cool"</span>, <span class="st">"cool"</span>, <span class="st">"sarcastic: ok"</span>, <span class="st">"evil: hot"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="base-r-vs-tidyverse" class="level2">
<h2 class="anchored" data-anchor-id="base-r-vs-tidyverse">Base R vs tidyverse</h2>
<div class="row">
<div class="col-6">
<div class="overlap-box">
<div class="box-title">
<p>Base R</p>
</div>
<div class="box-content">
<ul>
<li>Inconsistent naming
<ul>
<li><code>grep</code>, <code>grepl</code>, <code>sub</code>, <code>gsub</code>, <code>regexpr</code>, <code>gregexpr</code></li>
</ul></li>
<li>Inconsistent argument order
<ul>
<li>Commonly <code>(pattern, string)</code></li>
</ul></li>
<li>Not vectorized by default
<ul>
<li>Often need <code>sapply()</code> or loops for vectors</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div class="col-6">
<div class="overlap-box accent1">
<div class="box-title">
<p><code>stringr</code></p>
</div>
<div class="box-content">
<ul>
<li>Consistent <code>str_*</code> pattern
<ul>
<li><code>str_detect</code>, <code>str_replace</code>, <code>str_replace_all</code></li>
</ul></li>
<li>Consistent order
<ul>
<li>Always <code>(string, pattern)</code></li>
</ul></li>
<li>Vectorized by default
<ul>
<li>Works with strings <em>or</em> vectors of strings</li>
</ul></li>
</ul>
</div>
</div>
</div>
</div>
<div class="notes">
<p><strong>Base R vs tidyverse approach</strong>: Like most things in the tidyverse, <code>stringr</code> improves upon base r options by providing a consistent naming scheme and argument order. Contrast base R’s inconsistent naming (<code>grep</code>, <code>sub</code>, <code>gsub</code>) with <code>stringr</code>’s consistent <code>str_*</code> pattern. <code>stringr</code> is vectorized by default and uses consistent argument ordering (string first, pattern second).</p>
<p>What does it mean to be “vectorized by default?”</p>
<p>It means that <code>stringr</code> functions are designed to work with vectors of strings without needing to use <code>sapply()</code> or loops. You can pass a character vector to a <code>stringr</code> function, and it will operate on each element of the vector automatically, returning a vector of results. In contrast, many base R string functions are not vectorized and require additional steps to apply them to each element of a character vector.</p>
</div>
</section>
<section id="stringr-simplify-working-with-strings" class="level2 left-sidebar-slide" data-fullscreen="true" style="font-size: .8;">
<h2 class="left-sidebar-slide anchored" data-fullscreen="true" style="font-size: .8;" data-anchor-id="stringr-simplify-working-with-strings"><code>stringr</code>: Simplify working with strings</h2>
<p><img src="../images/icons/tv-icons/stringr.png" class="absolute" data-top=".5em" data-left="1em"></p>
<div class="sidebar-column">
<div class="sidebar-title">
<p><span class="pkg">stringr</span>: <br> Simplify working with strings</p>
</div>
<div class="sidebar-content">
<ul>
<li>Core tidyverse package for text manipulation</li>
<li>Consistent <code>str_*</code> naming pattern</li>
<li>Vectorized functions for efficient string processing</li>
</ul>
</div>
</div>
<div class="main-content">
<div class="r-stretch" style="display: grid; grid-template-columns: repeat(3, 1fr); grid-template-rows: minmax(0, 1fr) minmax(0, 1fr); gap: 0.8em;">
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em 0.2em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><i class="bi-arrows-collapse-vertical " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p>Combine</p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>Join strings</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em 0.2em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><i class="bi-braces-asterisk " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p>Interpolate</p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>Embed variables in strings</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em 0.2em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><i class="bi-search " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p>Detect</p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>Find patterns</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em 0.2em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><i class="bi-box-arrow-right " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p>Extract</p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>Pull out text</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em 0.2em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><i class="bi-recycle " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p>Replace</p>
</div>
</div>
<div class="box-content" style="text-align: center; overflow: hidden; min-height: 0; font-size: 0.9em; line-height: .9;">
<p>Modify text</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em 0.2em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><i class="bi-capslock-fill " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p>Transform</p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>Change format</p>
</div>
</div>
</div>
</div>
<div class="notes">
<p><strong>Key function families:</strong></p>
<ul>
<li><strong>Combine</strong>: Join strings (<code>str_c</code>, <code>str_flatten</code>)</li>
<li><strong>Detect</strong>: Find patterns (<code>str_detect</code>, <code>str_locate</code>)</li>
<li><strong>Extract</strong>: Pull out text (<code>str_sub</code>, <code>str_extract</code>)</li>
<li><strong>Replace</strong>: Modify text (<code>str_replace</code>, <code>str_remove</code>)</li>
<li><strong>Transform</strong>: Change format (<code>str_to_upper</code>, <code>str_trim</code>)</li>
</ul>
</div>
</section>
</section>
<section id="create-and-combine-strings" class="level1">
<h1>Create and Combine Strings</h1>
<section id="combine-concatenate" class="level2">
<h2 class="anchored" data-anchor-id="combine-concatenate">Combine: Concatenate</h2>
<p><span class="keyword">Concatenate</span>: Join multiple strings together into one string</p>
<ul>
<li>Take <em>strings</em> as separate arguments; return single string</li>
<li><strong>Base:</strong>
<ul>
<li><code>paste()</code>: space separator by default</li>
<li><code>paste0()</code>: no separator</li>
</ul></li>
<li><strong><code>stringr</code>:</strong>
<ul>
<li><code>str_c()</code>: no separator, <code>NA</code>s propagate</li>
</ul></li>
</ul>
</section>
<section id="compare-combine-vs-concatenate" class="level2">
<h2 class="anchored" data-anchor-id="compare-combine-vs-concatenate">Compare combine vs concatenate</h2>
<p>Combine <span class="func">c()</span> vs.&nbsp;concatenate <span class="func">paste()</span> / <span class="func">str_c()</span>:</p>
<div class="container-fluid">
<div class="row">
<div class="col-4 fragment">
<p>Base:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># combine strings into vector</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># not concatenated</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="st">"hello"</span>, <span class="st">"world"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hello" "world"</code></pre>
</div>
</div>
</div>
<div class="col-4 fragment">
<p>Base:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># concatenate strings into a string</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">"hello"</span>, <span class="st">"world"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hello world"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># vector treated as 1 argument</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="co"># not concatenated</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(greeting) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hello" "world"</code></pre>
</div>
</div>
</div>
<div class="col-4 fragment">
<p><code>stringr</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># concatenate strings into 1 string </span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="co"># no separator by default</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">"hello"</span>, <span class="st">"world"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "helloworld"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># vector treated as 1 argument</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="co"># not concatenated</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(greeting) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hello" "world"</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="compare-separator-behavior" class="level2">
<h2 class="anchored" data-anchor-id="compare-separator-behavior">Compare separator behavior</h2>
<div class="row">
<div class="col-6 fragment">
<p>Base:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># default space separator</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">"hello"</span>, <span class="st">"world"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hello world"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># default no separator</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"hello"</span>, <span class="st">"world"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "helloworld"</code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p><code>stringr</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># default no separator</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">"hello"</span>, <span class="st">"world"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "helloworld"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># custom space separator</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">"hello"</span>, <span class="st">"world"</span>, <span class="at">sep =</span> <span class="st">" "</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hello world"</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="compare-na-handling" class="level2">
<h2 class="anchored" data-anchor-id="compare-na-handling">Compare NA handling</h2>
<div class="row">
<div class="col-6 fragment">
<p>Base:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># NA treated as "NA" (string)</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">"hello"</span>, <span class="cn">NA</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hello NA"</code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p><code>stringr</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># NA propagates to result</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">"hello"</span>, <span class="cn">NA</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="compare-vectorized-same" class="level2">
<h2 class="anchored" data-anchor-id="compare-vectorized-same">Compare vectorized (same)</h2>
<p>Both <code>paste()</code> and <code>str_c()</code> are vectorized (can operate on strings or vectors of strings).</p>
<div class="cell" data-output-location="column">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>greeting_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"hello"</span>, <span class="st">"goodbye"</span>)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>audience_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"world"</span>, <span class="st">"everyone"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="row">
<div class="col-6 fragment">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># vectorized with space separator</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(greeting_vector, audience_vector) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hello world"      "goodbye everyone"</code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># vectorized with no separator</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(greeting_vector, audience_vector) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "helloworld"      "goodbyeeveryone"</code></pre>
</div>
</div>
</div>
</div>
<div class="notes">
<p>NA propagates: In <code>paste()</code>, if any argument is <code>NA</code>, it is treated as the string “NA”. In contrast, <code>str_c()</code> propagates <code>NA</code> values, meaning that if any argument is <code>NA</code>, the result will also be <code>NA</code>. This allows you to preserve missing values in your data instead of converting them to a string representation.</p>
<p>Vectorized: they can operate on vectors of strings element-wise without needing loops or <code>sapply()</code>. However, their default separator behavior differs, and <code>str_c()</code> propagates <code>NA</code> values instead of converting them to the string “NA”.</p>
</div>
</section>
<section id="combine-collapse" class="level2">
<h2 class="anchored" data-anchor-id="combine-collapse">Combine: Collapse</h2>
<ul>
<li><span class="keyword">Collapse</span>: Join elements of a string vector into a single string</li>
<li>Take <em>vector</em> of strings as single argument; return single string
<ul>
<li><i class="bi-check-circle-fill " style="" role="img" aria-hidden="true"></i> String vector: <code>c("apple", "banana", "cherry", "date", "elderberry")</code></li>
<li><i class="bi-x-circle-fill " style="" role="img" aria-hidden="true"></i> Multiple string arguments: <code>"apple", "banana", "cherry", "date", "elderberry"</code></li>
</ul></li>
</ul>
</section>
<section id="combine-collapse-1" class="level2">
<h2 class="anchored" data-anchor-id="combine-collapse-1">Combine: Collapse</h2>
<div class="row">
<div class="col-6 fragment">
<p><strong>Base:</strong> Concat with <code>paste()</code>’s <code>sep</code> arg, collapse with <code>collapse</code> arg:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sep does not affect vector length &gt; 1</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(fruit, <span class="at">sep =</span> <span class="st">", "</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple"      "banana"     "cherry"     "date"       "elderberry"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># collapse with comma</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(fruit, <span class="at">collapse =</span> <span class="st">", "</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple, banana, cherry, date, elderberry"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sep ignored when collapse is used</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="co"># because sep can't apply to a vector length &gt; 1</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(fruit, <span class="at">sep =</span> <span class="st">"SEPARATOR!!!"</span>, <span class="at">collapse =</span> <span class="st">", "</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple, banana, cherry, date, elderberry"</code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p><strong><code>stringr</code>:</strong> Collapse vectors with <span class="func">str_flatten</span>’s <code>collapse</code> arg, no <code>sep</code> arg:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a> <span class="co"># default no separator</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_flatten</span>(fruit)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "applebananacherrydateelderberry"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># collapse with comma</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_flatten</span>(fruit, <span class="at">collapse =</span> <span class="st">", "</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple, banana, cherry, date, elderberry"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># collapse with space</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_flatten</span>(fruit, <span class="at">collapse =</span> <span class="st">" "</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple banana cherry date elderberry"</code></pre>
</div>
</div>
</div>
</div>
<div class="notes">
<p>Separators are for combining multiple strings, each provided as a separate argument. Collapse is for combining elements of a single vector into one string.</p>
<p>What’s the difference between <code>sep</code> and <code>collapse</code>? - <code>sep</code>: Specifies the string to use to separate individual elements when concatenating multiple strings together. It is used when you want to combine multiple strings into a single string with a specific separator between them. For example, <code>str_c("hello", "world", sep = " ")</code> will produce “hello world”. - <code>collapse</code>: Specifies the string to use to separate elements when collapsing a vector of strings into a single string. It is used when you have a vector of strings and want to combine them into one string with a specific separator between each element. For example, <code>str_flatten(c("apple", "banana", "cherry"), collapse = ", ")</code> will produce “apple, banana, cherry”.</p>
</div>
</section>
<section id="interpolate" class="level2">
<h2 class="anchored" data-anchor-id="interpolate">Interpolate</h2>
<ul>
<li><span class="keyword">Interpolate</span>: Embed variable values or expressions directly within strings</li>
<li>Take <em>string</em> with placeholders/expressions; return single string with values filled in
<ul>
<li>Base <code>sprintf()</code> requires substitutions for the placeholders as additional arguments</li>
</ul></li>
</ul>
<div class="row">
<div class="col-6 fragment">
<p><strong>Base:</strong> Interpolate with placeholders using <span class="func">sprintf()</span></p>
<ul>
<li>Use placeholders: <code>%s</code> (string), <code>%d</code> (integer), <code>%f</code> (float)</li>
</ul>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>name <span class="ot">&lt;-</span> <span class="st">"Natalie"</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>age <span class="ot">&lt;-</span> <span class="dv">99</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Arguments will replace placeholders in order</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sprintf</span>(<span class="st">"My name is %s and I am %d years old."</span>, name, age)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "My name is Natalie and I am 99 years old."</code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p><strong><code>stringr</code>:</strong> Interpolate directly with <code>str_glue()</code></p>
<ul>
<li>Evaluate R expressions directly in strings using <code>{}</code></li>
</ul>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>name <span class="ot">&lt;-</span> <span class="st">"Jenn Allen-Pho"</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>age <span class="ot">&lt;-</span> <span class="dv">67</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str_glue</span>(<span class="st">"My name is {name} and I am {age} years old."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>My name is Jenn Allen-Pho and I am 67 years old.</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="interpolate-calculations-and-functions" class="level2">
<h2 class="anchored" data-anchor-id="interpolate-calculations-and-functions">Interpolate: Calculations and functions</h2>
<div class="row">
<div class="col-6 fragment">
<p>Include simple calculations:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_glue</span>(<span class="st">"The value of x is {x} </span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="st">    and x squared is {x^2}."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>The value of x is 10 
and x squared is 100.</code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p>Include embedded R code:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str_glue</span>(<span class="st">"The sum of a and b is {a + b} </span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="st">    and their mean is {mean(c(a,b))}."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>The sum of a and b is 8 
and their mean is 4.</code></pre>
</div>
</div>
</div>
</div>
<div class="notes">
<p><code>str_glue()</code> is whitespace sensitive, meaning that unlike in the rest of R, newlines and indentation will be preserved in the resulting string. This can be useful for formatting multi-line strings, but it also means you need to be careful with how you format your code inside <code>str_glue()</code> to avoid unintended whitespace in the output.</p>
<p>In these slides I often put in line breaks to allow for code in columns without scrolling, but notice that when I do it with <code>str_glue()</code>, the resulting string also has line breaks.</p>
</div>
</section>
</section>
<section id="string-detection-and-matching" class="level1">
<h1>String Detection and Matching</h1>
<section id="detect-identify-patterns" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="detect-identify-patterns">Detect: Identify patterns</h2>
<p><strong>Does the pattern exist?</strong> : Return logical <code>TRUE</code> or <code>FALSE</code></p>
<div class="cell" data-output-location="column">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>fruit</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple"      "banana"     "cherry"     "date"       "elderberry"</code></pre>
</div>
</div>
<div class="row">
<div class="col-6 fragment">
<p><strong>Base:</strong> Find pattern with <span class="func">grepl()</span> (=grep <strong>l</strong>ogical)</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"a"</span>, <span class="st">"banana"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"z"</span>, <span class="st">"banana"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"err"</span>, fruit)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE  TRUE FALSE  TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="fu">grepl</span>(<span class="st">"err"</span>, fruit)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE FALSE  TRUE FALSE</code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p><strong><code>stringr</code>:</strong> Find pattern with <span class="func">str_detect()</span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="st">"banana"</span>, <span class="st">"an"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="st">"banana"</span>, <span class="st">"z"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(fruit, <span class="st">"err"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE  TRUE FALSE  TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(fruit, <span class="st">"err"</span>, <span class="at">negate =</span> <span class="cn">TRUE</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE FALSE  TRUE FALSE</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="tidy-string-detection" class="level2">
<h2 class="anchored" data-anchor-id="tidy-string-detection">Tidy string detection</h2>
<div class="row">
<div class="col-6 fragment">
<p>Use <code>str_detect()</code> in tidy pipelines:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using str_detect() in filter()</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(fruit) <span class="sc">|&gt;</span> </span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># keep fruits containing "a"</span></span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">str_detect</span>(fruit, <span class="st">"a"</span>)) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   fruit
1  apple
2 banana
3   date</code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p>Detection is case-sensitive by default, but can be made case-insensitive with <code>regex()</code> wrapper and <code>ignore_case</code> arg:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="st">"Banana"</span>, <span class="st">"a"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="st">"Banana"</span>, <span class="st">"A"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use regex to make case-insensitive</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="st">"Banana"</span>, </span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">regex</span>(<span class="st">"A"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</div>
</div>
<div class="notes">
<p>grep detection can be used in pipelines too, but <code>str_</code> functions are more consistent and easier to read as things get more complex.</p>
<p>grep doesn’t have a simple way of negating the pattern (i.e., find strings that do NOT match) like str_detect, but you can use the <code>!</code> operator to invert logical output</p>
</div>
</section>
<section id="detect-locate-patterns-first" class="level2">
<h2 class="anchored" data-anchor-id="detect-locate-patterns-first">Detect: Locate patterns (first)</h2>
<p><strong>Where does the pattern appear <em>first</em>?</strong> : Return position of first match</p>
<div class="row">
<div class="col-6 fragment">
<p><strong>Base:</strong> Find first match with <span class="func">regexpr()</span>, return an integer with attributes</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co"># regexpr() returns start position of first match</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>base_first_match <span class="ot">&lt;-</span> <span class="fu">regexpr</span>(<span class="st">"an"</span>, <span class="st">"banana"</span>) </span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>base_first_match</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2
attr(,"match.length")
[1] 2
attr(,"index.type")
[1] "chars"
attr(,"useBytes")
[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(base_first_match)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "integer"</code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p><strong><code>stringr</code>:</strong> Find first match with <span class="func">str_locate()</span>, return a matrix with start/end columns</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co"># str_locate() returns matrix with start/end of first match</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>stringr_first_match <span class="ot">&lt;-</span> <span class="fu">str_locate</span>(<span class="st">"banana"</span>, <span class="st">"an"</span>) </span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>stringr_first_match</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>     start end
[1,]     2   3</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(stringr_first_match) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "matrix" "array" </code></pre>
</div>
</div>
</div>
</div>
<div class="notes">
<p><strong>Pattern location</strong>: Compare <code>gregexpr()</code> output (list of positions) with <code>str_locate()</code> and <code>str_locate_all()</code> (matrix/list of matrices with start/end).</p>
</div>
</section>
<section id="detect-locate-patterns-all" class="level2">
<h2 class="anchored" data-anchor-id="detect-locate-patterns-all">Detect: Locate patterns (all)</h2>
<p><strong>Where does the pattern appear <em>anywhere</em>?</strong> : Return integer position(s) of all matches</p>
<div class="row">
<div class="col-6 fragment">
<p><strong>Base:</strong> Find all matches with <span class="func">gregexpr()</span>, return list of integers</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># gregexpr() returns positions of all matches </span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a><span class="co"># as list of integer vectors with attributes</span></span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>base_all_match <span class="ot">&lt;-</span> <span class="fu">gregexpr</span>(<span class="st">"an"</span>, <span class="st">"banana"</span>) </span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>base_all_match</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] 2 4
attr(,"match.length")
[1] 2 2
attr(,"index.type")
[1] "chars"
attr(,"useBytes")
[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(base_all_match)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "list"</code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p><strong><code>stringr</code>:</strong> Find all matches with <span class="func">str_locate_all</span>, return list of matrices</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="co"># str_locate_all() returns start and end positions</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a><span class="co"># of all matches as list of matrices</span></span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>stringr_all_match <span class="ot">&lt;-</span> <span class="fu">str_locate_all</span>(<span class="st">"banana"</span>, <span class="st">"an"</span>)</span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a>stringr_all_match</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
     start end
[1,]     2   3
[2,]     4   5</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(stringr_all_match)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "list"</code></pre>
</div>
</div>
</div>
</div>
<div class="notes">
<p><strong>Pattern location</strong>: Compare <code>gregexpr()</code> output (list of positions) with <code>str_locate()</code> and <code>str_locate_all()</code> (matrix/list of matrices with start/end).</p>
</div>
</section>
<section id="detect-count-patterns" class="level2">
<h2 class="anchored" data-anchor-id="detect-count-patterns">Detect: Count patterns</h2>
<p><strong>How many times does the pattern appear?</strong> : Return integer count of matches</p>
<div class="row">
<div class="col-6">
<div class="fragment">
<p><strong>Base:</strong> Count matches with <code>gregexpr()</code> + <span class="func">lengths()</span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use gregexpr() to find all matches, </span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="co"># then lengths() to count</span></span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a><span class="fu">lengths</span>(</span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">gregexpr</span>(<span class="st">"an"</span>, <span class="st">"banana"</span>)</span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p><strong><code>stringr</code>:</strong> Count matches with <span class="func">str_count()</span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># counts occurrences in single string</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_count</span>(<span class="st">"banana"</span>, <span class="st">"an"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
</div>
</div>
<div class="col-6">
<div class="fragment">
<p><strong><code>str_count</code> is vectorized:</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count occurrences of "cool" in </span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="co"># each string of abed_ratings vector</span></span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_count</span>(abed_ratings, <span class="st">"cool"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 3 2 1 0 0</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p><strong>Example:</strong> Count words with regex</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>sentence</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The QUICK brown fox jumps over the LAZY dog."</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count words using word boundary pattern</span></span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_count</span>(sentence, <span class="st">"</span><span class="sc">\\</span><span class="st">b</span><span class="sc">\\</span><span class="st">w+</span><span class="sc">\\</span><span class="st">b"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="notes">
<p><strong>Counting patterns</strong>: <code>str_count()</code> for counting pattern occurrences in each string. use cases like counting words, specific characters, or pattern matches.</p>
<p>Need <code>lengths()</code>, not <code>length()</code>, because <code>gregexpr()</code> returns a list of integer vectors (one for each string), and <code>lengths()</code> counts the number of matches in each vector, while <code>length()</code> would just give the number of strings in the list.</p>
</div>
</section>
</section>
<section id="string-manipulation" class="level1 page-columns page-full">
<h1>String Manipulation</h1>
<section id="extract-subset-by-pattern" class="level2">
<h2 class="anchored" data-anchor-id="extract-subset-by-pattern">Extract: Subset by pattern</h2>
<p><strong>Extract strings that match pattern</strong>: Return strings with matched pattern</p>
<div class="row">
<div class="col-6 fragment">
<p><strong>Base:</strong> Return matching strings with <span class="func">grep()</span> and <code>value = TRUE</code></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">"a"</span>, fruit, <span class="at">value =</span> <span class="cn">TRUE</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple"  "banana" "date"  </code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p><strong><code>stringr</code>:</strong> Return matching strings with <span class="func">str_subset()</span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_subset</span>(fruit, <span class="st">"a"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple"  "banana" "date"  </code></pre>
</div>
</div>
<p><code>str_subset()</code> is a shortcut for <code>str_detect()</code> + subsetting</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="co"># detect matches returns a logical vector</span></span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a><span class="co"># then subset with [] indexing on the TRUE values</span></span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a>fruit[<span class="fu">str_detect</span>(fruit, <span class="st">"a"</span>)]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple"  "banana" "date"  </code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="extract-subset-by-position" class="level2">
<h2 class="anchored" data-anchor-id="extract-subset-by-position">Extract: Subset by position</h2>
<p><strong>Extract by position</strong>: Return substring based on character positions</p>
<div class="cell" data-output-location="column">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>sentence</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The QUICK brown fox jumps over the LAZY dog."</code></pre>
</div>
</div>
<div class="row">
<div class="col-4 fragment">
<p><strong>Base:</strong> Use <code>substr()</code> to extract substring by character positions</p>
<p><code>substr(x, start, stop)</code>; positive indices only</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract characters 1-9</span></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a><span class="fu">substr</span>(sentence, <span class="dv">1</span>, <span class="dv">9</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The QUICK"</code></pre>
</div>
</div>
</div>
<div class="col-4 fragment">
<p><strong><code>stringr</code>:</strong> Use <code>str_sub()</code> to extract substring by character positions, supports negative indexing</p>
<p><code>str_sub(x, start, end)</code>; accepts negative indices</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract characters 1-9</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(sentence, <span class="dv">1</span>, <span class="dv">9</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The QUICK"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract last 4 characters</span></span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(sentence, <span class="sc">-</span><span class="dv">4</span>, <span class="sc">-</span><span class="dv">1</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "dog."</code></pre>
</div>
</div>
</div>
<div class="col-4 fragment">
<p><strong>Example use case:</strong> Extract specific parts of a string and interpolate with <code>str_glue()</code></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>pos_start <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a>neg_end <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span></span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str_glue</span>(</span>
<span id="cb133-5"><a href="#cb133-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Abridged sentence:</span></span>
<span id="cb133-6"><a href="#cb133-6" aria-hidden="true" tabindex="-1"></a><span class="st">    {str_sub(sentence, pos_start, 9)} {str_sub(sentence, -4, neg_end)}"</span></span>
<span id="cb133-7"><a href="#cb133-7" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Abridged sentence:
The QUICK dog.</code></pre>
</div>
</div>
</div>
</div>
<div class="notes">
<p><code>substr()</code> is an example of where base string functions can be inconsistent. Since there is no pattern matching in this kind of extraction, there is no pattern to come first, so the string to search comes first. This is perfectly reasonable, but it can be confusing when you are used to the pattern-first convention of other string functions. In contrast, <code>str_sub()</code> follows the consistent structure of string as first argument. This consistency in argument order helps reduce confusion and makes it easier to remember how to use different functions within the <code>stringr</code> package. It also makes <em>all</em> stringr functions play nice in pipelines, where the result of one line is implicitly the first argument of the next.</p>
<p>Coding challenge:</p>
<p>Use regex, str_glue, and str_sub to detect the first occurrence of an animal and of an adjective in the sentence, extract them, and create a new string with them. For example, if the sentence is “The QUICK brown fox jumps over the LAZY dog.”, you could extract “fox” (animal) and “QUICK” (adjective) and create a new string like “Look at the QUICK fox!”</p>
<p>R doesn’t know what “fox” or “LAZY” mean, so you’ll need to define what counts as an animal and an adjective for this challenge. The simplest way to do this is just to name the words directly in a vector or within the regex pattern, but you can try for a more adaptable or creative definition if you want to make it more interesting!</p>
<p>Challengier:</p>
<p>Create a function that lets your user decide whether the resulting sentence should use the first or second occurrence of the animal and adjective. For example, if the user chooses “first”, the function would extract “QUICK” and “fox” to create “Look at the QUICK fox!”, but if they choose “second”, it would extract “LAZY” and “dog” to create “Look at the LAZY dog!”.</p>
<p>Yet even more challengier:</p>
<p>Allow your user to specify first animal and second adjective (or vice versa), or to specify a different sentence to analyze. Make sure your function can handle cases where the specified occurrence doesn’t exist (e.g., if the user asks for the second animal but there is only one animal in the sentence) and provide informative error messages.</p>
</div>
</section>
<section id="extract-extract-by-pattern" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="extract-extract-by-pattern">Extract: Extract by pattern</h2>
<p><strong>Extract pattern from strings</strong> : Return matched pattern as string</p>
<div class="row">
<div class="col-6 fragment">
<p><strong>Base:</strong> Extract pattern with <code>gregexpr()</code> (find positions) then <span class="func">regmatches()</span> (extract matches by positions)</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract first "o"</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a><span class="fu">regmatches</span>(sentence, <span class="fu">regexpr</span>(<span class="st">"o"</span>, sentence))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "o"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract all "o"</span></span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a><span class="fu">regmatches</span>(sentence, <span class="fu">gregexpr</span>(<span class="st">"o"</span>, sentence))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "o" "o" "o" "o"</code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p><strong><code>stringr</code>:</strong> Extract pattern with <span class="func">str_extract()</span> (first match) or <span class="func">str_extract_all()</span> (all matches)</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract first "o"</span></span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract</span>(sentence, <span class="st">"o"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "o"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract all "o"</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract_all</span>(sentence, <span class="st">"o"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "o" "o" "o" "o"</code></pre>
</div>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="margin-aside">
<p>Not terribly useful for literal pattern matching.</p>
</div></div><div class="notes">
<p>Notice how in the base version one function wants the string as the first argument and the other wants the string as the second argument? This is where stringr’s consistency in argument order is much less confusing.</p>
</div>
</section>
<section id="extract-extract-by-pattern-with-regex" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="extract-extract-by-pattern-with-regex">Extract: Extract by pattern with regex</h2>
<p><strong>Extract regex pattern from strings</strong> : Return matched non-literal pattern as string</p>
<div class="row">
<div class="col-6 fragment">
<p><strong>Base:</strong> Extract pattern with <code>gregexpr()</code> (find positions) then <span class="func">regmatches()</span> (extract matches by positions)</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract first word</span></span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a><span class="fu">regmatches</span>(sentence, <span class="fu">regexpr</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">b</span><span class="sc">\\</span><span class="st">w+</span><span class="sc">\\</span><span class="st">b"</span>, sentence))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract all words</span></span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a><span class="fu">regmatches</span>(sentence, <span class="fu">gregexpr</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">b</span><span class="sc">\\</span><span class="st">w+</span><span class="sc">\\</span><span class="st">b"</span>, sentence))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "The"   "QUICK" "brown" "fox"   "jumps" "over"  "the"   "LAZY"  "dog"  </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract capitalized words</span></span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a><span class="fu">regmatches</span>(sentence, <span class="fu">gregexpr</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">b[A-Z]+</span><span class="sc">\\</span><span class="st">b"</span>, sentence))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "QUICK" "LAZY" </code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p><strong><code>stringr</code>:</strong> Extract pattern with <span class="func">str_extract()</span> (first match) or <span class="func">str_extract_all()</span> (all matches)</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract first word</span></span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract</span>(sentence, <span class="st">"</span><span class="sc">\\</span><span class="st">b</span><span class="sc">\\</span><span class="st">w+</span><span class="sc">\\</span><span class="st">b"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract all words</span></span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract_all</span>(sentence, <span class="st">"</span><span class="sc">\\</span><span class="st">b</span><span class="sc">\\</span><span class="st">w+</span><span class="sc">\\</span><span class="st">b"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "The"   "QUICK" "brown" "fox"   "jumps" "over"  "the"   "LAZY"  "dog"  </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract capitalized words</span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract_all</span>(sentence, <span class="st">"</span><span class="sc">\\</span><span class="st">b[A-Z]+</span><span class="sc">\\</span><span class="st">b"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "QUICK" "LAZY" </code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="replace-exchange-2-patterns" class="level2">
<h2 class="anchored" data-anchor-id="replace-exchange-2-patterns">Replace: Exchange 2 patterns</h2>
<p><strong>Replace patterns in strings</strong> : Return modified string with pattern replaced by new text</p>
<div class="row">
<div class="col-6 fragment">
<p><strong>Base:</strong> <span class="func">sub()</span> replaces first match, <span class="func">gsub()</span> replaces all matches</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="co"># replace first "a" with "X"</span></span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sub</span>(<span class="st">"a"</span>, <span class="st">"X"</span>, <span class="st">"banana"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "bXnana"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb157"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="co"># replace all "a" with "Y"</span></span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">"a"</span>, <span class="st">"Y"</span>, <span class="st">"banana"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "bYnYnY"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb159"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="co"># replace "err" with "Z" in all strings containing "err"</span></span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">"err"</span>, <span class="st">"Z"</span>, fruit) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple"    "banana"   "chZy"     "date"     "elderbZy"</code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p><strong><code>stringr:</code></strong> Use <span class="func">str_replace()</span> to replace first match, <span class="func">str_replace_all()</span> to replace all matches</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb161"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="co"># replace first "a" with "X"</span></span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(<span class="st">"banana"</span>, <span class="st">"a"</span>, <span class="st">"X"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "bXnana"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb163"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="co"># replace all "a" with "Y"</span></span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace_all</span>(<span class="st">"banana"</span>, <span class="st">"a"</span>, <span class="st">"Y"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "bYnYnY"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb165"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="co"># replace "err" with "Z" in all strings containing "err"</span></span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace_all</span>(fruit, <span class="st">"err"</span>, <span class="st">"Z"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple"    "banana"   "chZy"     "date"     "elderbZy"</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="replace-remove-patterns" class="level2">
<h2 class="anchored" data-anchor-id="replace-remove-patterns">Replace: Remove patterns</h2>
<p><strong>Remove patterns from strings</strong> : Return modified string with pattern removed</p>
<div class="row">
<div class="col-4 fragment">
<p><strong>Base:</strong> Remove pattern with <code>sub()</code> or <code>gsub()</code> and replacing with empty string <code>""</code></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb167"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove first "a" from "banana"</span></span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sub</span>(<span class="st">"a"</span>, <span class="st">""</span>, <span class="st">"banana"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "bnana"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb169"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove "err" from all strings</span></span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">"err"</span>, <span class="st">""</span>, fruit)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple"   "banana"  "chy"     "date"    "elderby"</code></pre>
</div>
</div>
</div>
<div class="col-4 fragment">
<p><strong><code>stringr:</code></strong> Remove pattern with <code>str_replace()</code> or <code>str_replace_all()</code></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove first "a" from "banana"</span></span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(<span class="st">"banana"</span>, <span class="st">"a"</span>, <span class="st">""</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "bnana"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove "err" from all strings</span></span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace_all</span>(fruit, <span class="st">"err"</span>, <span class="st">""</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple"   "banana"  "chy"     "date"    "elderby"</code></pre>
</div>
</div>
</div>
<div class="col-4 fragment">
<p><strong><code>stringr:</code></strong> Remove pattern with <span class="func">str_remove()</span> or <span class="func">str_remove_all()</span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb175"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove first "a" from "banana"</span></span>
<span id="cb175-2"><a href="#cb175-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_remove</span>(<span class="st">"banana"</span>, <span class="st">"a"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "bnana"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb177"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove "err" from all strings</span></span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_remove_all</span>(fruit, <span class="st">"err"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple"   "banana"  "chy"     "date"    "elderby"</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="replace-regex-patterns" class="level2">
<h2 class="anchored" data-anchor-id="replace-regex-patterns">Replace: regex patterns</h2>
<p>Use regex patterns in replacement with both base and <code>stringr</code> functions to do more complex replacements. For example, you can use regex groups to reorder parts of a string:</p>
<div class="row">
<div class="col-6 fragment">
<p><strong>Base</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb179"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="co"># replace all words with "WORD"</span></span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">b</span><span class="sc">\\</span><span class="st">w+</span><span class="sc">\\</span><span class="st">b"</span>, <span class="st">"WORD"</span>, sentence)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "WORD WORD WORD WORD WORD WORD WORD WORD WORD."</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb181"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Relace all vowels with "*" and spaces with "_"</span></span>
<span id="cb181-2"><a href="#cb181-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">"_"</span>, <span class="fu">gsub</span>(<span class="st">"[aeiouAEIOU]"</span>, <span class="st">"*"</span>, sentence))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Th*_Q**CK_br*wn_f*x_j*mps_*v*r_th*_L*ZY_d*g."</code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p><strong><code>stringr</code></strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="co"># replace all words with "WORD"</span></span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace_all</span>(sentence, <span class="st">"</span><span class="sc">\\</span><span class="st">b</span><span class="sc">\\</span><span class="st">w+</span><span class="sc">\\</span><span class="st">b"</span>, <span class="st">"WORD"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "WORD WORD WORD WORD WORD WORD WORD WORD WORD."</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Relace all vowels with "*" and spaces with "_"</span></span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace_all</span>(sentence, <span class="st">"[aeiouAEIOU]"</span>, <span class="st">"*"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb185-3"><a href="#cb185-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(<span class="st">" "</span>, <span class="st">"_"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Th*_Q**CK_br*wn_f*x_j*mps_*v*r_th*_L*ZY_d*g."</code></pre>
</div>
</div>
</div>
</div>
<div class="notes">
<p><strong>Replacement</strong>: Compare <code>sub()</code> (first match) and <code>gsub()</code> (all matches) with <code>str_replace()</code> and <code>str_replace_all()</code>. Demonstrate literal replacement and regex-based replacement.</p>
<p>the base version can be more concise; the stringr version allows for complex but readable pipelines</p>
</div>
</section>
<section id="transform-trim-whitespace" class="level2">
<h2 class="anchored" data-anchor-id="transform-trim-whitespace">Transform: Trim whitespace</h2>
<p><strong>Clean up messy text</strong> : Return modified string with leading/trailing whitespace removed</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb187"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a>messy_string <span class="ot">&lt;-</span> <span class="st">"   Hello,   World!   "</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="row">
<div class="col-4 fragment">
<p><strong>Base:</strong> Remove leading/trailing whitespace with <span class="func">trimws()</span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb188"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove leading &amp; trailing whitespace</span></span>
<span id="cb188-2"><a href="#cb188-2" aria-hidden="true" tabindex="-1"></a><span class="fu">trimws</span>(messy_string) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Hello,   World!"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb190"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove leading whitespace only</span></span>
<span id="cb190-2"><a href="#cb190-2" aria-hidden="true" tabindex="-1"></a><span class="fu">trimws</span>(messy_string, <span class="at">which =</span> <span class="st">"left"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Hello,   World!   "</code></pre>
</div>
</div>
</div>
<div class="col-4 fragment">
<p><strong><code>stringr</code>:</strong> Remove leading/trailing whitespace with <span class="func">str_trim()</span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb192"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove leading &amp; trailing whitespace</span></span>
<span id="cb192-2"><a href="#cb192-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_trim</span>(messy_string)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Hello,   World!"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb194"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove trailing whitespace only</span></span>
<span id="cb194-2"><a href="#cb194-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_trim</span>(messy_string, <span class="at">side =</span> <span class="st">"right"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "   Hello,   World!"</code></pre>
</div>
</div>
</div>
<div class="col-4 fragment">
<p><strong><code>stringr</code>:</strong> <em>Also</em> collapse internal whitespace with <span class="func">str_squish()</span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb196"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="co"># removing both leading and trailing</span></span>
<span id="cb196-2"><a href="#cb196-2" aria-hidden="true" tabindex="-1"></a><span class="co"># AND ALSO collapse any internal </span></span>
<span id="cb196-3"><a href="#cb196-3" aria-hidden="true" tabindex="-1"></a><span class="co"># whitespace to a single space</span></span>
<span id="cb196-4"><a href="#cb196-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str_squish</span>(messy_string)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Hello, World!"</code></pre>
</div>
</div>
</div>
</div>
<div class="notes">
<p><strong>Trimming whitespace</strong>: Compare <code>trimws()</code> with <code>str_trim()</code> (removes leading/trailing) and <code>str_squish()</code> (also collapses internal whitespace).</p>
</div>
</section>
<section id="transform-pad-strings" class="level2">
<h2 class="anchored" data-anchor-id="transform-pad-strings">Transform: Pad strings</h2>
<p><strong>Pad strings to fixed width</strong> : Return modified string with padding added to reach specified width</p>
<div class="row">
<div class="col-6 fragment">
<p><strong>Base:</strong> Pad strings with <span class="func">sprintf()</span> and width specifier</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb198"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pad "42" to width of 5 with spaces</span></span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sprintf</span>(<span class="st">"%5s"</span>, <span class="st">"42"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "   42"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb200"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pad "42" to width of 5 with zeros</span></span>
<span id="cb200-2"><a href="#cb200-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sprintf</span>(<span class="st">"%05s"</span>, <span class="st">"42"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "00042"</code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p><strong><code>stringr:</code></strong> Pad strings with <span class="func">str_pad()</span> and <code>width</code>, <code>side</code>, <code>pad</code> args</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb202"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pad "42" to width of 5 with spaces on the left</span></span>
<span id="cb202-2"><a href="#cb202-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_pad</span>(<span class="st">"42"</span>, <span class="at">width =</span> <span class="dv">5</span>, <span class="at">side =</span> <span class="st">"left"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "   42"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb204"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pad "42" to width of 5 with zeros on the right</span></span>
<span id="cb204-2"><a href="#cb204-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_pad</span>(<span class="st">"42"</span>, <span class="at">width =</span> <span class="dv">5</span>, <span class="at">side =</span> <span class="st">"right"</span>, <span class="at">pad =</span> <span class="st">"0"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "42000"</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="transform-convert-case" class="level2">
<h2 class="anchored" data-anchor-id="transform-convert-case">Transform: Convert case</h2>
<p><strong>Change letter case</strong> : Return modified string with case converted</p>
<div class="cell" data-output-location="column">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb206"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a>sentence</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The QUICK brown fox jumps over the LAZY dog."</code></pre>
</div>
</div>
<div class="row">
<div class="col-4 fragment">
<p><strong>Base:</strong> Convert to all upper/lower case with <span class="func">toupper()</span> &amp; <span class="func">tolower()</span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb208"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="fu">toupper</span>(sentence)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG."</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb210"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb210-1"><a href="#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tolower</span>(sentence)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "the quick brown fox jumps over the lazy dog."</code></pre>
</div>
</div>
</div>
<div class="col-4 fragment">
<p><strong><code>stringr:</code></strong> Convert to all upper/lower case with <span class="func">str_to_upper()</span> &amp; <span class="func">str_to_lower()</span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb212"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_upper</span>(sentence)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG."</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb214"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb214-1"><a href="#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_lower</span>(sentence)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "the quick brown fox jumps over the lazy dog."</code></pre>
</div>
</div>
</div>
<div class="col-4 fragment">
<p><strong><code>stringr:</code></strong> Convert to title/sentence case with <span class="func">str_to_title()</span> &amp; <span class="func">str_to_sentence()</span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb216"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb216-1"><a href="#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Captialize Each Word</span></span>
<span id="cb216-2"><a href="#cb216-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_title</span>(sentence)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The Quick Brown Fox Jumps Over The Lazy Dog."</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb218"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb218-1"><a href="#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Capitalize first word.</span></span>
<span id="cb218-2"><a href="#cb218-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_sentence</span>(sentence)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The quick brown fox jumps over the lazy dog."</code></pre>
</div>
</div>
</div>
</div>
<div class="notes">
<p><strong>Case conversion</strong>: Compare base R functions (<code>toupper()</code>, <code>tolower()</code>) with <code>stringr</code> equivalents (<code>str_to_upper()</code>, <code>str_to_lower()</code>, <code>str_to_title()</code>, <code>str_to_sentence()</code>). str functions have local-aware case conversion like Turkish dotted/dotless i: <code>str_to_upper("i", locale = "tr")</code> returns “İ” (dotted capital I) and <code>str_to_lower("I", "tr")</code> returns “ı” (dotless lowercase i) in Turkish locale, while base R’s <code>toupper("i")</code> and <code>tolower("I")</code> return “I” and “i” respectively regardless of locale.</p>
</div>
</section>
</section>
<section id="regular-expressions" class="level1">
<h1>Regular Expressions</h1>
<section id="regex-overview" class="level2">
<h2 class="anchored" data-anchor-id="regex-overview">Regex overview</h2>
<div class="row">
<div class="col-7">
<div class="fragment">
<p><strong>Literal characters</strong>: Match exactly as written</p>
</div>
<div class="fragment">
<p><strong>Metacharacters</strong> have special meaning, like defining what kinds of characters to recognize, how many times to match, or where in the string to look. Common metacharacters:</p>
</div>
<div class="fragment" style="font-size: 0.8em;">
<table class="caption-top table">
<thead>
<tr class="header">
<th>Metacharacter</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>.</code></td>
<td>Any single character except newline</td>
</tr>
<tr class="even">
<td><code>*</code></td>
<td>0 or more of the preceding element</td>
</tr>
<tr class="odd">
<td><code>+</code></td>
<td>1 or more of the preceding element</td>
</tr>
<tr class="even">
<td><code>?</code></td>
<td>0 or 1 of the preceding element</td>
</tr>
<tr class="odd">
<td><code>[]</code></td>
<td>Character class (matches any one character inside)</td>
</tr>
<tr class="even">
<td><code>{}</code></td>
<td>Quantifier (specifies number of occurrences)</td>
</tr>
<tr class="odd">
<td><code>^</code></td>
<td>Start of string</td>
</tr>
<tr class="even">
<td><code>$</code></td>
<td>End of string</td>
</tr>
<tr class="odd">
<td><code>\</code></td>
<td>Escape character (treat next character literally)</td>
</tr>
<tr class="even">
<td><code>|</code></td>
<td>Alternation (matches the pattern before or after)</td>
</tr>
</tbody>
</table>
</div>
<div class="fragment nonincremental">
<p><strong>Escaping</strong> allows you to match metacharacters as literal characters by preceding them with the escape metacharacter. - Match literal period: <code>\.</code> → <code>"\\."</code> in R - Match literal asterisk: <code>\*</code> → <code>"\\*"</code> in R</p>
</div>
</div>
<div class="col-5" style="margin-top: -3em">
<div class="fragment">
<p>Match with metacharacter:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb220"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb220-1"><a href="#cb220-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="st">"filetxt"</span>, <span class="st">"."</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb222"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb222-1"><a href="#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="st">""</span>, <span class="st">"."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>Literal match with escaped metacharacter:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb224"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb224-1"><a href="#cb224-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="st">"file.txt"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb226"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb226-1"><a href="#cb226-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="st">"filetxt"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="character-classes" class="level2">
<h2 class="anchored" data-anchor-id="character-classes">Character classes</h2>
<div class="row">
<div class="col-6 fragment">
<p><strong>Character classes</strong> match any one character from a set. Common character classes:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Class</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>[abc]</code></td>
<td>a, b, or c</td>
</tr>
<tr class="even">
<td><code>[^abc]</code></td>
<td>NOT a, b, or c</td>
</tr>
<tr class="odd">
<td><code>[a-z]</code></td>
<td>any lowercase letter</td>
</tr>
<tr class="even">
<td><code>\d</code></td>
<td>digit</td>
</tr>
<tr class="odd">
<td><code>\w</code></td>
<td>word character (letter, digit, or underscore)</td>
</tr>
<tr class="even">
<td><code>\s</code></td>
<td>whitespace character (space, tab, newline)</td>
</tr>
</tbody>
</table>
</div>
<div class="col-6 fragment" style="margin-top: -3em;">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb228"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb228-1"><a href="#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="st">"apple"</span>, <span class="st">"[aeiou]"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb230"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb230-1"><a href="#cb230-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="st">"apple"</span>, <span class="st">"[^aeiou]"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb232"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb232-1"><a href="#cb232-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="st">"apple"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">d"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb234"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb234-1"><a href="#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="st">"apple"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">w"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb236"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb236-1"><a href="#cb236-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="st">"apple"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">s"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="quantifiers" class="level2">
<h2 class="anchored" data-anchor-id="quantifiers">Quantifiers</h2>
<div class="row">
<div class="col-6 fragment">
<p><strong>Quantifiers</strong> specify how many times the preceding element should be matched:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Quantifier</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>*</code></td>
<td>0 or more of the preceding element</td>
</tr>
<tr class="even">
<td><code>+</code></td>
<td>1 or more of the preceding element</td>
</tr>
<tr class="odd">
<td><code>?</code></td>
<td>0 or 1 of the preceding element</td>
</tr>
<tr class="even">
<td><code>{n}</code></td>
<td>exactly n of the preceding element</td>
</tr>
<tr class="odd">
<td><code>{n,}</code></td>
<td>n or more of the preceding element</td>
</tr>
<tr class="even">
<td><code>{n,m}</code></td>
<td>between n and m of the preceding element</td>
</tr>
</tbody>
</table>
</div>
<div class="col-6 smaller fragment" style="margin-top: -3em;">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb238"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb238-1"><a href="#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="st">"aaab"</span>, <span class="st">"a*"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb240"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb240-1"><a href="#cb240-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="st">"aaab"</span>, <span class="st">"a+"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb242"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb242-1"><a href="#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="st">"aaab"</span>, <span class="st">"a?"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb244"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb244-1"><a href="#cb244-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="st">"aaab"</span>, <span class="st">"a{3}"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb246"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb246-1"><a href="#cb246-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="st">"aaab"</span>, <span class="st">"a{2,}"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb248"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb248-1"><a href="#cb248-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="st">"aaab"</span>, <span class="st">"a{2,3}"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="example-quantifiers-in-stringr-functions" class="level2">
<h2 class="anchored" data-anchor-id="example-quantifiers-in-stringr-functions">Example: Quantifiers in stringr functions</h2>
<p>Use quantifiers in <code>stringr</code> functions to specify how many occurrences to replace, locate, count, etc.:</p>
<div class="fragment">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb250"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb250-1"><a href="#cb250-1" aria-hidden="true" tabindex="-1"></a><span class="co"># replace 2 or 3 a's with "X"</span></span>
<span id="cb250-2"><a href="#cb250-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace_all</span>(<span class="st">"aaab"</span>, <span class="st">"a{2,3}"</span>, <span class="st">"X"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Xb"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb252"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb252-1"><a href="#cb252-1" aria-hidden="true" tabindex="-1"></a><span class="co"># locates positions of 2 or 3 a's </span></span>
<span id="cb252-2"><a href="#cb252-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_locate_all</span>(<span class="st">"aaab"</span>, <span class="st">"a{2,3}"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
     start end
[1,]     1   3</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb254"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb254-1"><a href="#cb254-1" aria-hidden="true" tabindex="-1"></a><span class="co"># counts occurrences of 2 or 3 a's</span></span>
<span id="cb254-2"><a href="#cb254-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_count</span>(<span class="st">"aaab"</span>, <span class="st">"a{2,3}"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
</div>
</section>
<section id="greedy-vs-lazy-matching" class="level2">
<h2 class="anchored" data-anchor-id="greedy-vs-lazy-matching">Greedy vs lazy matching</h2>
<div class="row">
<div class="col-6 fragment">
<ul>
<li><span class="keyword">Greedy</span>: match as much as possible with <code>.*</code>
<ul>
<li>Stop at the end of the string or the last possible match</li>
</ul></li>
<li><span class="keyword">Lazy</span>: match as little as possible with <code>.*?</code>
<ul>
<li>Stop at the first possible match</li>
</ul></li>
</ul>
</div>
<div class="col-6">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb256"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb256-1"><a href="#cb256-1" aria-hidden="true" tabindex="-1"></a>double_dog <span class="ot">&lt;-</span> <span class="st">"The quick brown fox jumps over the lazy dog. The dog was displeased."</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb257"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb257-1"><a href="#cb257-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Greedy match (matches everything between first "The" and last "dog")</span></span>
<span id="cb257-2"><a href="#cb257-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract</span>(double_dog, <span class="st">"The.*dog"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The quick brown fox jumps over the lazy dog. The dog"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb259"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb259-1"><a href="#cb259-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Lazy match (matches the shortest string between first "The" and first "dog")</span></span>
<span id="cb259-2"><a href="#cb259-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract</span>(double_dog, <span class="st">"The.*?dog"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The quick brown fox jumps over the lazy dog"</code></pre>
</div>
</div>
</div>
<div class="notes">
<p>For inquiring minds: the reason this did not work in the lecture is that the definition included a line break, and by default the dot <code>.</code> does not match newlines. So it did not find a matching pattern between the first the and first dog, but did find it in the first two words of the second sentence. There was only one true match, so both greedy and lazy returned it: <code>"The dog"</code></p>
</div>
</section>
<section id="anchors-boundaries" class="level2">
<h2 class="anchored" data-anchor-id="anchors-boundaries">Anchors &amp; boundaries</h2>
<div class="row">
<div class="col-6 fragment">
<p><strong>Anchors</strong> specify where in the string to look for a match:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 23%">
<col style="width: 76%">
</colgroup>
<thead>
<tr class="header">
<th>Anchor</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>^</code></td>
<td>Start of string[^Note that the carat <code>^</code> has two uses: as an anchor for the start of the string, and as a negation symbol when used inside square brackets for character classes.]</td>
</tr>
<tr class="even">
<td><code>$</code></td>
<td>End of string</td>
</tr>
<tr class="odd">
<td><code>\b</code></td>
<td>Word boundary (position between a word character and a non-word character</td>
</tr>
<tr class="even">
<td><code>\B</code></td>
<td>Non-word boundary (position between two word characters or two non-word characters)</td>
</tr>
</tbody>
</table>
</div>
<div class="col-6 fragment smaller" style="margin-top: -3em;">
<p>Match partial string with <code>^</code> <em>or</em> <code>$</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb261"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb261-1"><a href="#cb261-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="st">"banana"</span>, <span class="st">"^ba"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb263"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb263-1"><a href="#cb263-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="st">"banana"</span>, <span class="st">"na$"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>Match entire string with <code>^</code> <em>and</em> <code>$</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb265"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb265-1"><a href="#cb265-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="st">"banana"</span>, <span class="st">"^banana$"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb267"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb267-1"><a href="#cb267-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="st">"banana"</span>, <span class="st">"^ban$"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</div>
</div>
<div class="notes">
<p>Note that the carat <code>^</code> has two uses: as an anchor for the start of the string, and as a negation symbol when used inside square brackets for character classes (e.g., <code>[^abc]</code> means “not a, b, or c”). The meaning depends on the context in which it is used.</p>
</div>
</section>
<section id="example-whole-word-matching" class="level2">
<h2 class="anchored" data-anchor-id="example-whole-word-matching">Example: Whole-Word Matching</h2>
<p>Use word boundaries for whole word matching:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb269"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb269-1"><a href="#cb269-1" aria-hidden="true" tabindex="-1"></a>sea_cat <span class="ot">&lt;-</span> <span class="st">"The cat is on the catamaran. She's a weird cat."</span></span>
<span id="cb269-2"><a href="#cb269-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb269-3"><a href="#cb269-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_count</span>(sea_cat, <span class="st">" cat "</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb271"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb271-1"><a href="#cb271-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_count</span>(sea_cat, <span class="st">"</span><span class="sc">\\</span><span class="st">bcat</span><span class="sc">\\</span><span class="st">b"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb273"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb273-1"><a href="#cb273-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_count</span>(sea_cat, <span class="st">"cat"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
</section>
<section id="example-pattern-validation" class="level2">
<h2 class="anchored" data-anchor-id="example-pattern-validation">Example: Pattern Validation</h2>
<p>Validation pattern example (e.g., email, phone)</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb275"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb275-1"><a href="#cb275-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Simple email validation pattern: one or more word characters, @, one or more word characters, ., two or more letters</span></span>
<span id="cb275-2"><a href="#cb275-2" aria-hidden="true" tabindex="-1"></a>email_pattern <span class="ot">&lt;-</span> <span class="st">"^</span><span class="sc">\\</span><span class="st">w+@</span><span class="sc">\\</span><span class="st">w+</span><span class="sc">\\</span><span class="st">.</span><span class="sc">\\</span><span class="st">w{2,}$"</span></span>
<span id="cb275-3"><a href="#cb275-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb275-4"><a href="#cb275-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="st">"name@school.edu"</span>, email_pattern) <span class="co"># returns TRUE for valid email format</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb277"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb277-1"><a href="#cb277-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(<span class="st">"invalid email@spammer,com"</span>, email_pattern) <span class="co"># returns FALSE for invalid email format</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</section>
<section id="capture-groups-back-references" class="level2">
<h2 class="anchored" data-anchor-id="capture-groups-back-references">Capture groups &amp; back-references</h2>
<div class="fragment">
<p><strong>Capture</strong> groups to extract specific parts of a matched pattern and <strong>back-reference</strong> them in replacement or later in the regex.</p>
<ul>
<li><code>()</code>: Create capture group</li>
<li><code>\1</code>, <code>\2</code>, etc.: Reference captured groups in replacement</li>
</ul>
</div>
<div class="fragment">
<p>Use <code>back-references</code> to reorder captured groups:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb279"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb279-1"><a href="#cb279-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Capture the two animals (fox, dog) and swap their placement in the string</span></span>
<span id="cb279-2"><a href="#cb279-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(sentence, <span class="st">"(fox)(.*)(dog)"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">3</span><span class="sc">\\</span><span class="st">2</span><span class="sc">\\</span><span class="st">1"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The QUICK brown dog jumps over the LAZY fox."</code></pre>
</div>
</div>
</div>
</section>
<section id="example-reorder-us-date-format" class="level2">
<h2 class="anchored" data-anchor-id="example-reorder-us-date-format">Example: Reorder US date format</h2>
<p>Reorder US dates <code>MM/DD/YYYY</code> to <code>YYYY-MM-DD</code> using capture groups and back-references:</p>
<div class="fragment">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb281"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb281-1"><a href="#cb281-1" aria-hidden="true" tabindex="-1"></a>new_year <span class="ot">&lt;-</span> <span class="st">"The date is 12/31/2025. Happy New Year!"</span></span>
<span id="cb281-2"><a href="#cb281-2" aria-hidden="true" tabindex="-1"></a>birthday <span class="ot">&lt;-</span> <span class="st">"The date is 6/7/25. Happy birthday!"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb282"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb282-1"><a href="#cb282-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Capture month, day, year and reorder to YYYY-MM-DD</span></span>
<span id="cb282-2"><a href="#cb282-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(new_year, <span class="st">"(</span><span class="sc">\\</span><span class="st">d{2})/(</span><span class="sc">\\</span><span class="st">d{2})/(</span><span class="sc">\\</span><span class="st">d{4})"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">3-</span><span class="sc">\\</span><span class="st">1-</span><span class="sc">\\</span><span class="st">2"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The date is 2025-12-31. Happy New Year!"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb284"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb284-1"><a href="#cb284-1" aria-hidden="true" tabindex="-1"></a><span class="co"># account for the possibility of 1-digit month/day and 2-digit year</span></span>
<span id="cb284-2"><a href="#cb284-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(birthday, <span class="st">"(</span><span class="sc">\\</span><span class="st">d{1,2})/(</span><span class="sc">\\</span><span class="st">d{1,2})/(</span><span class="sc">\\</span><span class="st">d{2,4})"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">3-</span><span class="sc">\\</span><span class="st">1-</span><span class="sc">\\</span><span class="st">2"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The date is 25-6-7. Happy birthday!"</code></pre>
</div>
</div>
</div>
</section>
<section id="regex-challenge" class="level2">
<h2 class="anchored" data-anchor-id="regex-challenge">Regex Challenge</h2>
<p>Create a function for the date reordering that can handle both 1 or 2 digit month/day and 2 or 4 digit year formats as input but always deliver a consistent <code>YYYY-MM-DD</code> output format. Use capture groups to extract the components and back-references to reorder them in the desired format. Test your function on various date strings to ensure it works correctly.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb286"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb286-1"><a href="#cb286-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: regex-challenge</span></span>
<span id="cb286-2"><a href="#cb286-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb286-3"><a href="#cb286-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create function `reorder_date()`</span></span>
<span id="cb286-4"><a href="#cb286-4" aria-hidden="true" tabindex="-1"></a>reorder_date <span class="ot">&lt;-</span> <span class="cf">function</span>(date_string) {</span>
<span id="cb286-5"><a href="#cb286-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb286-6"><a href="#cb286-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Define regex pattern to capture month, day, and year with flexible digit counts</span></span>
<span id="cb286-7"><a href="#cb286-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb286-8"><a href="#cb286-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Use str_replace to reorder the date components to YYYY-MM-DD</span></span>
<span id="cb286-9"><a href="#cb286-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb286-10"><a href="#cb286-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb286-11"><a href="#cb286-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb286-12"><a href="#cb286-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Test with multiple string types</span></span>
<span id="cb286-13"><a href="#cb286-13" aria-hidden="true" tabindex="-1"></a><span class="fu">reorder_date</span>(<span class="st">"4/5/2023"</span>) <span class="co"># Expected: "2023-04-05"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Even challengier:</em> Handle multiple date formats by adding arguments for the user to specify the input and/or format.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>