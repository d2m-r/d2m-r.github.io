<!DOCTYPE html>
<html lang="en"><head>
<link href="../images/icons/hex3.png" rel="icon" type="image/png">
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-eedebf623301b1c3b9a877dd695003c7.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-contrib/bootstrap-icons-1.13.1/bootstrap-icons.css" rel="stylesheet"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.8.25">

  <meta name="dcterms.date" content="2026-02-10">
  <title>Data to Manuscript in R – Tidyverse Wrangling with Strings</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        background-color: #f5f5f5;
        color: #7e7e7e;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #7e7e7e;  padding-left: 4px; }
    div.sourceCode
      { color: #000000; background-color: #fcfcfc; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #000000; } /* Normal */
    code span.al { color: #e78ac3; background-color: #fcfcfc; font-weight: bold; } /* Alert */
    code span.an { color: #1f78b4; background-color: #f4fafd; font-style: italic; } /* Annotation */
    code span.at { color: #15712a; } /* Attribute */
    code span.bn { color: #a6761d; } /* BaseN */
    code span.bu { color: #0c7149; } /* BuiltIn */
    code span.cf { color: #6f1ba0; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #6a3d9a; } /* Char */
    code span.cn { color: #a6761d; } /* Constant */
    code span.co { color: #1f78b4; background-color: #f4fafd; font-style: italic; } /* Comment */
    code span.cv { color: #1f78b4; background-color: #f4fafd; font-style: italic; } /* CommentVar */
    code span.do { color: #1f78b4; background-color: #f4fafd; font-style: italic; } /* Documentation */
    code span.dt { color: #000000; } /* DataType */
    code span.dv { color: #0d481b; font-weight: bold; } /* DecVal */
    code span.er { color: #842222; text-decoration: underline; } /* Error */
    code span.ex { color: #0c7149; font-weight: bold; } /* Extension */
    code span.fl { color: #0d481b; font-weight: bold; } /* Float */
    code span.fu { color: #0c7149; } /* Function */
    code span.im { color: #15712a; font-style: italic; } /* Import */
    code span.in { color: #6f1ba0; font-weight: bold; } /* Information */
    code span.kw { color: #6f1ba0; font-weight: bold; } /* Keyword */
    code span.op { color: #b5089d; } /* Operator */
    code span.ot { color: #15712a; font-style: italic; } /* Other */
    code span.pp { color: #15712a; font-style: italic; } /* Preprocessor */
    code span.re { color: #b9d9f9; background-color: #888888; } /* RegionMarker */
    code span.sc { color: #6a3d9a; } /* SpecialChar */
    code span.ss { color: #6a3d9a; } /* SpecialString */
    code span.st { color: #6a3d9a; } /* String */
    code span.va { color: #000000; } /* Variable */
    code span.vs { color: #6a3d9a; } /* VerbatimString */
    code span.wa { color: #842222; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto-62c01cff9dfa3b6a64abf00bd93a69f6.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-code-focus/codefocus.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script type="text/javascript" src="../theme/bubbles.js"></script>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Tidyverse Wrangling with Strings</h1>
  <p class="subtitle">strings, regex, and character data w/ base &amp; <code>stringr</code></p>

<div class="quarto-title-authors">
</div>

  <p class="date">2026-02-10</p>
</section>
<section>
<section id="strings" class="title-slide slide level1 center">
<h1>Strings</h1>

</section>
<section id="character-data" class="slide level2">
<h2>Character data</h2>
<ul>
<li class="fragment"><span class="keyword">Character data</span>: R datatype for text</li>
<li class="fragment"><span class="keyword">Character</span>: Smallest unit of text</li>
<li class="fragment"><span class="keyword">String</span>: Sequence of zero or more characters</li>
<li class="fragment"><span class="keyword">Character vector</span>: Collection of one or more strings
<ul>
<li class="fragment">A single string is a character vector of length 1</li>
</ul></li>
</ul>
</section>
<section id="create-strings-and-character-vectors" class="slide level2 smaller">
<h2>Create strings and character vectors</h2>
<div class="row">
<div class="col-6 fragment">
<p>Use single <code>'</code> or double <code>"</code> quotes to define strings:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a>favorite_class <span class="ot">&lt;-</span> <span class="st">"d2m-R"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell fragment">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a></a><span class="fu">typeof</span>(favorite_class) <span class="co"># data type</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a><span class="fu">class</span>(favorite_class) <span class="co"># object class</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a><span class="fu">length</span>(favorite_class) <span class="co"># no. elements</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a></a><span class="fu">str_length</span>(favorite_class) <span class="co"># no. characters</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p>Use the combine function <span class="func">c()</span> to create vectors of strings:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a></a>favorite_class_units <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"d"</span>, <span class="st">"2"</span>, <span class="st">"m"</span>, <span class="st">"-"</span>, <span class="st">"R"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell fragment">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a></a><span class="fu">typeof</span>(favorite_class_units) <span class="co"># data type</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a></a><span class="fu">class</span>(favorite_class_units) <span class="co"># object class</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a></a><span class="fu">length</span>(favorite_class_units) <span class="co"># no. elements</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a></a><span class="fu">str_length</span>(favorite_class_units) <span class="co"># no. char.</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 1 1 1 1</code></pre>
</div>
</div>
</div>
</div>
<aside class="notes">
<p><code>typeof()</code> vs.&nbsp;<code>class()</code>: <code>typeof()</code> gives the low-level data type (character), while <code>class()</code> gives the high-level object class (character vector). A single string is a character vector of length 1, while multiple strings form a character vector of length &gt; 1. With strings this will be the same (character), but you’ll see the difference with factors.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="define-examples" class="slide level2">
<h2>Define Examples</h2>
<p><em>Define strings and vectors to use as examples in later slides:</em></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a></a><span class="co"># Strings</span></span>
<span id="cb19-2"><a></a>sentence <span class="ot">&lt;-</span> <span class="st">'The QUICK brown fox jumps over the LAZY dog.'</span></span>
<span id="cb19-3"><a></a>favorite_class <span class="ot">&lt;-</span> <span class="st">"d2m-R"</span></span>
<span id="cb19-4"><a></a>messy_string <span class="ot">&lt;-</span> <span class="st">"   Hello,   World!   "</span></span>
<span id="cb19-5"><a></a></span>
<span id="cb19-6"><a></a><span class="co"># Character vectors</span></span>
<span id="cb19-7"><a></a>favorite_class_units <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"d"</span>, <span class="st">"2"</span>, <span class="st">"m"</span>, <span class="st">"-"</span>, <span class="st">"R"</span>)</span>
<span id="cb19-8"><a></a>fruit <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"apple"</span>, <span class="st">"banana"</span>, <span class="st">"cherry"</span>, <span class="st">"date"</span>, <span class="st">"elderberry"</span>)</span>
<span id="cb19-9"><a></a>greeting <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"hello"</span>, <span class="st">"world"</span>)</span>
<span id="cb19-10"><a></a>farewell <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"goodbye"</span>, <span class="st">"everyone"</span>)</span>
<span id="cb19-11"><a></a>abed_ratings <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"cool"</span>, <span class="st">"cool cool cool"</span>, <span class="st">"cool cool"</span>, <span class="st">"cool"</span>, <span class="st">"sarcastic: ok"</span>, <span class="st">"evil: hot"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="base-r-vs-tidyverse" class="slide level2">
<h2>Base R vs tidyverse</h2>
<div class="row">
<div class="col-6">
<div class="overlap-box">
<div class="box-title">
<p>Base R</p>
</div>
<div class="box-content">
<ul>
<li class="fragment">Inconsistent naming
<ul>
<li class="fragment"><code>grep</code>, <code>grepl</code>, <code>sub</code>, <code>gsub</code>, <code>regexpr</code>, <code>gregexpr</code></li>
</ul></li>
<li class="fragment">Inconsistent argument order
<ul>
<li class="fragment">Commonly <code>(pattern, string)</code></li>
</ul></li>
<li class="fragment">Not vectorized by default
<ul>
<li class="fragment">Often need <code>sapply()</code> or loops for vectors</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div class="col-6">
<div class="overlap-box accent1">
<div class="box-title">
<p><code>stringr</code></p>
</div>
<div class="box-content">
<ul>
<li class="fragment">Consistent <code>str_*</code> pattern
<ul>
<li class="fragment"><code>str_detect</code>, <code>str_replace</code>, <code>str_replace_all</code></li>
</ul></li>
<li class="fragment">Consistent order
<ul>
<li class="fragment">Always <code>(string, pattern)</code></li>
</ul></li>
<li class="fragment">Vectorized by default
<ul>
<li class="fragment">Works with strings <em>or</em> vectors of strings</li>
</ul></li>
</ul>
</div>
</div>
</div>
</div>
<aside class="notes">
<p><strong>Base R vs tidyverse approach</strong>: Like most things in the tidyverse, <code>stringr</code> improves upon base r options by providing a consistent naming scheme and argument order. Contrast base R’s inconsistent naming (<code>grep</code>, <code>sub</code>, <code>gsub</code>) with <code>stringr</code>’s consistent <code>str_*</code> pattern. <code>stringr</code> is vectorized by default and uses consistent argument ordering (string first, pattern second).</p>
<p>What does it mean to be “vectorized by default?”</p>
<p>It means that <code>stringr</code> functions are designed to work with vectors of strings without needing to use <code>sapply()</code> or loops. You can pass a character vector to a <code>stringr</code> function, and it will operate on each element of the vector automatically, returning a vector of results. In contrast, many base R string functions are not vectorized and require additional steps to apply them to each element of a character vector.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="stringr-simplify-working-with-strings" class="slide level2 left-sidebar-slide" data-fullscreen="true" style="font-size: .8;">
<h2><code>stringr</code>: Simplify working with strings</h2>
<p><img data-src="../images/icons/tv-icons/stringr.png" class="absolute" style="top: .5em; left: 1em; height: 3em; z-index: 10;; "></p>
<div class="sidebar-column">
<div class="sidebar-title">
<p><span class="pkg">stringr</span>: <br> Simplify working with strings</p>
</div>
<div class="sidebar-content">
<ul>
<li class="fragment">Core tidyverse package for text manipulation</li>
<li class="fragment">Consistent <code>str_*</code> naming pattern</li>
<li class="fragment">Vectorized functions for efficient string processing</li>
</ul>
</div>
</div>
<div class="main-content">
<div class="r-stretch" style="display: grid; grid-template-columns: repeat(3, 1fr); grid-template-rows: minmax(0, 1fr) minmax(0, 1fr); gap: 0.8em;">
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em 0.2em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><i class="bi-arrows-collapse-vertical " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p>Combine</p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>Join strings</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em 0.2em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><i class="bi-braces-asterisk " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p>Interpolate</p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>Embed variables in strings</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em 0.2em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><i class="bi-search " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p>Detect</p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>Find patterns</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em 0.2em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><i class="bi-box-arrow-right " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p>Extract</p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>Pull out text</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em 0.2em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><i class="bi-recycle " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p>Replace</p>
</div>
</div>
<div class="box-content" style="text-align: center; overflow: hidden; min-height: 0; font-size: 0.9em; line-height: .9;">
<p>Modify text</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em 0.2em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><i class="bi-capslock-fill " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p>Transform</p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>Change format</p>
</div>
</div>
</div>
</div>
<aside class="notes">
<p><strong>Key function families:</strong></p>
<ul>
<li><strong>Combine</strong>: Join strings (<code>str_c</code>, <code>str_flatten</code>)</li>
<li><strong>Detect</strong>: Find patterns (<code>str_detect</code>, <code>str_locate</code>)</li>
<li><strong>Extract</strong>: Pull out text (<code>str_sub</code>, <code>str_extract</code>)</li>
<li><strong>Replace</strong>: Modify text (<code>str_replace</code>, <code>str_remove</code>)</li>
<li><strong>Transform</strong>: Change format (<code>str_to_upper</code>, <code>str_trim</code>)</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="create-and-combine-strings" class="title-slide slide level1 center">
<h1>Create and Combine Strings</h1>

</section>
<section id="combine-concatenate" class="slide level2">
<h2>Combine: Concatenate</h2>
<p><span class="keyword">Concatenate</span>: Join multiple strings together into one string</p>
<ul>
<li class="fragment">Take <em>strings</em> as separate arguments; return single string</li>
<li class="fragment"><strong>Base:</strong>
<ul>
<li class="fragment"><code>paste()</code>: space separator by default</li>
<li class="fragment"><code>paste0()</code>: no separator</li>
</ul></li>
<li class="fragment"><strong><code>stringr</code>:</strong>
<ul>
<li class="fragment"><code>str_c()</code>: no separator, <code>NA</code>s propagate</li>
</ul></li>
</ul>
</section>
<section id="compare-combine-vs-concatenate" class="slide level2">
<h2>Compare combine vs concatenate</h2>
<p>Combine <span class="func">c()</span> vs.&nbsp;concatenate <span class="func">paste()</span> / <span class="func">str_c()</span>:</p>
<div class="container-fluid">
<div class="row">
<div class="col-4 fragment">
<p>Base:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a></a><span class="co"># combine strings into vector</span></span>
<span id="cb20-2"><a></a><span class="co"># not concatenated</span></span>
<span id="cb20-3"><a></a><span class="fu">c</span>(<span class="st">"hello"</span>, <span class="st">"world"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hello" "world"</code></pre>
</div>
</div>
</div>
<div class="col-4 fragment">
<p>Base:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a></a><span class="co"># concatenate strings into a string</span></span>
<span id="cb22-2"><a></a><span class="fu">paste</span>(<span class="st">"hello"</span>, <span class="st">"world"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hello world"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a></a><span class="co"># vector treated as 1 argument</span></span>
<span id="cb24-2"><a></a><span class="co"># not concatenated</span></span>
<span id="cb24-3"><a></a><span class="fu">paste</span>(greeting) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hello" "world"</code></pre>
</div>
</div>
</div>
<div class="col-4 fragment">
<p><code>stringr</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a></a><span class="co"># concatenate strings into 1 string </span></span>
<span id="cb26-2"><a></a><span class="co"># no separator by default</span></span>
<span id="cb26-3"><a></a><span class="fu">str_c</span>(<span class="st">"hello"</span>, <span class="st">"world"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "helloworld"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a></a><span class="co"># vector treated as 1 argument</span></span>
<span id="cb28-2"><a></a><span class="co"># not concatenated</span></span>
<span id="cb28-3"><a></a><span class="fu">str_c</span>(greeting) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hello" "world"</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="compare-separator-behavior" class="slide level2">
<h2>Compare separator behavior</h2>
<div class="row">
<div class="col-6 fragment">
<p>Base:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a></a><span class="co"># default space separator</span></span>
<span id="cb30-2"><a></a><span class="fu">paste</span>(<span class="st">"hello"</span>, <span class="st">"world"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hello world"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a></a><span class="co"># default no separator</span></span>
<span id="cb32-2"><a></a><span class="fu">paste0</span>(<span class="st">"hello"</span>, <span class="st">"world"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "helloworld"</code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p><code>stringr</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a></a><span class="co"># default no separator</span></span>
<span id="cb34-2"><a></a><span class="fu">str_c</span>(<span class="st">"hello"</span>, <span class="st">"world"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "helloworld"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a></a><span class="co"># custom space separator</span></span>
<span id="cb36-2"><a></a><span class="fu">str_c</span>(<span class="st">"hello"</span>, <span class="st">"world"</span>, <span class="at">sep =</span> <span class="st">" "</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hello world"</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="compare-na-handling" class="slide level2">
<h2>Compare NA handling</h2>
<div class="row">
<div class="col-6 fragment">
<p>Base:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a></a><span class="co"># NA treated as "NA" (string)</span></span>
<span id="cb38-2"><a></a><span class="fu">paste</span>(<span class="st">"hello"</span>, <span class="cn">NA</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hello NA"</code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p><code>stringr</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a></a><span class="co"># NA propagates to result</span></span>
<span id="cb40-2"><a></a><span class="fu">str_c</span>(<span class="st">"hello"</span>, <span class="cn">NA</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="compare-vectorized-same" class="slide level2">
<h2>Compare vectorized (same)</h2>
<p>Both <code>paste()</code> and <code>str_c()</code> are vectorized (can operate on strings or vectors of strings).</p>
<div class="cell columns column-output-location">
<div class="column">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a></a>greeting_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"hello"</span>, <span class="st">"goodbye"</span>)</span>
<span id="cb42-2"><a></a>audience_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"world"</span>, <span class="st">"everyone"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column">

</div></div>
<div class="row">
<div class="col-6 fragment">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a></a><span class="co"># vectorized with space separator</span></span>
<span id="cb43-2"><a></a><span class="fu">paste</span>(greeting_vector, audience_vector) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hello world"      "goodbye everyone"</code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a></a><span class="co"># vectorized with no separator</span></span>
<span id="cb45-2"><a></a><span class="fu">str_c</span>(greeting_vector, audience_vector) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "helloworld"      "goodbyeeveryone"</code></pre>
</div>
</div>
</div>
</div>
<aside class="notes">
<p>NA propagates: In <code>paste()</code>, if any argument is <code>NA</code>, it is treated as the string “NA”. In contrast, <code>str_c()</code> propagates <code>NA</code> values, meaning that if any argument is <code>NA</code>, the result will also be <code>NA</code>. This allows you to preserve missing values in your data instead of converting them to a string representation.</p>
<p>Vectorized: they can operate on vectors of strings element-wise without needing loops or <code>sapply()</code>. However, their default separator behavior differs, and <code>str_c()</code> propagates <code>NA</code> values instead of converting them to the string “NA”.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="combine-collapse" class="slide level2">
<h2>Combine: Collapse</h2>
<ul>
<li class="fragment"><span class="keyword">Collapse</span>: Join elements of a string vector into a single string</li>
<li class="fragment">Take <em>vector</em> of strings as single argument; return single string
<ul>
<li class="fragment"><i class="bi-check-circle-fill " style="" role="img" aria-hidden="true"></i> String vector: <code>c("apple", "banana", "cherry", "date", "elderberry")</code></li>
<li class="fragment"><i class="bi-x-circle-fill " style="" role="img" aria-hidden="true"></i> Multiple string arguments: <code>"apple", "banana", "cherry", "date", "elderberry"</code></li>
</ul></li>
</ul>
</section>
<section id="combine-collapse-1" class="slide level2">
<h2>Combine: Collapse</h2>
<div class="row">
<div class="col-6 fragment">
<p><strong>Base:</strong> Concat with <code>paste()</code>’s <code>sep</code> arg, collapse with <code>collapse</code> arg:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a></a><span class="co"># sep does not affect vector length &gt; 1</span></span>
<span id="cb47-2"><a></a><span class="fu">paste</span>(fruit, <span class="at">sep =</span> <span class="st">", "</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple"      "banana"     "cherry"     "date"       "elderberry"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a></a><span class="co"># collapse with comma</span></span>
<span id="cb49-2"><a></a><span class="fu">paste</span>(fruit, <span class="at">collapse =</span> <span class="st">", "</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple, banana, cherry, date, elderberry"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a></a><span class="co"># sep ignored when collapse is used</span></span>
<span id="cb51-2"><a></a><span class="co"># because sep can't apply to a vector length &gt; 1</span></span>
<span id="cb51-3"><a></a><span class="fu">paste</span>(fruit, <span class="at">sep =</span> <span class="st">"SEPARATOR!!!"</span>, <span class="at">collapse =</span> <span class="st">", "</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple, banana, cherry, date, elderberry"</code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p><strong><code>stringr</code>:</strong> Collapse vectors with <span class="func">str_flatten</span>’s <code>collapse</code> arg, no <code>sep</code> arg:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a></a> <span class="co"># default no separator</span></span>
<span id="cb53-2"><a></a><span class="fu">str_flatten</span>(fruit)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "applebananacherrydateelderberry"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a></a><span class="co"># collapse with comma</span></span>
<span id="cb55-2"><a></a><span class="fu">str_flatten</span>(fruit, <span class="at">collapse =</span> <span class="st">", "</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple, banana, cherry, date, elderberry"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a></a><span class="co"># collapse with space</span></span>
<span id="cb57-2"><a></a><span class="fu">str_flatten</span>(fruit, <span class="at">collapse =</span> <span class="st">" "</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple banana cherry date elderberry"</code></pre>
</div>
</div>
</div>
</div>
<aside class="notes">
<p>Separators are for combining multiple strings, each provided as a separate argument. Collapse is for combining elements of a single vector into one string.</p>
<p>What’s the difference between <code>sep</code> and <code>collapse</code>? - <code>sep</code>: Specifies the string to use to separate individual elements when concatenating multiple strings together. It is used when you want to combine multiple strings into a single string with a specific separator between them. For example, <code>str_c("hello", "world", sep = " ")</code> will produce “hello world”. - <code>collapse</code>: Specifies the string to use to separate elements when collapsing a vector of strings into a single string. It is used when you have a vector of strings and want to combine them into one string with a specific separator between each element. For example, <code>str_flatten(c("apple", "banana", "cherry"), collapse = ", ")</code> will produce “apple, banana, cherry”.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="interpolate" class="slide level2">
<h2>Interpolate</h2>
<ul>
<li class="fragment"><span class="keyword">Interpolate</span>: Embed variable values or expressions directly within strings</li>
<li class="fragment">Take <em>string</em> with placeholders/expressions; return single string with values filled in
<ul>
<li class="fragment">Base <code>sprintf()</code> requires substitutions for the placeholders as additional arguments</li>
</ul></li>
</ul>
<div class="row">
<div class="col-6 fragment">
<p><strong>Base:</strong> Interpolate with placeholders using <span class="func">sprintf()</span></p>
<ul>
<li class="fragment">Use placeholders: <code>%s</code> (string), <code>%d</code> (integer), <code>%f</code> (float)</li>
</ul>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a></a>name <span class="ot">&lt;-</span> <span class="st">"Natalie"</span></span>
<span id="cb59-2"><a></a>age <span class="ot">&lt;-</span> <span class="dv">99</span></span>
<span id="cb59-3"><a></a></span>
<span id="cb59-4"><a></a><span class="co"># Arguments will replace placeholders in order</span></span>
<span id="cb59-5"><a></a><span class="fu">sprintf</span>(<span class="st">"My name is %s and I am %d years old."</span>, name, age)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "My name is Natalie and I am 99 years old."</code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p><strong><code>stringr</code>:</strong> Interpolate directly with <code>str_glue()</code></p>
<ul>
<li class="fragment">Evaluate R expressions directly in strings using <code>{}</code></li>
</ul>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a></a>name <span class="ot">&lt;-</span> <span class="st">"Jenn Allen-Pho"</span></span>
<span id="cb61-2"><a></a>age <span class="ot">&lt;-</span> <span class="dv">67</span></span>
<span id="cb61-3"><a></a></span>
<span id="cb61-4"><a></a><span class="fu">str_glue</span>(<span class="st">"My name is {name} and I am {age} years old."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>My name is Jenn Allen-Pho and I am 67 years old.</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="interpolate-calculations-and-functions" class="slide level2">
<h2>Interpolate: Calculations and functions</h2>
<div class="row">
<div class="col-6 fragment">
<p>Include simple calculations:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb63"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a></a>x <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb63-2"><a></a><span class="fu">str_glue</span>(<span class="st">"The value of x is {x} </span></span>
<span id="cb63-3"><a></a><span class="st">    and x squared is {x^2}."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>The value of x is 10 
and x squared is 100.</code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p>Include embedded R code:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a></a>a <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb65-2"><a></a>b <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb65-3"><a></a></span>
<span id="cb65-4"><a></a><span class="fu">str_glue</span>(<span class="st">"The sum of a and b is {a + b} </span></span>
<span id="cb65-5"><a></a><span class="st">    and their mean is {mean(c(a,b))}."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>The sum of a and b is 8 
and their mean is 4.</code></pre>
</div>
</div>
</div>
</div>
<aside class="notes">
<p><code>str_glue()</code> is whitespace sensitive, meaning that unlike in the rest of R, newlines and indentation will be preserved in the resulting string. This can be useful for formatting multi-line strings, but it also means you need to be careful with how you format your code inside <code>str_glue()</code> to avoid unintended whitespace in the output.</p>
<p>In these slides I often put in line breaks to allow for code in columns without scrolling, but notice that when I do it with <code>str_glue()</code>, the resulting string also has line breaks.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="string-detection-and-matching" class="title-slide slide level1 center">
<h1>String Detection and Matching</h1>

</section>
<section id="detect-identify-patterns" class="slide level2 smaller">
<h2>Detect: Identify patterns</h2>
<p><strong>Does the pattern exist?</strong> : Return logical <code>TRUE</code> or <code>FALSE</code></p>
<div class="cell columns column-output-location">
<div class="column">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a></a>fruit</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple"      "banana"     "cherry"     "date"       "elderberry"</code></pre>
</div>
</div></div>
<div class="row">
<div class="col-6 fragment">
<p><strong>Base:</strong> Find pattern with <span class="func">grepl()</span> (=grep <strong>l</strong>ogical)</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb69"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a></a><span class="fu">grepl</span>(<span class="st">"a"</span>, <span class="st">"banana"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb71"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a></a><span class="fu">grepl</span>(<span class="st">"z"</span>, <span class="st">"banana"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb73"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a></a><span class="fu">grepl</span>(<span class="st">"err"</span>, fruit)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE  TRUE FALSE  TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb75"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a></a><span class="sc">!</span><span class="fu">grepl</span>(<span class="st">"err"</span>, fruit)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE FALSE  TRUE FALSE</code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p><strong><code>stringr</code>:</strong> Find pattern with <span class="func">str_detect()</span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb77"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a></a><span class="fu">str_detect</span>(<span class="st">"banana"</span>, <span class="st">"an"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb79"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a></a><span class="fu">str_detect</span>(<span class="st">"banana"</span>, <span class="st">"z"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb81"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a></a><span class="fu">str_detect</span>(fruit, <span class="st">"err"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE  TRUE FALSE  TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb83"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a></a><span class="fu">str_detect</span>(fruit, <span class="st">"err"</span>, <span class="at">negate =</span> <span class="cn">TRUE</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE FALSE  TRUE FALSE</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="tidy-string-detection" class="slide level2">
<h2>Tidy string detection</h2>
<div class="row">
<div class="col-6 fragment">
<p>Use <code>str_detect()</code> in tidy pipelines:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb85"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a></a><span class="co"># Using str_detect() in filter()</span></span>
<span id="cb85-2"><a></a><span class="fu">data.frame</span>(fruit) <span class="sc">|&gt;</span> </span>
<span id="cb85-3"><a></a>    <span class="co"># keep fruits containing "a"</span></span>
<span id="cb85-4"><a></a>    <span class="fu">filter</span>(<span class="fu">str_detect</span>(fruit, <span class="st">"a"</span>)) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   fruit
1  apple
2 banana
3   date</code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p>Detection is case-sensitive by default, but can be made case-insensitive with <code>regex()</code> wrapper and <code>ignore_case</code> arg:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb87"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a></a><span class="fu">str_detect</span>(<span class="st">"Banana"</span>, <span class="st">"a"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb89"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a></a><span class="fu">str_detect</span>(<span class="st">"Banana"</span>, <span class="st">"A"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb91"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a></a><span class="co"># Use regex to make case-insensitive</span></span>
<span id="cb91-2"><a></a><span class="fu">str_detect</span>(<span class="st">"Banana"</span>, </span>
<span id="cb91-3"><a></a>    <span class="fu">regex</span>(<span class="st">"A"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</div>
</div>
<aside class="notes">
<p>grep detection can be used in pipelines too, but <code>str_</code> functions are more consistent and easier to read as things get more complex.</p>
<p>grep doesn’t have a simple way of negating the pattern (i.e., find strings that do NOT match) like str_detect, but you can use the <code>!</code> operator to invert logical output</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="detect-locate-patterns-first" class="slide level2">
<h2>Detect: Locate patterns (first)</h2>
<p><strong>Where does the pattern appear <em>first</em>?</strong> : Return position of first match</p>
<div class="row">
<div class="col-6 fragment">
<p><strong>Base:</strong> Find first match with <span class="func">regexpr()</span>, return an integer with attributes</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb93"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a></a><span class="co"># regexpr() returns start position of first match</span></span>
<span id="cb93-2"><a></a>base_first_match <span class="ot">&lt;-</span> <span class="fu">regexpr</span>(<span class="st">"an"</span>, <span class="st">"banana"</span>) </span>
<span id="cb93-3"><a></a>base_first_match</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2
attr(,"match.length")
[1] 2
attr(,"index.type")
[1] "chars"
attr(,"useBytes")
[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb95"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a></a><span class="fu">class</span>(base_first_match)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "integer"</code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p><strong><code>stringr</code>:</strong> Find first match with <span class="func">str_locate()</span>, return a matrix with start/end columns</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb97"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a></a><span class="co"># str_locate() returns matrix with start/end of first match</span></span>
<span id="cb97-2"><a></a>stringr_first_match <span class="ot">&lt;-</span> <span class="fu">str_locate</span>(<span class="st">"banana"</span>, <span class="st">"an"</span>) </span>
<span id="cb97-3"><a></a>stringr_first_match</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>     start end
[1,]     2   3</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb99"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a></a><span class="fu">class</span>(stringr_first_match) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "matrix" "array" </code></pre>
</div>
</div>
</div>
</div>
<aside class="notes">
<p><strong>Pattern location</strong>: Compare <code>gregexpr()</code> output (list of positions) with <code>str_locate()</code> and <code>str_locate_all()</code> (matrix/list of matrices with start/end).</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="detect-locate-patterns-all" class="slide level2">
<h2>Detect: Locate patterns (all)</h2>
<p><strong>Where does the pattern appear <em>anywhere</em>?</strong> : Return integer position(s) of all matches</p>
<div class="row">
<div class="col-6 fragment">
<p><strong>Base:</strong> Find all matches with <span class="func">gregexpr()</span>, return list of integers</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb101"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a></a><span class="co"># gregexpr() returns positions of all matches </span></span>
<span id="cb101-2"><a></a><span class="co"># as list of integer vectors with attributes</span></span>
<span id="cb101-3"><a></a>base_all_match <span class="ot">&lt;-</span> <span class="fu">gregexpr</span>(<span class="st">"an"</span>, <span class="st">"banana"</span>) </span>
<span id="cb101-4"><a></a>base_all_match</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] 2 4
attr(,"match.length")
[1] 2 2
attr(,"index.type")
[1] "chars"
attr(,"useBytes")
[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb103"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a></a><span class="fu">class</span>(base_all_match)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "list"</code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p><strong><code>stringr</code>:</strong> Find all matches with <span class="func">str_locate_all</span>, return list of matrices</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb105"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a></a><span class="co"># str_locate_all() returns start and end positions</span></span>
<span id="cb105-2"><a></a><span class="co"># of all matches as list of matrices</span></span>
<span id="cb105-3"><a></a>stringr_all_match <span class="ot">&lt;-</span> <span class="fu">str_locate_all</span>(<span class="st">"banana"</span>, <span class="st">"an"</span>)</span>
<span id="cb105-4"><a></a>stringr_all_match</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
     start end
[1,]     2   3
[2,]     4   5</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb107"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a></a><span class="fu">class</span>(stringr_all_match)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "list"</code></pre>
</div>
</div>
</div>
</div>
<aside class="notes">
<p><strong>Pattern location</strong>: Compare <code>gregexpr()</code> output (list of positions) with <code>str_locate()</code> and <code>str_locate_all()</code> (matrix/list of matrices with start/end).</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="detect-count-patterns" class="slide level2">
<h2>Detect: Count patterns</h2>
<p><strong>How many times does the pattern appear?</strong> : Return integer count of matches</p>
<div class="row">
<div class="col-6">
<div class="fragment">
<p><strong>Base:</strong> Count matches with <code>gregexpr()</code> + <span class="func">lengths()</span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb109"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a></a><span class="co"># Use gregexpr() to find all matches, </span></span>
<span id="cb109-2"><a></a><span class="co"># then lengths() to count</span></span>
<span id="cb109-3"><a></a><span class="fu">lengths</span>(</span>
<span id="cb109-4"><a></a>    <span class="fu">gregexpr</span>(<span class="st">"an"</span>, <span class="st">"banana"</span>)</span>
<span id="cb109-5"><a></a>    )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p><strong><code>stringr</code>:</strong> Count matches with <span class="func">str_count()</span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb111"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a></a><span class="co"># counts occurrences in single string</span></span>
<span id="cb111-2"><a></a><span class="fu">str_count</span>(<span class="st">"banana"</span>, <span class="st">"an"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
</div>
</div>
<div class="col-6">
<div class="fragment">
<p><strong><code>str_count</code> is vectorized:</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb113"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a></a><span class="co"># Count occurrences of "cool" in </span></span>
<span id="cb113-2"><a></a><span class="co"># each string of abed_ratings vector</span></span>
<span id="cb113-3"><a></a><span class="fu">str_count</span>(abed_ratings, <span class="st">"cool"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 3 2 1 0 0</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p><strong>Example:</strong> Count words with regex</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb115"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a></a>sentence</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The QUICK brown fox jumps over the LAZY dog."</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb117"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a></a><span class="co"># Count words using word boundary pattern</span></span>
<span id="cb117-2"><a></a><span class="fu">str_count</span>(sentence, <span class="st">"</span><span class="sc">\\</span><span class="st">b</span><span class="sc">\\</span><span class="st">w+</span><span class="sc">\\</span><span class="st">b"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9</code></pre>
</div>
</div>
</div>
</div>
</div>
<aside class="notes">
<p><strong>Counting patterns</strong>: <code>str_count()</code> for counting pattern occurrences in each string. use cases like counting words, specific characters, or pattern matches.</p>
<p>Need <code>lengths()</code>, not <code>length()</code>, because <code>gregexpr()</code> returns a list of integer vectors (one for each string), and <code>lengths()</code> counts the number of matches in each vector, while <code>length()</code> would just give the number of strings in the list.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="string-manipulation" class="title-slide slide level1 center">
<h1>String Manipulation</h1>

</section>
<section id="extract-subset-by-pattern" class="slide level2">
<h2>Extract: Subset by pattern</h2>
<p><strong>Extract strings that match pattern</strong>: Return strings with matched pattern</p>
<div class="row">
<div class="col-6 fragment">
<p><strong>Base:</strong> Return matching strings with <span class="func">grep()</span> and <code>value = TRUE</code></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb119"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a></a><span class="fu">grep</span>(<span class="st">"a"</span>, fruit, <span class="at">value =</span> <span class="cn">TRUE</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple"  "banana" "date"  </code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p><strong><code>stringr</code>:</strong> Return matching strings with <span class="func">str_subset()</span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb121"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a></a><span class="fu">str_subset</span>(fruit, <span class="st">"a"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple"  "banana" "date"  </code></pre>
</div>
</div>
<p><code>str_subset()</code> is a shortcut for <code>str_detect()</code> + subsetting</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb123"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a></a><span class="co"># detect matches returns a logical vector</span></span>
<span id="cb123-2"><a></a><span class="co"># then subset with [] indexing on the TRUE values</span></span>
<span id="cb123-3"><a></a>fruit[<span class="fu">str_detect</span>(fruit, <span class="st">"a"</span>)]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple"  "banana" "date"  </code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="extract-subset-by-position" class="slide level2">
<h2>Extract: Subset by position</h2>
<p><strong>Extract by position</strong>: Return substring based on character positions</p>
<div class="cell columns column-output-location">
<div class="column">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb125"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a></a>sentence</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The QUICK brown fox jumps over the LAZY dog."</code></pre>
</div>
</div></div>
<div class="row">
<div class="col-4 fragment">
<p><strong>Base:</strong> Use <code>substr()</code> to extract substring by character positions</p>
<p><code>substr(x, start, stop)</code>; positive indices only</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb127"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a></a><span class="co"># extract characters 1-9</span></span>
<span id="cb127-2"><a></a><span class="fu">substr</span>(sentence, <span class="dv">1</span>, <span class="dv">9</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The QUICK"</code></pre>
</div>
</div>
</div>
<div class="col-4 fragment">
<p><strong><code>stringr</code>:</strong> Use <code>str_sub()</code> to extract substring by character positions, supports negative indexing</p>
<p><code>str_sub(x, start, end)</code>; accepts negative indices</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb129"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a></a><span class="co"># extract characters 1-9</span></span>
<span id="cb129-2"><a></a><span class="fu">str_sub</span>(sentence, <span class="dv">1</span>, <span class="dv">9</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The QUICK"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb131"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a></a><span class="co"># extract last 4 characters</span></span>
<span id="cb131-2"><a></a><span class="fu">str_sub</span>(sentence, <span class="sc">-</span><span class="dv">4</span>, <span class="sc">-</span><span class="dv">1</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "dog."</code></pre>
</div>
</div>
</div>
<div class="col-4 fragment">
<p><strong>Example use case:</strong> Extract specific parts of a string and interpolate with <code>str_glue()</code></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb133"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a></a>pos_start <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb133-2"><a></a>neg_end <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span></span>
<span id="cb133-3"><a></a></span>
<span id="cb133-4"><a></a><span class="fu">str_glue</span>(</span>
<span id="cb133-5"><a></a>    <span class="st">"Abridged sentence:</span></span>
<span id="cb133-6"><a></a><span class="st">    {str_sub(sentence, pos_start, 9)} {str_sub(sentence, -4, neg_end)}"</span></span>
<span id="cb133-7"><a></a>    )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Abridged sentence:
The QUICK dog.</code></pre>
</div>
</div>
</div>
</div>
<aside class="notes">
<p><code>substr()</code> is an example of where base string functions can be inconsistent. Since there is no pattern matching in this kind of extraction, there is no pattern to come first, so the string to search comes first. This is perfectly reasonable, but it can be confusing when you are used to the pattern-first convention of other string functions. In contrast, <code>str_sub()</code> follows the consistent structure of string as first argument. This consistency in argument order helps reduce confusion and makes it easier to remember how to use different functions within the <code>stringr</code> package. It also makes <em>all</em> stringr functions play nice in pipelines, where the result of one line is implicitly the first argument of the next.</p>
<p>Coding challenge:</p>
<p>Use regex, str_glue, and str_sub to detect the first occurrence of an animal and of an adjective in the sentence, extract them, and create a new string with them. For example, if the sentence is “The QUICK brown fox jumps over the LAZY dog.”, you could extract “fox” (animal) and “QUICK” (adjective) and create a new string like “Look at the QUICK fox!”</p>
<p>R doesn’t know what “fox” or “LAZY” mean, so you’ll need to define what counts as an animal and an adjective for this challenge. The simplest way to do this is just to name the words directly in a vector or within the regex pattern, but you can try for a more adaptable or creative definition if you want to make it more interesting!</p>
<p>Challengier:</p>
<p>Create a function that lets your user decide whether the resulting sentence should use the first or second occurrence of the animal and adjective. For example, if the user chooses “first”, the function would extract “QUICK” and “fox” to create “Look at the QUICK fox!”, but if they choose “second”, it would extract “LAZY” and “dog” to create “Look at the LAZY dog!”.</p>
<p>Yet even more challengier:</p>
<p>Allow your user to specify first animal and second adjective (or vice versa), or to specify a different sentence to analyze. Make sure your function can handle cases where the specified occurrence doesn’t exist (e.g., if the user asks for the second animal but there is only one animal in the sentence) and provide informative error messages.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="extract-extract-by-pattern" class="slide level2">
<h2>Extract: Extract by pattern</h2>
<p><strong>Extract pattern from strings</strong> : Return matched pattern as string</p>
<div class="row">
<div class="col-6 fragment">
<p><strong>Base:</strong> Extract pattern with <code>gregexpr()</code> (find positions) then <span class="func">regmatches()</span> (extract matches by positions)</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb135"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a></a><span class="co"># extract first "o"</span></span>
<span id="cb135-2"><a></a><span class="fu">regmatches</span>(sentence, <span class="fu">regexpr</span>(<span class="st">"o"</span>, sentence))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "o"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb137"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a></a><span class="co"># extract all "o"</span></span>
<span id="cb137-2"><a></a><span class="fu">regmatches</span>(sentence, <span class="fu">gregexpr</span>(<span class="st">"o"</span>, sentence))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "o" "o" "o" "o"</code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p><strong><code>stringr</code>:</strong> Extract pattern with <span class="func">str_extract()</span> (first match) or <span class="func">str_extract_all()</span> (all matches)</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb139"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a></a><span class="co"># extract first "o"</span></span>
<span id="cb139-2"><a></a><span class="fu">str_extract</span>(sentence, <span class="st">"o"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "o"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb141"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a></a><span class="co"># extract all "o"</span></span>
<span id="cb141-2"><a></a><span class="fu">str_extract_all</span>(sentence, <span class="st">"o"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "o" "o" "o" "o"</code></pre>
</div>
</div>
</div>
</div>

<aside class="notes">
<p>Notice how in the base version one function wants the string as the first argument and the other wants the string as the second argument? This is where stringr’s consistency in argument order is much less confusing.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<aside><div>
<p>Not terribly useful for literal pattern matching.</p>
</div></aside></section>
<section id="extract-extract-by-pattern-with-regex" class="slide level2 smaller">
<h2>Extract: Extract by pattern with regex</h2>
<p><strong>Extract regex pattern from strings</strong> : Return matched non-literal pattern as string</p>
<div class="row">
<div class="col-6 fragment">
<p><strong>Base:</strong> Extract pattern with <code>gregexpr()</code> (find positions) then <span class="func">regmatches()</span> (extract matches by positions)</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb143"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a></a><span class="co"># extract first word</span></span>
<span id="cb143-2"><a></a><span class="fu">regmatches</span>(sentence, <span class="fu">regexpr</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">b</span><span class="sc">\\</span><span class="st">w+</span><span class="sc">\\</span><span class="st">b"</span>, sentence))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb145"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a></a><span class="co"># extract all words</span></span>
<span id="cb145-2"><a></a><span class="fu">regmatches</span>(sentence, <span class="fu">gregexpr</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">b</span><span class="sc">\\</span><span class="st">w+</span><span class="sc">\\</span><span class="st">b"</span>, sentence))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "The"   "QUICK" "brown" "fox"   "jumps" "over"  "the"   "LAZY"  "dog"  </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb147"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a></a><span class="co"># extract capitalized words</span></span>
<span id="cb147-2"><a></a><span class="fu">regmatches</span>(sentence, <span class="fu">gregexpr</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">b[A-Z]+</span><span class="sc">\\</span><span class="st">b"</span>, sentence))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "QUICK" "LAZY" </code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p><strong><code>stringr</code>:</strong> Extract pattern with <span class="func">str_extract()</span> (first match) or <span class="func">str_extract_all()</span> (all matches)</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb149"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a></a><span class="co"># extract first word</span></span>
<span id="cb149-2"><a></a><span class="fu">str_extract</span>(sentence, <span class="st">"</span><span class="sc">\\</span><span class="st">b</span><span class="sc">\\</span><span class="st">w+</span><span class="sc">\\</span><span class="st">b"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb151"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a></a><span class="co"># extract all words</span></span>
<span id="cb151-2"><a></a><span class="fu">str_extract_all</span>(sentence, <span class="st">"</span><span class="sc">\\</span><span class="st">b</span><span class="sc">\\</span><span class="st">w+</span><span class="sc">\\</span><span class="st">b"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "The"   "QUICK" "brown" "fox"   "jumps" "over"  "the"   "LAZY"  "dog"  </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb153"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a></a><span class="co"># extract capitalized words</span></span>
<span id="cb153-2"><a></a><span class="fu">str_extract_all</span>(sentence, <span class="st">"</span><span class="sc">\\</span><span class="st">b[A-Z]+</span><span class="sc">\\</span><span class="st">b"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "QUICK" "LAZY" </code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="replace-exchange-2-patterns" class="slide level2">
<h2>Replace: Exchange 2 patterns</h2>
<p><strong>Replace patterns in strings</strong> : Return modified string with pattern replaced by new text</p>
<div class="row">
<div class="col-6 fragment">
<p><strong>Base:</strong> <span class="func">sub()</span> replaces first match, <span class="func">gsub()</span> replaces all matches</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb155"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a></a><span class="co"># replace first "a" with "X"</span></span>
<span id="cb155-2"><a></a><span class="fu">sub</span>(<span class="st">"a"</span>, <span class="st">"X"</span>, <span class="st">"banana"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "bXnana"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb157"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a></a><span class="co"># replace all "a" with "Y"</span></span>
<span id="cb157-2"><a></a><span class="fu">gsub</span>(<span class="st">"a"</span>, <span class="st">"Y"</span>, <span class="st">"banana"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "bYnYnY"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb159"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a></a><span class="co"># replace "err" with "Z" in all strings containing "err"</span></span>
<span id="cb159-2"><a></a><span class="fu">gsub</span>(<span class="st">"err"</span>, <span class="st">"Z"</span>, fruit) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple"    "banana"   "chZy"     "date"     "elderbZy"</code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p><strong><code>stringr:</code></strong> Use <span class="func">str_replace()</span> to replace first match, <span class="func">str_replace_all()</span> to replace all matches</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb161"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a></a><span class="co"># replace first "a" with "X"</span></span>
<span id="cb161-2"><a></a><span class="fu">str_replace</span>(<span class="st">"banana"</span>, <span class="st">"a"</span>, <span class="st">"X"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "bXnana"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb163"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a></a><span class="co"># replace all "a" with "Y"</span></span>
<span id="cb163-2"><a></a><span class="fu">str_replace_all</span>(<span class="st">"banana"</span>, <span class="st">"a"</span>, <span class="st">"Y"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "bYnYnY"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb165"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a></a><span class="co"># replace "err" with "Z" in all strings containing "err"</span></span>
<span id="cb165-2"><a></a><span class="fu">str_replace_all</span>(fruit, <span class="st">"err"</span>, <span class="st">"Z"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple"    "banana"   "chZy"     "date"     "elderbZy"</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="replace-remove-patterns" class="slide level2">
<h2>Replace: Remove patterns</h2>
<p><strong>Remove patterns from strings</strong> : Return modified string with pattern removed</p>
<div class="row">
<div class="col-4 fragment">
<p><strong>Base:</strong> Remove pattern with <code>sub()</code> or <code>gsub()</code> and replacing with empty string <code>""</code></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb167"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a></a><span class="co"># remove first "a" from "banana"</span></span>
<span id="cb167-2"><a></a><span class="fu">sub</span>(<span class="st">"a"</span>, <span class="st">""</span>, <span class="st">"banana"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "bnana"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb169"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a></a><span class="co"># remove "err" from all strings</span></span>
<span id="cb169-2"><a></a><span class="fu">gsub</span>(<span class="st">"err"</span>, <span class="st">""</span>, fruit)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple"   "banana"  "chy"     "date"    "elderby"</code></pre>
</div>
</div>
</div>
<div class="col-4 fragment">
<p><strong><code>stringr:</code></strong> Remove pattern with <code>str_replace()</code> or <code>str_replace_all()</code></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb171"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a></a><span class="co"># remove first "a" from "banana"</span></span>
<span id="cb171-2"><a></a><span class="fu">str_replace</span>(<span class="st">"banana"</span>, <span class="st">"a"</span>, <span class="st">""</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "bnana"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb173"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a></a><span class="co"># remove "err" from all strings</span></span>
<span id="cb173-2"><a></a><span class="fu">str_replace_all</span>(fruit, <span class="st">"err"</span>, <span class="st">""</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple"   "banana"  "chy"     "date"    "elderby"</code></pre>
</div>
</div>
</div>
<div class="col-4 fragment">
<p><strong><code>stringr:</code></strong> Remove pattern with <span class="func">str_remove()</span> or <span class="func">str_remove_all()</span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb175"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a></a><span class="co"># remove first "a" from "banana"</span></span>
<span id="cb175-2"><a></a><span class="fu">str_remove</span>(<span class="st">"banana"</span>, <span class="st">"a"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "bnana"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb177"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a></a><span class="co"># remove "err" from all strings</span></span>
<span id="cb177-2"><a></a><span class="fu">str_remove_all</span>(fruit, <span class="st">"err"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple"   "banana"  "chy"     "date"    "elderby"</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="replace-regex-patterns" class="slide level2">
<h2>Replace: regex patterns</h2>
<p>Use regex patterns in replacement with both base and <code>stringr</code> functions to do more complex replacements. For example, you can use regex groups to reorder parts of a string:</p>
<div class="row">
<div class="col-6 fragment">
<p><strong>Base</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb179"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a></a><span class="co"># replace all words with "WORD"</span></span>
<span id="cb179-2"><a></a><span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">b</span><span class="sc">\\</span><span class="st">w+</span><span class="sc">\\</span><span class="st">b"</span>, <span class="st">"WORD"</span>, sentence)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "WORD WORD WORD WORD WORD WORD WORD WORD WORD."</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb181"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a></a><span class="co"># Relace all vowels with "*" and spaces with "_"</span></span>
<span id="cb181-2"><a></a><span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">"_"</span>, <span class="fu">gsub</span>(<span class="st">"[aeiouAEIOU]"</span>, <span class="st">"*"</span>, sentence))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Th*_Q**CK_br*wn_f*x_j*mps_*v*r_th*_L*ZY_d*g."</code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p><strong><code>stringr</code></strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb183"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a></a><span class="co"># replace all words with "WORD"</span></span>
<span id="cb183-2"><a></a><span class="fu">str_replace_all</span>(sentence, <span class="st">"</span><span class="sc">\\</span><span class="st">b</span><span class="sc">\\</span><span class="st">w+</span><span class="sc">\\</span><span class="st">b"</span>, <span class="st">"WORD"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "WORD WORD WORD WORD WORD WORD WORD WORD WORD."</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb185"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a></a><span class="co"># Relace all vowels with "*" and spaces with "_"</span></span>
<span id="cb185-2"><a></a><span class="fu">str_replace_all</span>(sentence, <span class="st">"[aeiouAEIOU]"</span>, <span class="st">"*"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb185-3"><a></a>  <span class="fu">str_replace_all</span>(<span class="st">" "</span>, <span class="st">"_"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Th*_Q**CK_br*wn_f*x_j*mps_*v*r_th*_L*ZY_d*g."</code></pre>
</div>
</div>
</div>
</div>
<aside class="notes">
<p><strong>Replacement</strong>: Compare <code>sub()</code> (first match) and <code>gsub()</code> (all matches) with <code>str_replace()</code> and <code>str_replace_all()</code>. Demonstrate literal replacement and regex-based replacement.</p>
<p>the base version can be more concise; the stringr version allows for complex but readable pipelines</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="transform-trim-whitespace" class="slide level2">
<h2>Transform: Trim whitespace</h2>
<p><strong>Clean up messy text</strong> : Return modified string with leading/trailing whitespace removed</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb187"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb187-1"><a></a>messy_string <span class="ot">&lt;-</span> <span class="st">"   Hello,   World!   "</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="row">
<div class="col-4 fragment">
<p><strong>Base:</strong> Remove leading/trailing whitespace with <span class="func">trimws()</span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb188"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb188-1"><a></a><span class="co"># remove leading &amp; trailing whitespace</span></span>
<span id="cb188-2"><a></a><span class="fu">trimws</span>(messy_string) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Hello,   World!"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb190"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb190-1"><a></a><span class="co"># remove leading whitespace only</span></span>
<span id="cb190-2"><a></a><span class="fu">trimws</span>(messy_string, <span class="at">which =</span> <span class="st">"left"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Hello,   World!   "</code></pre>
</div>
</div>
</div>
<div class="col-4 fragment">
<p><strong><code>stringr</code>:</strong> Remove leading/trailing whitespace with <span class="func">str_trim()</span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb192"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb192-1"><a></a><span class="co"># remove leading &amp; trailing whitespace</span></span>
<span id="cb192-2"><a></a><span class="fu">str_trim</span>(messy_string)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Hello,   World!"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb194"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb194-1"><a></a><span class="co"># remove trailing whitespace only</span></span>
<span id="cb194-2"><a></a><span class="fu">str_trim</span>(messy_string, <span class="at">side =</span> <span class="st">"right"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "   Hello,   World!"</code></pre>
</div>
</div>
</div>
<div class="col-4 fragment">
<p><strong><code>stringr</code>:</strong> <em>Also</em> collapse internal whitespace with <span class="func">str_squish()</span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb196"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb196-1"><a></a><span class="co"># removing both leading and trailing</span></span>
<span id="cb196-2"><a></a><span class="co"># AND ALSO collapse any internal </span></span>
<span id="cb196-3"><a></a><span class="co"># whitespace to a single space</span></span>
<span id="cb196-4"><a></a><span class="fu">str_squish</span>(messy_string)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Hello, World!"</code></pre>
</div>
</div>
</div>
</div>
<aside class="notes">
<p><strong>Trimming whitespace</strong>: Compare <code>trimws()</code> with <code>str_trim()</code> (removes leading/trailing) and <code>str_squish()</code> (also collapses internal whitespace).</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="transform-pad-strings" class="slide level2">
<h2>Transform: Pad strings</h2>
<p><strong>Pad strings to fixed width</strong> : Return modified string with padding added to reach specified width</p>
<div class="row">
<div class="col-6 fragment">
<p><strong>Base:</strong> Pad strings with <span class="func">sprintf()</span> and width specifier</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb198"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb198-1"><a></a><span class="co"># pad "42" to width of 5 with spaces</span></span>
<span id="cb198-2"><a></a><span class="fu">sprintf</span>(<span class="st">"%5s"</span>, <span class="st">"42"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "   42"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb200"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb200-1"><a></a><span class="co"># pad "42" to width of 5 with zeros</span></span>
<span id="cb200-2"><a></a><span class="fu">sprintf</span>(<span class="st">"%05s"</span>, <span class="st">"42"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "00042"</code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p><strong><code>stringr:</code></strong> Pad strings with <span class="func">str_pad()</span> and <code>width</code>, <code>side</code>, <code>pad</code> args</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb202"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb202-1"><a></a><span class="co"># pad "42" to width of 5 with spaces on the left</span></span>
<span id="cb202-2"><a></a><span class="fu">str_pad</span>(<span class="st">"42"</span>, <span class="at">width =</span> <span class="dv">5</span>, <span class="at">side =</span> <span class="st">"left"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "   42"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb204"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb204-1"><a></a><span class="co"># pad "42" to width of 5 with zeros on the right</span></span>
<span id="cb204-2"><a></a><span class="fu">str_pad</span>(<span class="st">"42"</span>, <span class="at">width =</span> <span class="dv">5</span>, <span class="at">side =</span> <span class="st">"right"</span>, <span class="at">pad =</span> <span class="st">"0"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "42000"</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="transform-convert-case" class="slide level2">
<h2>Transform: Convert case</h2>
<p><strong>Change letter case</strong> : Return modified string with case converted</p>
<div class="cell columns column-output-location">
<div class="column">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb206"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb206-1"><a></a>sentence</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div><div class="column">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The QUICK brown fox jumps over the LAZY dog."</code></pre>
</div>
</div></div>
<div class="row">
<div class="col-4 fragment">
<p><strong>Base:</strong> Convert to all upper/lower case with <span class="func">toupper()</span> &amp; <span class="func">tolower()</span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb208"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb208-1"><a></a><span class="fu">toupper</span>(sentence)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG."</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb210"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb210-1"><a></a><span class="fu">tolower</span>(sentence)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "the quick brown fox jumps over the lazy dog."</code></pre>
</div>
</div>
</div>
<div class="col-4 fragment">
<p><strong><code>stringr:</code></strong> Convert to all upper/lower case with <span class="func">str_to_upper()</span> &amp; <span class="func">str_to_lower()</span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb212"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb212-1"><a></a><span class="fu">str_to_upper</span>(sentence)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG."</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb214"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb214-1"><a></a><span class="fu">str_to_lower</span>(sentence)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "the quick brown fox jumps over the lazy dog."</code></pre>
</div>
</div>
</div>
<div class="col-4 fragment">
<p><strong><code>stringr:</code></strong> Convert to title/sentence case with <span class="func">str_to_title()</span> &amp; <span class="func">str_to_sentence()</span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb216"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb216-1"><a></a><span class="co"># Captialize Each Word</span></span>
<span id="cb216-2"><a></a><span class="fu">str_to_title</span>(sentence)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The Quick Brown Fox Jumps Over The Lazy Dog."</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb218"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb218-1"><a></a><span class="co"># Capitalize first word.</span></span>
<span id="cb218-2"><a></a><span class="fu">str_to_sentence</span>(sentence)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The quick brown fox jumps over the lazy dog."</code></pre>
</div>
</div>
</div>
</div>
<aside class="notes">
<p><strong>Case conversion</strong>: Compare base R functions (<code>toupper()</code>, <code>tolower()</code>) with <code>stringr</code> equivalents (<code>str_to_upper()</code>, <code>str_to_lower()</code>, <code>str_to_title()</code>, <code>str_to_sentence()</code>). str functions have local-aware case conversion like Turkish dotted/dotless i: <code>str_to_upper("i", locale = "tr")</code> returns “İ” (dotted capital I) and <code>str_to_lower("I", "tr")</code> returns “ı” (dotless lowercase i) in Turkish locale, while base R’s <code>toupper("i")</code> and <code>tolower("I")</code> return “I” and “i” respectively regardless of locale.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="regular-expressions" class="title-slide slide level1 center">
<h1>Regular Expressions</h1>

</section>
<section id="regex-overview" class="slide level2">
<h2>Regex overview</h2>
<div class="row">
<div class="col-7">
<div class="fragment">
<p><strong>Literal characters</strong>: Match exactly as written</p>
</div>
<div class="fragment">
<p><strong>Metacharacters</strong> have special meaning, like defining what kinds of characters to recognize, how many times to match, or where in the string to look. Common metacharacters:</p>
</div>
<div class="fragment" style="font-size: 0.8em;">
<table class="caption-top">
<thead>
<tr class="header">
<th>Metacharacter</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>.</code></td>
<td>Any single character except newline</td>
</tr>
<tr class="even">
<td><code>*</code></td>
<td>0 or more of the preceding element</td>
</tr>
<tr class="odd">
<td><code>+</code></td>
<td>1 or more of the preceding element</td>
</tr>
<tr class="even">
<td><code>?</code></td>
<td>0 or 1 of the preceding element</td>
</tr>
<tr class="odd">
<td><code>[]</code></td>
<td>Character class (matches any one character inside)</td>
</tr>
<tr class="even">
<td><code>{}</code></td>
<td>Quantifier (specifies number of occurrences)</td>
</tr>
<tr class="odd">
<td><code>^</code></td>
<td>Start of string</td>
</tr>
<tr class="even">
<td><code>$</code></td>
<td>End of string</td>
</tr>
<tr class="odd">
<td><code>\</code></td>
<td>Escape character (treat next character literally)</td>
</tr>
<tr class="even">
<td><code>|</code></td>
<td>Alternation (matches the pattern before or after)</td>
</tr>
</tbody>
</table>
</div>
<div class="fragment">
<p><strong>Escaping</strong> allows you to match metacharacters as literal characters by preceding them with the escape metacharacter. - Match literal period: <code>\.</code> → <code>"\\."</code> in R - Match literal asterisk: <code>\*</code> → <code>"\\*"</code> in R</p>
</div>
</div>
<div class="col-5" style="margin-top: -3em">
<div class="fragment">
<p>Match with metacharacter:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb220"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb220-1"><a></a><span class="fu">str_detect</span>(<span class="st">"filetxt"</span>, <span class="st">"."</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb222"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb222-1"><a></a><span class="fu">str_detect</span>(<span class="st">""</span>, <span class="st">"."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>Literal match with escaped metacharacter:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb224"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb224-1"><a></a><span class="fu">str_detect</span>(<span class="st">"file.txt"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb226"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb226-1"><a></a><span class="fu">str_detect</span>(<span class="st">"filetxt"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="character-classes" class="slide level2">
<h2>Character classes</h2>
<div class="row">
<div class="col-6 fragment">
<p><strong>Character classes</strong> match any one character from a set. Common character classes:</p>
<table class="caption-top">
<thead>
<tr class="header">
<th>Class</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>[abc]</code></td>
<td>a, b, or c</td>
</tr>
<tr class="even">
<td><code>[^abc]</code></td>
<td>NOT a, b, or c</td>
</tr>
<tr class="odd">
<td><code>[a-z]</code></td>
<td>any lowercase letter</td>
</tr>
<tr class="even">
<td><code>\d</code></td>
<td>digit</td>
</tr>
<tr class="odd">
<td><code>\w</code></td>
<td>word character (letter, digit, or underscore)</td>
</tr>
<tr class="even">
<td><code>\s</code></td>
<td>whitespace character (space, tab, newline)</td>
</tr>
</tbody>
</table>
</div>
<div class="col-6 fragment" style="margin-top: -3em;">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb228"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb228-1"><a></a><span class="fu">str_detect</span>(<span class="st">"apple"</span>, <span class="st">"[aeiou]"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb230"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb230-1"><a></a><span class="fu">str_detect</span>(<span class="st">"apple"</span>, <span class="st">"[^aeiou]"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb232"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb232-1"><a></a><span class="fu">str_detect</span>(<span class="st">"apple"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">d"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb234"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb234-1"><a></a><span class="fu">str_detect</span>(<span class="st">"apple"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">w"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb236"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb236-1"><a></a><span class="fu">str_detect</span>(<span class="st">"apple"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">s"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="quantifiers" class="slide level2">
<h2>Quantifiers</h2>
<div class="row">
<div class="col-6 fragment">
<p><strong>Quantifiers</strong> specify how many times the preceding element should be matched:</p>
<table class="caption-top">
<thead>
<tr class="header">
<th>Quantifier</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>*</code></td>
<td>0 or more of the preceding element</td>
</tr>
<tr class="even">
<td><code>+</code></td>
<td>1 or more of the preceding element</td>
</tr>
<tr class="odd">
<td><code>?</code></td>
<td>0 or 1 of the preceding element</td>
</tr>
<tr class="even">
<td><code>{n}</code></td>
<td>exactly n of the preceding element</td>
</tr>
<tr class="odd">
<td><code>{n,}</code></td>
<td>n or more of the preceding element</td>
</tr>
<tr class="even">
<td><code>{n,m}</code></td>
<td>between n and m of the preceding element</td>
</tr>
</tbody>
</table>
</div>
<div class="col-6 smaller fragment" style="margin-top: -3em;">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb238"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb238-1"><a></a><span class="fu">str_detect</span>(<span class="st">"aaab"</span>, <span class="st">"a*"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb240"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb240-1"><a></a><span class="fu">str_detect</span>(<span class="st">"aaab"</span>, <span class="st">"a+"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb242"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb242-1"><a></a><span class="fu">str_detect</span>(<span class="st">"aaab"</span>, <span class="st">"a?"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb244"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb244-1"><a></a><span class="fu">str_detect</span>(<span class="st">"aaab"</span>, <span class="st">"a{3}"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb246"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb246-1"><a></a><span class="fu">str_detect</span>(<span class="st">"aaab"</span>, <span class="st">"a{2,}"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb248"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb248-1"><a></a><span class="fu">str_detect</span>(<span class="st">"aaab"</span>, <span class="st">"a{2,3}"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="example-quantifiers-in-stringr-functions" class="slide level2">
<h2>Example: Quantifiers in stringr functions</h2>
<p>Use quantifiers in <code>stringr</code> functions to specify how many occurrences to replace, locate, count, etc.:</p>
<div class="fragment">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb250"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb250-1"><a></a><span class="co"># replace 2 or 3 a's with "X"</span></span>
<span id="cb250-2"><a></a><span class="fu">str_replace_all</span>(<span class="st">"aaab"</span>, <span class="st">"a{2,3}"</span>, <span class="st">"X"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Xb"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb252"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb252-1"><a></a><span class="co"># locates positions of 2 or 3 a's </span></span>
<span id="cb252-2"><a></a><span class="fu">str_locate_all</span>(<span class="st">"aaab"</span>, <span class="st">"a{2,3}"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
     start end
[1,]     1   3</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb254"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb254-1"><a></a><span class="co"># counts occurrences of 2 or 3 a's</span></span>
<span id="cb254-2"><a></a><span class="fu">str_count</span>(<span class="st">"aaab"</span>, <span class="st">"a{2,3}"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
</div>
</section>
<section id="greedy-vs-lazy-matching" class="slide level2">
<h2>Greedy vs lazy matching</h2>
<div class="row">
<div class="col-6 fragment">
<ul>
<li class="fragment"><span class="keyword">Greedy</span>: match as much as possible with <code>.*</code>
<ul>
<li class="fragment">Stop at the end of the string or the last possible match</li>
</ul></li>
<li class="fragment"><span class="keyword">Lazy</span>: match as little as possible with <code>.*?</code>
<ul>
<li class="fragment">Stop at the first possible match</li>
</ul></li>
</ul>
</div>
<div class="col-6">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb256"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb256-1"><a></a>double_dog <span class="ot">&lt;-</span> <span class="st">"The quick brown fox jumps over the lazy dog. The dog was displeased."</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb257"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb257-1"><a></a><span class="co"># Greedy match (matches everything between first "The" and last "dog")</span></span>
<span id="cb257-2"><a></a><span class="fu">str_extract</span>(double_dog, <span class="st">"The.*dog"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The quick brown fox jumps over the lazy dog. The dog"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb259"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb259-1"><a></a><span class="co"># Lazy match (matches the shortest string between first "The" and first "dog")</span></span>
<span id="cb259-2"><a></a><span class="fu">str_extract</span>(double_dog, <span class="st">"The.*?dog"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The quick brown fox jumps over the lazy dog"</code></pre>
</div>
</div>
</div>
<aside class="notes">
<p>For inquiring minds: the reason this did not work in the lecture is that the definition included a line break, and by default the dot <code>.</code> does not match newlines. So it did not find a matching pattern between the first the and first dog, but did find it in the first two words of the second sentence. There was only one true match, so both greedy and lazy returned it: <code>"The dog"</code></p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="anchors-boundaries" class="slide level2">
<h2>Anchors &amp; boundaries</h2>
<div class="row">
<div class="col-6 fragment">
<p><strong>Anchors</strong> specify where in the string to look for a match:</p>
<table class="caption-top">
<colgroup>
<col style="width: 23%">
<col style="width: 76%">
</colgroup>
<thead>
<tr class="header">
<th>Anchor</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>^</code></td>
<td>Start of string[^Note that the carat <code>^</code> has two uses: as an anchor for the start of the string, and as a negation symbol when used inside square brackets for character classes.]</td>
</tr>
<tr class="even">
<td><code>$</code></td>
<td>End of string</td>
</tr>
<tr class="odd">
<td><code>\b</code></td>
<td>Word boundary (position between a word character and a non-word character</td>
</tr>
<tr class="even">
<td><code>\B</code></td>
<td>Non-word boundary (position between two word characters or two non-word characters)</td>
</tr>
</tbody>
</table>
</div>
<div class="col-6 fragment smaller" style="margin-top: -3em;">
<p>Match partial string with <code>^</code> <em>or</em> <code>$</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb261"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb261-1"><a></a><span class="fu">str_detect</span>(<span class="st">"banana"</span>, <span class="st">"^ba"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb263"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb263-1"><a></a><span class="fu">str_detect</span>(<span class="st">"banana"</span>, <span class="st">"na$"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>Match entire string with <code>^</code> <em>and</em> <code>$</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb265"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb265-1"><a></a><span class="fu">str_detect</span>(<span class="st">"banana"</span>, <span class="st">"^banana$"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb267"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb267-1"><a></a><span class="fu">str_detect</span>(<span class="st">"banana"</span>, <span class="st">"^ban$"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</div>
</div>
<aside class="notes">
<p>Note that the carat <code>^</code> has two uses: as an anchor for the start of the string, and as a negation symbol when used inside square brackets for character classes (e.g., <code>[^abc]</code> means “not a, b, or c”). The meaning depends on the context in which it is used.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="example-whole-word-matching" class="slide level2">
<h2>Example: Whole-Word Matching</h2>
<p>Use word boundaries for whole word matching:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb269"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb269-1"><a></a>sea_cat <span class="ot">&lt;-</span> <span class="st">"The cat is on the catamaran. She's a weird cat."</span></span>
<span id="cb269-2"><a></a></span>
<span id="cb269-3"><a></a><span class="fu">str_count</span>(sea_cat, <span class="st">" cat "</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb271"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb271-1"><a></a><span class="fu">str_count</span>(sea_cat, <span class="st">"</span><span class="sc">\\</span><span class="st">bcat</span><span class="sc">\\</span><span class="st">b"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb273"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb273-1"><a></a><span class="fu">str_count</span>(sea_cat, <span class="st">"cat"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
</section>
<section id="example-pattern-validation" class="slide level2">
<h2>Example: Pattern Validation</h2>
<p>Validation pattern example (e.g., email, phone)</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb275"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb275-1"><a></a><span class="co"># Simple email validation pattern: one or more word characters, @, one or more word characters, ., two or more letters</span></span>
<span id="cb275-2"><a></a>email_pattern <span class="ot">&lt;-</span> <span class="st">"^</span><span class="sc">\\</span><span class="st">w+@</span><span class="sc">\\</span><span class="st">w+</span><span class="sc">\\</span><span class="st">.</span><span class="sc">\\</span><span class="st">w{2,}$"</span></span>
<span id="cb275-3"><a></a></span>
<span id="cb275-4"><a></a><span class="fu">str_detect</span>(<span class="st">"name@school.edu"</span>, email_pattern) <span class="co"># returns TRUE for valid email format</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb277"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb277-1"><a></a><span class="fu">str_detect</span>(<span class="st">"invalid email@spammer,com"</span>, email_pattern) <span class="co"># returns FALSE for invalid email format</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</section>
<section id="capture-groups-back-references" class="slide level2">
<h2>Capture groups &amp; back-references</h2>
<div class="fragment">
<p><strong>Capture</strong> groups to extract specific parts of a matched pattern and <strong>back-reference</strong> them in replacement or later in the regex.</p>
<ul>
<li class="fragment"><code>()</code>: Create capture group</li>
<li class="fragment"><code>\1</code>, <code>\2</code>, etc.: Reference captured groups in replacement</li>
</ul>
</div>
<div class="fragment">
<p>Use <code>back-references</code> to reorder captured groups:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb279"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb279-1"><a></a><span class="co"># Capture the two animals (fox, dog) and swap their placement in the string</span></span>
<span id="cb279-2"><a></a><span class="fu">str_replace</span>(sentence, <span class="st">"(fox)(.*)(dog)"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">3</span><span class="sc">\\</span><span class="st">2</span><span class="sc">\\</span><span class="st">1"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The QUICK brown dog jumps over the LAZY fox."</code></pre>
</div>
</div>
</div>
</section>
<section id="example-reorder-us-date-format" class="slide level2">
<h2>Example: Reorder US date format</h2>
<p>Reorder US dates <code>MM/DD/YYYY</code> to <code>YYYY-MM-DD</code> using capture groups and back-references:</p>
<div class="fragment">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb281"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb281-1"><a></a>new_year <span class="ot">&lt;-</span> <span class="st">"The date is 12/31/2025. Happy New Year!"</span></span>
<span id="cb281-2"><a></a>birthday <span class="ot">&lt;-</span> <span class="st">"The date is 6/7/25. Happy birthday!"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb282"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb282-1"><a></a><span class="co"># Capture month, day, year and reorder to YYYY-MM-DD</span></span>
<span id="cb282-2"><a></a><span class="fu">str_replace</span>(new_year, <span class="st">"(</span><span class="sc">\\</span><span class="st">d{2})/(</span><span class="sc">\\</span><span class="st">d{2})/(</span><span class="sc">\\</span><span class="st">d{4})"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">3-</span><span class="sc">\\</span><span class="st">1-</span><span class="sc">\\</span><span class="st">2"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The date is 2025-12-31. Happy New Year!"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb284"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb284-1"><a></a><span class="co"># account for the possibility of 1-digit month/day and 2-digit year</span></span>
<span id="cb284-2"><a></a><span class="fu">str_replace</span>(birthday, <span class="st">"(</span><span class="sc">\\</span><span class="st">d{1,2})/(</span><span class="sc">\\</span><span class="st">d{1,2})/(</span><span class="sc">\\</span><span class="st">d{2,4})"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">3-</span><span class="sc">\\</span><span class="st">1-</span><span class="sc">\\</span><span class="st">2"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The date is 25-6-7. Happy birthday!"</code></pre>
</div>
</div>
</div>
</section>
<section id="regex-challenge" class="slide level2">
<h2>Regex Challenge</h2>
<p>Create a function for the date reordering that can handle both 1 or 2 digit month/day and 2 or 4 digit year formats as input but always deliver a consistent <code>YYYY-MM-DD</code> output format. Use capture groups to extract the components and back-references to reorder them in the desired format. Test your function on various date strings to ensure it works correctly.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb286"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb286-1"><a></a><span class="co">#| label: regex-challenge</span></span>
<span id="cb286-2"><a></a></span>
<span id="cb286-3"><a></a><span class="co"># Create function `reorder_date()`</span></span>
<span id="cb286-4"><a></a>reorder_date <span class="ot">&lt;-</span> <span class="cf">function</span>(date_string) {</span>
<span id="cb286-5"><a></a>    </span>
<span id="cb286-6"><a></a>  <span class="co"># Define regex pattern to capture month, day, and year with flexible digit counts</span></span>
<span id="cb286-7"><a></a></span>
<span id="cb286-8"><a></a>  <span class="co"># Use str_replace to reorder the date components to YYYY-MM-DD</span></span>
<span id="cb286-9"><a></a></span>
<span id="cb286-10"><a></a>}</span>
<span id="cb286-11"><a></a></span>
<span id="cb286-12"><a></a><span class="co"># Test with multiple string types</span></span>
<span id="cb286-13"><a></a><span class="fu">reorder_date</span>(<span class="st">"4/5/2023"</span>) <span class="co"># Expected: "2023-04-05"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Even challengier:</em> Handle multiple date formats by adding arguments for the user to specify the input and/or format.</p>


</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">
<p>D2M-R I | Week 6 &amp; 7</p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-code-focus/codefocus.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-fullscreen/fullscreen.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'fade',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1600,

        height: 900,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, RevealCodeFocus, RevealFullscreen, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
          const outerScaffold = trigger.parentElement.cloneNode(true);
          const codeEl = outerScaffold.querySelector('code');
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>