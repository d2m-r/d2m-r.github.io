<!DOCTYPE html>
<html lang="en"><head>
<link href="../images/icons/hex3.png" rel="icon" type="image/png">
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-eedebf623301b1c3b9a877dd695003c7.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-contrib/bootstrap-icons-1.13.1/bootstrap-icons.css" rel="stylesheet"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.8.25">

  <meta name="dcterms.date" content="2026-01-27">
  <title>Data to Manuscript in R – Data Wrangling in the Tidyverse</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        background-color: #f5f5f5;
        color: #7e7e7e;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #7e7e7e;  padding-left: 4px; }
    div.sourceCode
      { color: #000000; background-color: #fcfcfc; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #000000; } /* Normal */
    code span.al { color: #e78ac3; background-color: #fcfcfc; font-weight: bold; } /* Alert */
    code span.an { color: #1f78b4; background-color: #f4fafd; font-style: italic; } /* Annotation */
    code span.at { color: #15712a; } /* Attribute */
    code span.bn { color: #a6761d; } /* BaseN */
    code span.bu { color: #0c7149; } /* BuiltIn */
    code span.cf { color: #6f1ba0; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #6a3d9a; } /* Char */
    code span.cn { color: #a6761d; } /* Constant */
    code span.co { color: #1f78b4; background-color: #f4fafd; font-style: italic; } /* Comment */
    code span.cv { color: #1f78b4; background-color: #f4fafd; font-style: italic; } /* CommentVar */
    code span.do { color: #1f78b4; background-color: #f4fafd; font-style: italic; } /* Documentation */
    code span.dt { color: #000000; } /* DataType */
    code span.dv { color: #0d481b; font-weight: bold; } /* DecVal */
    code span.er { color: #842222; text-decoration: underline; } /* Error */
    code span.ex { color: #0c7149; font-weight: bold; } /* Extension */
    code span.fl { color: #0d481b; font-weight: bold; } /* Float */
    code span.fu { color: #0c7149; } /* Function */
    code span.im { color: #15712a; font-style: italic; } /* Import */
    code span.in { color: #6f1ba0; font-weight: bold; } /* Information */
    code span.kw { color: #6f1ba0; font-weight: bold; } /* Keyword */
    code span.op { color: #b5089d; } /* Operator */
    code span.ot { color: #15712a; font-style: italic; } /* Other */
    code span.pp { color: #15712a; font-style: italic; } /* Preprocessor */
    code span.re { color: #b9d9f9; background-color: #888888; } /* RegionMarker */
    code span.sc { color: #6a3d9a; } /* SpecialChar */
    code span.ss { color: #6a3d9a; } /* SpecialString */
    code span.st { color: #6a3d9a; } /* String */
    code span.va { color: #000000; } /* Variable */
    code span.vs { color: #6a3d9a; } /* VerbatimString */
    code span.wa { color: #842222; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto-559cb14f7338b279a6c167941f805063.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-code-focus/codefocus.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script type="text/javascript" src="../theme/bubbles.js"></script>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Data Wrangling in the Tidyverse</h1>
  <p class="subtitle">ecosystem, read-in/-out, data manipulation</p>

<div class="quarto-title-authors">
</div>

  <p class="date">2026-01-27</p>
</section>
<section class="slide level2">

<!-- ## Lecture Planning -->
<!-- 7. Welcome to the Tidyverse! -->
<!--     1. Introduction to the Tidyverse & tidy data -->
<!--         1. Overview of the tidy ecosystem -->
<!--         2. Tidy data principles -->
<!--         3. Core packages in the Tidyverse and general functions -->
<!--         4. Terminology -->
<!--     2. Importing and exporting with readr -->
<!--         1. Overview  -->
<!--             1. Tabular data - what counts? -->
<!--                 1. File types -->
<!--                 2. R objects, including tibbles -->
<!--             2. Reading, writing, rereading (intermediate datasets) -->
<!--         2. Reading data with read_* functions -->
<!--         3. Writing data with write_* functions -->
<!--         4. Other packages -->
<!--             1. readxl for Excel files -->
<!--             2. haven for SPSS, SAS, and Stata files -->
<!--             3. googlesheets4 for Google Sheets -->
<!--             4. jsonlite for JSON files -->
<!--             5. DBI and dbplyr for databases -->
<!--         5. Handling common import/export issues -->
<!--     3. Data manipulation with dplyr -->
<!--         1. Introduction to dplyr -->
<!--             1. the points of pipelines (highly readable, but verbose) -->
<!--             2. The pipe operator (%>%) and magrittr -->
<!--             3. Chaining operations with pipes -->
<!--         2. Selecting data -->
<!--             1. select, rename -->
<!--             2. filter -->
<!--             3. arrange -->
<!--         3. Manipulating data -->
<!--             1. mutate -->
<!--             2. summarize -->
<!--             3. group_by -->
<!--             4. distinct -->
<!--             5. count -->
<!--         6. dplyr practice -->
<!--     4. Data tidying with tidyr -->
<!--         1. What counts as "tidying" data?  -->
<!--             1. Remember what "tidy" means in the tidyverse -->
<!--             2. Tidying is reshaping and systematically cleaning data  -->
<!--         2. Reshape data -->
<!--             1. pivot_longer -->
<!--             2. pivot_wider -->
<!--             3. cast, melt, gather, spread, etc. -->
<!--         3. Combine and split cells -->
<!--             1. unite -->
<!--             2. separate functions -->
<!--         4. Expand tables -->
<!--             1. expand -->
<!--             2. complete -->
<!--         5. Handle missing values -->
<!--             1. drop_na -->
<!--             2. fill -->
<!--             3. replace_na -->
<!--         6. Advanced: Nested data -->
<!--             1. What is nested data and why might you use it? -->
<!--             2. We're not going to cover this in D2MR, but tidyr has functions for creating,  -->
<!--             reshaping, and transforming nested data -->
</section>
<section>
<section id="tidy-data" class="title-slide slide level1 center">
<h1>Tidy Data</h1>

</section>
<section id="what-makes-data-tidy" class="slide level2">
<h2>What Makes Data “Tidy”?</h2>
<div class="r-stack">
<p><img data-src="../images/tidyverse/tidy-data-def-frag1.jpg" class="fragment" height="700"></p>
<p><img data-src="../images/tidyverse/tidy-data-def-frag2.jpg" class="fragment" height="700"></p>
<p><img data-src="../images/tidyverse/tidy-data-def-frag3.jpg" class="fragment" height="700"></p>
<p><img data-src="../images/tidyverse/tidy-data-def-frag4.jpg" class="fragment" height="700"></p>
<p><img data-src="../images/tidyverse/tidy-data-def-frag5-FULL.jpg" class="fragment" height="700"></p>
</div>

<aside><div>
Illustrations from the <a href="https://www.openscapes.org/">Openscapes</a> blog <a href="https://www.openscapes.org/blog/2020/10/12/tidy-data/">Tidy Data for reproducibility, efficiency, and collaboration</a> by Julia Lowndes and Allison Horst
</div></aside></section>
<section class="slide level2">

<p><img data-src="../images/tidyverse/tolstoy.png" class="absolute" style="top: 0px; right: 0px; height: 200px; "></p>
<p><img data-src="../images/tidyverse/tidy-data-quote-frag1.jpg" class="fragment" height="300"></p>
<p><img data-src="../images/tidyverse/tidy-data-quote-frag2.jpg" class="fragment" height="300"></p>
</section>
<section class="slide level2">

<div class="columns">
<div class="column">
<p><img data-src="../images/tidyverse/tidy-data-workshop-frag1.jpg" class="fragment" height="800"></p>
</div><div class="column">
<p><img data-src="../images/tidyverse/tidy-data-workshop-frag2.jpg" class="fragment" height="800"></p>
</div></div>
</section>
<section id="messy-vs.-tidy-example" class="slide level2" data-background-image="../images/mms.jpg" data-background-opacity="0.1">
<h2>Messy vs.&nbsp;Tidy: Example</h2>
<div class="container-fluid" style="margin-top: -150px;">
<div class="row" style="margin-bottom: 50px;">
<div class="col-6">

</div>
<div class="col-6">
<div style="font-size: 1.2em;">
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>These tables hold exactly the same data!</strong></p>
</div>
<div class="callout-content">
<p>What are the differences? What are the advantages of each?</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="row">
<div class="col-7">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a>mm.raw</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 30 × 8
     Bag   Red Green  Blue Orange Yellow Brown Weight
   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
 1     1    15     9     3      3      9    19   49.8
 2     2     9    17    19      3      3     8   49.0
 3     3    14     8     6      8     19     4   50.4
 4     4    15     7     3      8     16     8   49.2
 5     5    10     3     7      9     22     4   47.6
 6     6    12     7     6      5     17    11   49.8
 7     7     6     7     3      6     26    10   50.2
 8     8    14    11     4      1     14    17   51.7
 9     9     4     2    10      6     18    18   48.4
10    10     9     9     3      9      8    15   46.2
# ℹ 20 more rows</code></pre>
</div>
</div>
</div>
<div class="col-5">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a>mm.tidy</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 180 × 4
     Bag Color  Number Bag_Weight
   &lt;int&gt; &lt;chr&gt;   &lt;dbl&gt;      &lt;dbl&gt;
 1     1 Red        15       49.8
 2     1 Green       9       49.8
 3     1 Blue        3       49.8
 4     1 Orange      3       49.8
 5     1 Yellow      9       49.8
 6     1 Brown      19       49.8
 7     2 Red         9       49.0
 8     2 Green      17       49.0
 9     2 Blue       19       49.0
10     2 Orange      3       49.0
# ℹ 170 more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="bubble-chain">
<p class="bubble-left fragment">
That messy data looks pretty clean to me…
</p>
<p class="bubble-right fragment">
It <em>is</em> clean! It’s just not <strong>tidy</strong>.
</p>
</div>
</section></section>
<section>
<section id="terminology-detour" class="title-slide slide level1 center">
<h1>Terminology Detour</h1>

</section>
<section id="messy-clean-tidy" class="slide level2">
<h2>Messy, Clean, Tidy</h2>
<div class="container-fluid">
<div class="row">
<div class="col-6">
<div class="card fragment h-100">
<div class="card-header">
<div class="card-title" style="color: #fff">
<p>Messy data:</p>
</div>
</div>
<div class="card-body lessgap">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a></a>mm.raw</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 30 × 8
     Bag   Red Green  Blue Orange Yellow Brown Weight
   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
 1     1    15     9     3      3      9    19   49.8
 2     2     9    17    19      3      3     8   49.0
 3     3    14     8     6      8     19     4   50.4
 4     4    15     7     3      8     16     8   49.2
 5     5    10     3     7      9     22     4   47.6
 6     6    12     7     6      5     17    11   49.8
 7     7     6     7     3      6     26    10   50.2
 8     8    14    11     4      1     14    17   51.7
 9     9     4     2    10      6     18    18   48.4
10    10     9     9     3      9      8    15   46.2
# ℹ 20 more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="col-6">
<div class="card fragment card-alt1 h-100">
<div class="card-header">
<div class="card-title" style="color: #fff">
<p>Also messy data:</p>
</div>
</div>
<div class="card-body lessgap">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a>mm.messy</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 39 × 8
   ID    RED   X     GREEN WT.OZ    Blue  Orannge Ylw. 
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;
 1 "1 "  "15"  "19 " "9 "  "49.79 " "3 "  "3 "    "9 " 
 2 "1 "  "15"  "19 " "9 "  "49.79 " "3 "  "3 "    "9 " 
 3 "2 "  "9"   "8 "  "17 " "48.98 " "19 " &lt;NA&gt;    "3 " 
 4 "3 "   &lt;NA&gt; "4 "  "8 "  "50.4 "  "6 "  "8 "    "19 "
 5 "4 "  "15 " "8 "  "7 "  "49.16 "  &lt;NA&gt; "8 "    "16 "
 6 "5"   "10 " "4 "  "3 "  "47.61 " "7 "  &lt;NA&gt;     &lt;NA&gt;
 7 "6 "  "12 " "11 " "7 "  "49.8"   "6 "  "5 "    "17 "
 8 "7 "  "6 "  "10 " "7 "  "50.23 " "3 "  "6 "    "26 "
 9 "8 "  "14 " "17 " "11 " "51.68 " "4 "  &lt;NA&gt;    "14 "
10 "8 "   &lt;NA&gt; "17 " "11 " "51.68 " "4 "  "1 "    "14 "
# ℹ 29 more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<aside class="notes">
<p><strong>messy ≠ bad</strong> (except in the tidyverse context)</p>
<ul>
<li>Data wrangling starts with reading your data, then prepping it for visualization &amp; analysis</li>
<li>To use tidyverse packages, this prepping includes tidying messy data</li>
<li>This can be shockingly complicated and time-consuming!</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="messy-is-messy" class="slide level2">
<h2>“Messy” is messy</h2>
<p><strong>Messy</strong> can either mean “not clean” or “not tidy”</p>
<ul>
<li class="fragment"><strong>Always bad:</strong> unclean + untidy (= messy)</li>
<li class="fragment"><strong>Sometimes good:</strong> clean + untidy (= messy)</li>
<li class="fragment"><strong>Usually good:</strong> clean + tidy (= tidy)</li>
</ul>
<div class="bubble-chain">
<p class="bubble-left fragment">
It would make more sense to call it “untidy.”
</p>
<p class="bubble-right fragment">
You are not wrong.
</p>
</div>
</section>
<section id="tidy-data-iris" class="slide level2 scrollable">
<h2>Tidy Data: Iris</h2>
<div class="container-fluid">
<div class="row">
<div class="col-4">
<p>The <code>iris</code> dataset is a classic example of tidy data.</p>
<p>Which of these two versions of <code>iris</code> is tidy?</p>
</div>
<div class="col-8" style="margin-top: -4.5em; padding-bottom: 1em;">
<div class="overlap-box smaller">
<div class="box-title">
<p>In tidy data:</p>
</div>
<div class="box-content">
<ol>
<li>
Each variable is one column.
</li>
<li>
Each observation is one row.
</li>
<li>
Each measurement is one cell.
</li>
<li class="fragment">
<strong>Each unit depends on the research question.</strong>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="row">
<div class="col-7">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a></a>iris_1</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1           5.1         3.5          1.4         0.2  setosa
2           4.9         3.0          1.4         0.2  setosa
3           4.7         3.2          1.3         0.2  setosa
4           4.6         3.1          1.5         0.2  setosa
5           5.0         3.6          1.4         0.2  setosa
6           5.4         3.9          1.7         0.4  setosa
7           4.6         3.4          1.4         0.3  setosa
8           5.0         3.4          1.5         0.2  setosa
9           4.4         2.9          1.4         0.2  setosa
10          4.9         3.1          1.5         0.1  setosa</code></pre>
</div>
</div>
</div>
<div class="col-5">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a></a>iris_2</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 4
   Species Flower_Part Measurement_Type value
   &lt;fct&gt;   &lt;chr&gt;       &lt;chr&gt;            &lt;dbl&gt;
 1 setosa  Sepal       Length             5.1
 2 setosa  Sepal       Width              3.5
 3 setosa  Petal       Length             1.4
 4 setosa  Petal       Width              0.2
 5 setosa  Sepal       Length             4.9
 6 setosa  Sepal       Width              3  
 7 setosa  Petal       Length             1.4
 8 setosa  Petal       Width              0.2
 9 setosa  Sepal       Length             4.7
10 setosa  Sepal       Width              3.2</code></pre>
</div>
</div>
</div>
</div>
</div>
<aside class="notes">
<p>Consider <code>iris</code>—each row is one flower with four morphological measurements (sepal length, sepal width, petal length, petal width). This is tidy for the question: <strong>“What morphological features distinguish these species?”</strong></p>
<p>Could you pivot <code>iris</code> longer with columns for <code>flower_part</code> (sepal/petal) and <code>measurement_type</code> (length/width)? Yes. Would it be tidy? Also yes—but for a different question: <strong>“What determines the size of flower parts in general?”</strong></p>
<p><strong>The key distinction:</strong> Are your columns measuring different variables or different levels of the same variable?</p>
<ul>
<li><strong>Different variables</strong> → Keep separate columns</li>
<li><strong>Different levels</strong> → Pivot longer</li>
</ul>
<p>Tidiness isn’t absolute. It’s defined by your analytical question. The same dataset can be tidy in multiple forms depending on what you’re studying.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="data-preparation-terms" class="slide level2">
<h2>Data Preparation Terms</h2>
<div style="font-size: .9em">
<table class="caption-top">
<colgroup>
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 35%">
</colgroup>
<thead>
<tr class="header">
<th>Process</th>
<th>Start State</th>
<th>Goal</th>
<th>End State</th>
<th>Examples</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Data Cleaning:</strong> <br> Error correction</td>
<td>Raw data</td>
<td>Accuracy, consistency, legibility</td>
<td>Clean data, not yet specialized</td>
<td>Removing duplicate data<br>Correcting syntax errors<br>Fixing typos<br>Handling missing values<br>Change data types</td>
</tr>
<tr class="even">
<td><strong>Data Wrangling:</strong> <br> Data preparation</td>
<td>Clean data</td>
<td>Usability for medium-scope purpose</td>
<td>Interpretable and specialized data, not yet analyzable</td>
<td>Preparing for narrow use cases<br>Grouping and summarizing<br>Transforming variables or values</td>
</tr>
<tr class="odd">
<td><strong>Data Transformation:</strong> <br> Data restructuring</td>
<td>Interpretable data</td>
<td>Usability for narrow-scope tasks</td>
<td>Analyzable and visualizable data</td>
<td>Reshaping long ↔︎ wide<br>Generating new data-based variables<br>Merging datasets<br>Eliminating unnecessary data</td>
</tr>
</tbody>
</table>
</div>
<div class="bubble-chain">
<p class="bubble-left fragment">
You use them differently in the core project instructions!
</p>
<p class="bubble-left fragment">
Those are the same thing!
</p>
<p class="bubble-left fragment">
That’s not what I learned!
</p>
<p class="bubble-right fragment">
<strong>OK FINE. Yes. You’re all correct.</strong> You’re also all incorrect. Honestly it doesn’t really matter. Just mess with your data until they are usable. Call it what you want as long as it works.
</p>
</div>
</section></section>
<section id="tidyverse-packages" class="title-slide slide level1 center">
<h1>Tidyverse Packages</h1>
<div class="r-stretch" style="display: grid; grid-template-columns: repeat(4, 1fr); grid-template-rows: minmax(0, 1fr) minmax(0, 1fr); gap: 0.8em;">
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><img data-src="../images/icons/tv-icons/tibble.png" style="max-height: 2em;"></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="pkg">tibble</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>Reimagine the dataframe</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><img data-src="../images/icons/tv-icons/readr.png" style="max-height: 2em;"></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="pkg">readr</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>import and export tabular data</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><img data-src="../images/icons/tv-icons/dplyr.png" style="max-height: 2em;"></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="pkg">dplyr</span></p>
</div>
</div>
<div class="box-content" style="text-align: center; overflow: hidden; min-height: 0; font-size: 0.9em; line-height: .9;">
<p>a grammar of data manipulation</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><img data-src="../images/icons/tv-icons/tidyr.png" style="max-height: 2em;"></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="pkg">tidyr</span></p>
</div>
</div>
<div class="box-content" style="text-align: center; overflow: hidden; min-height: 0; font-size: 0.9em; line-height: .9;">
<p>tidy your messy data</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><img data-src="../images/icons/tv-icons/purrr.png" style="max-height: 2em;"></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="pkg">purrr</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>enhance R’s functional programming</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><img data-src="../images/icons/tv-icons/stringr.png" style="max-height: 2em;"></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="pkg">stringr</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>simplify working with strings</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><img data-src="../images/icons/tv-icons/forcats.png" style="max-height: 2em;"></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="pkg">forcats</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>simplify working with factors</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><img data-src="../images/icons/tv-icons/ggplot2.png" style="max-height: 2em;"></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="pkg">ggplot2</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>a grammar of graphics</p>
</div>
</div>
</div>
</section>

<section id="tidyverse-packages-week-4" class="title-slide slide level1 center">
<h1>Tidyverse Packages: Week 4</h1>
<div class="r-stretch" style="display: grid; grid-template-columns: repeat(4, 1fr); grid-template-rows: minmax(0, 1fr) minmax(0, 1fr); gap: 0.8em;">
<div class="contained-box accent1" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><img data-src="../images/icons/tv-icons/tibble.png" style="max-height: 2em;"></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="pkg">tibble</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>Reimagine the dataframe</p>
</div>
</div>
<div class="contained-box accent1" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><img data-src="../images/icons/tv-icons/readr.png" style="max-height: 2em;"></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="pkg">readr</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>import and export tabular data</p>
</div>
</div>
<div class="contained-box accent1" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><img data-src="../images/icons/tv-icons/dplyr.png" style="max-height: 2em;"></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="pkg">dplyr</span></p>
</div>
</div>
<div class="box-content" style="text-align: center; overflow: hidden; min-height: 0; font-size: 0.9em; line-height: .9;">
<p>a grammar of data manipulation</p>
</div>
</div>
<div class="contained-box accent1" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><img data-src="../images/icons/tv-icons/tidyr.png" style="max-height: 2em;"></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="pkg">tidyr</span></p>
</div>
</div>
<div class="box-content" style="text-align: center; overflow: hidden; min-height: 0; font-size: 0.9em; line-height: .9;">
<p>tidy your messy data</p>
</div>
</div>
<div class="contained-box" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><img data-src="../images/icons/tv-icons/purrr.png" style="max-height: 2em;"></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="pkg">purrr</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>enhance R’s functional programming</p>
</div>
</div>
<div class="contained-box" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><img data-src="../images/icons/tv-icons/stringr.png" style="max-height: 2em;"></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="pkg">stringr</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>simplify working with strings</p>
</div>
</div>
<div class="contained-box" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><img data-src="../images/icons/tv-icons/forcats.png" style="max-height: 2em;"></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="pkg">forcats</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>simplify working with factors</p>
</div>
</div>
<div class="contained-box" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><img data-src="../images/icons/tv-icons/ggplot2.png" style="max-height: 2em;"></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="pkg">ggplot2</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>a grammar of graphics</p>
</div>
</div>
</div>
</section>

<section>
<section id="tibble" class="title-slide slide level1 center">
<h1><code>tibble</code></h1>

</section>
<section id="tibble-better-data-frames" class="slide level2 left-sidebar-slide" data-fullscreen="true">
<h2>tibble: Better Data Frames</h2>
<p><img data-src="../images/icons/tv-icons/tibble.png" class="absolute" style="top: 1em; right: 1em; height: 4em;; ">)</p>
<div class="sidebar-column">
<div class="sidebar-title">
<p><span class="pkg">tibble</span>: <br>Better Data Frames</p>
</div>
<ul>
<li class="fragment">Adaptation of base R’s <code>data.frame</code></li>
<li class="fragment">Tibbles are <em>also</em> data.frames
<ul>
<li class="fragment">Check with <code>class()</code> or <code>str()</code></li>
</ul></li>
<li class="fragment">Tidyverse functions work with tibbles
<ul>
<li class="fragment">usually add the <code>tibble</code> class automatically</li>
</ul></li>
<li class="fragment">Functionally equivalent</li>
</ul>
</div>
<div class="main-content">
<div class="r-stack">
<p><img data-src="../images/screenshots/iris-tabular.png" class="fragment" style="position: absolute; width: 60%; top: 2em; left: 2em;"></p>
<p><img data-src="../images/screenshots/iris-dataframe.png" class="fragment" style="position: absolute; width: 60%; top: 50%; left: 50%; transform: translate(-50%, -50%);"></p>
<p><img data-src="../images/screenshots/iris-tibble.png" class="fragment" style="position: absolute; width: 60%; bottom: 2em; right: 2em;"></p>
</div>
</div>
<aside class="notes">
<p>Adaptation of base R’s data.frame structure that makes a lot of things easier Tibbles are also data.frames (check the class() or str() functions) Tidyverse package(s) work with tibbles, not base data.frames Load the tidyverse library to use tibble-related functions</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="readr" class="title-slide slide level1 center">
<h1><code>readr</code></h1>

</section>
<section id="readr-read-write-tibbles" class="slide level2 left-sidebar-slide" data-fullscreen="true">
<h2><span class="pkg">readr</span>: Read &amp; Write Tibbles</h2>
<p><img data-src="../images/icons/tv-icons/readr.png" class="absolute" style="top: 1em; right: 1em; height: 4em;; ">)</p>
<div class="sidebar-column">
<div class="sidebar-title">
<p><span class="pkg">readr</span>: <br> Read &amp; Write Tibbles</p>
</div>
<div class="sidebar-content">
<ul>
<li class="fragment">Import/export tabular data as tibbles</li>
<li class="fragment">Functions start with <code>read_*()</code> and <code>write_*()</code></li>
<li class="fragment">Handle common file types: CSV, TSV, delimited, fixed-width</li>
<li class="fragment">Other packages for Excel, SPSS, Google Sheets, JSON, databases</li>
</ul>
</div>
</div>
<div class="main-content">
<p><img data-src="../images/screenshots/readr-specify.png"></p>
</div>
</section>
<section id="what-where" class="slide level2">
<h2>What &amp; Where</h2>
<p><img data-src="../images/icons/tv-icons/readr.png" class="absolute" style="top: -1.5em; right: 0em; height: 4em;; "></p>
<div class="container-fluid">
<div class="row d-flex">
<div class="col-6 d-flex">
<div class="overlap-box h-100 w-100 d-flex flex-column">
<div class="box-title">
<p>Determine import function:</p>
</div>
<div class="box-content flex-grow-1">
<ul>
<li class="fragment">File extension?</li>
<li class="fragment">Field separators?</li>
<li class="fragment">Column names?</li>
<li class="fragment">Non-tabular content?</li>
<li class="fragment">Multiple sheets?</li>
</ul>
</div>
</div>
</div>
<div class="col-6 d-flex">
<div class="overlap-box accent1 h-100 w-100 d-flex flex-column">
<div class="box-title">
<p>Determine file path:</p>
</div>
<div class="box-content flex-grow-1">
<ul>
<li class="fragment">Located in your repo</li>
<li class="fragment">Protected data
<ul>
<li class="fragment">Add to <code>.gitignore</code> or <code>localonly</code></li>
<li class="fragment">Only call in your <em>local</em> R scripts</li>
</ul></li>
<li class="fragment">Shared data
<ul>
<li class="fragment">In git-managed directory</li>
<li class="fragment">Callable by any/all scripts</li>
</ul></li>
<li class="fragment">Use relative paths</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="relative-relativity" class="slide level2">
<h2>Relative relativity</h2>
<div class="card" style="font-size: 1.1em; font-weight: bolder; text-align: center; border-width:8px; border-color: #c00; flex: 1 1 100%; background-color: #ffeaa9; margin-bottom: 1.5em;">
<div class="card-body" style="display: flex; align-items: center; justify-content: center; gap: .1em;">
<p><img data-src="../images/icons/priority.png" style="max-height: 3em;"></p>
<p>Quarto documents handle relative paths differently than R scripts.</p>
<p><img data-src="../images/icons/priority.png" style="max-height: 3em;"></p>
</div>
</div>
<p>In scripts, relative paths are relative to <em>the working directory</em>, your repo or project’s top-level. In Quarto docs, relative paths are relative to <em>the location of the Quarto file itself</em>.</p>
<p>If you work in a single <code>.qmd</code> in the top-level of your repo, these are equivalent. Read from: <code>repo_name/data/file.csv</code></p>
<p>If your <code>.qmd</code> is in any subfolder, you’ll need to adjust. To read the same file from a code chunk in <code>repo_name/quarto/document.qmd</code>, use: <code>../data/file.csv</code></p>
<p>This is for <em>all</em> file operations, not just <code>readr</code> functions.</p>

<aside><div>
<p><a href="https://github.com/rstudio/cheatsheets/blob/main/data-import.pdf"><code>readr</code> cheatsheet</a></p>
</div></aside></section>
<section id="importing-with-readr" class="slide level2 left-sidebar-slide" data-fullscreen="true">
<h2>Importing with <code>readr</code></h2>
<p><img data-src="../images/icons/tv-icons/readr.png" class="absolute" style="top: 1em; right: 1em; height: 4em;; ">)</p>
<div class="sidebar-column">
<div class="sidebar-title">
<p><strong>Importing</strong> with <span class="pkg">readr</span>: <code>read_*()</code></p>
</div>
<div class="sidebar-content">
<ul>
<li class="fragment"><code>read_*()</code> import tabular data as tibbles</li>
<li class="fragment">Optional <code>col_types</code> &amp; <code>col_names</code> arguments:</li>
<li class="fragment">Assign to object to save imported data</li>
</ul>
</div>
</div>
<div class="main-content" style="padding-right: 5em;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb13" style="margin-bottom: .5em"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a></a><span class="co"># Common read functions</span></span>
<span id="cb13-2"><a></a></span>
<span id="cb13-3"><a></a><span class="fu">read_csv</span>()    <span class="co"># Comma separated values</span></span>
<span id="cb13-4"><a></a><span class="fu">read_csv2</span>()   <span class="co"># Semicolon separator (comma = decimal)</span></span>
<span id="cb13-5"><a></a><span class="fu">read_tsv</span>()    <span class="co"># Tab separated values</span></span>
<span id="cb13-6"><a></a><span class="fu">read_delim</span>()  <span class="co"># Any delimiter</span></span>
<span id="cb13-7"><a></a><span class="fu">read_fwf</span>()    <span class="co"># Fixed width files</span></span>
<span id="cb13-8"><a></a><span class="fu">read_table</span>()  <span class="co"># Whitespace separated</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a></a><span class="co"># Default behavior - guesses all data types</span></span>
<span id="cb14-2"><a></a>my_tbl <span class="ot">&lt;-</span> read_<span class="sc">*</span>(file.csv, <span class="at">col_types =</span> <span class="cn">NULL</span>)</span>
<span id="cb14-3"><a></a></span>
<span id="cb14-4"><a></a><span class="co"># Specify columns with cols()</span></span>
<span id="cb14-5"><a></a>my_cols <span class="ot">&lt;-</span> read_<span class="sc">*</span>(file.csv, <span class="at">col_types =</span> <span class="fu">cols</span>(</span>
<span id="cb14-6"><a></a>  <span class="at">my_factor =</span> <span class="fu">col_factor</span>(),</span>
<span id="cb14-7"><a></a>  <span class="at">your_string =</span> <span class="fu">col_character</span>()</span>
<span id="cb14-8"><a></a>))</span>
<span id="cb14-9"><a></a></span>
<span id="cb14-10"><a></a><span class="co"># String shortcut:</span></span>
<span id="cb14-11"><a></a><span class="co"># needs character for each col in order</span></span>
<span id="cb14-12"><a></a><span class="co"># Use "?" for columns to guess</span></span>
<span id="cb14-13"><a></a>my_shortcut <span class="ot">&lt;-</span> read_<span class="sc">*</span>(file.csv, <span class="at">col_types =</span> <span class="st">"fc"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="exporting-with-readr" class="slide level2 left-sidebar-slide" data-fullscreen="true">
<h2>Exporting with <code>readr</code></h2>
<p><img data-src="../images/icons/tv-icons/readr.png" class="absolute" style="top: 1em; right: 1em; height: 4em;; ">)</p>
<div class="sidebar-column">
<div class="sidebar-title">
<p><strong>Exporting</strong> with <span class="pkg">readr</span>: <code>write_*()</code></p>
</div>
<div class="sidebar-content">
<div class="tightlist">
<div class="grouped">
<ul>
<li><code>read_*()</code> functions have matched <code>write_*()</code> counterparts</li>
<li>Save tibbles to tabular files</li>
<li>Write <em>intermediate datasets</em> after:
<ul>
<li>De-identifying data</li>
<li>Complex wrangling</li>
<li>Dropping unneeded data</li>
<li>Managing empty data</li>
</ul></li>
<li>Run from script or console, no object assignment</li>
</ul>
</div>
</div>
</div>
</div>
<div class="main-content" style="padding-right: 5em;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15" style="margin-bottom: .5em"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a></a><span class="co"># Common write_*() functions</span></span>
<span id="cb15-2"><a></a></span>
<span id="cb15-3"><a></a><span class="fu">write_delim</span>()</span>
<span id="cb15-4"><a></a><span class="fu">write_csv</span>()</span>
<span id="cb15-5"><a></a><span class="fu">write_csv2</span>()</span>
<span id="cb15-6"><a></a><span class="fu">write_excel_csv</span>()</span>
<span id="cb15-7"><a></a><span class="fu">write_excel_csv2</span>()</span>
<span id="cb15-8"><a></a><span class="fu">write_tsv</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a></a><span class="co"># Start with messy data</span></span>
<span id="cb16-2"><a></a>messy_df <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"localpath/messy.xlsx"</span>, </span>
<span id="cb16-3"><a></a>                     <span class="at">sheet=</span><span class="st">"my sheet"</span>)</span>
<span id="cb16-4"><a></a></span>
<span id="cb16-5"><a></a><span class="co"># Process in R: tidy, clean, transform...</span></span>
<span id="cb16-6"><a></a></span>
<span id="cb16-7"><a></a><span class="co"># Export clean version</span></span>
<span id="cb16-8"><a></a>clean_df <span class="ot">&lt;-</span> <span class="co"># ... your cleaning steps</span></span>
<span id="cb16-9"><a></a><span class="fu">write_csv</span>(clean_df, <span class="st">"localpath/clean.csv"</span>)</span>
<span id="cb16-10"><a></a></span>
<span id="cb16-11"><a></a><span class="co"># Later, read the clean version</span></span>
<span id="cb16-12"><a></a>clean_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"localpath/clean.csv"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<aside class="notes">
<p>Export tibbles to create intermediate datasets between initial import and final analysis Easily produce de-identified datasets to share with others Save computational time by skipping costly read-in and wrangling steps (e.g., big files, many files, complex transformations) readr can also export tibbles to tabular files with similar syntax to how it imports</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="workflow" class="slide level2 left-sidebar-slide" data-fullscreen="true">
<h2>Workflow</h2>
<div class="container-fluid" style="width: 80vw;">
<div class="row" style="margin-top: 1em">
<div class="col-3 fragment" data-fragment-index="1">
<p><img data-src="../images/screenshots/process-messy-file.png" style="max-width: 120% !important; margin-top: 0em" alt="Messy Data File"></p>
</div>
<div class="col-1 fragment" data-fragment-index="2">
<div style="text-align: center; margin-top: 50%;">
<div style="font-size: 2em">
<p><i class="bi-arrow-right-circle-fill " style="" role="img" aria-hidden="true"></i></p>
</div>
</div>
</div>
<div class="col-4 smaller fragment" data-fragment-index="2">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a></a><span class="co"># Read in messy data</span></span>
<span id="cb17-2"><a></a>messy_df <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(</span>
<span id="cb17-3"><a></a>    <span class="st">"localpath/messy.xlsx"</span>,</span>
<span id="cb17-4"><a></a>    <span class="at">sheet=</span><span class="st">"my sheet"</span></span>
<span id="cb17-5"><a></a>    )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="col-1 fragment" data-fragment-index="3">
<div style="text-align: center; margin-top: 50%;">
<div style="font-size: 2em">
<p><i class="bi-arrow-right-circle-fill " style="" role="img" aria-hidden="true"></i></p>
</div>
</div>
</div>
<div class="col-3 smaller fragment" data-fragment-index="3">
<p><img data-src="../images/icons/cleaning.png" style="max-height: 3.5em;" alt="Clean"> <img data-src="../images/icons/lasso.png" style="max-height: 3.5em;" alt="Wrangle"></p>
</div>
</div>
<!-- open down arrow row -->
<div class="row">
<div class="col-11 fragment" style="text-align: right;" data-fragment-index="4">
<div style="font-size: 2em">
<p><i class="bi-arrow-down-circle-fill " style="" role="img" aria-hidden="true"></i></p>
</div>
</div>
<div class="col-1">
<p><span style="font-size: 0em;">.</span></p>
</div>
</div>
<!-- close down arrow row -->
<!-- open second row -->
<div class="row">
<!-- open tidy data card column -->
<div class="col-3 smaller fragment" data-fragment-index="6">
<div class="card">
<div class="card-header">
<div class="card-title" style="color: #fff; font-size: .8em">
<p>My tidy data file:</p>
</div>
</div>
<div class="card-body lessgap" style="font-size: .8em">
<ul>
<li>Data needed for future R scripts <em>and nothing else</em></li>
<li>Minimal, tabular (.csv)</li>
<li>No protected data</li>
<li>Added variables from initial wrangling</li>
</ul>
</div>
</div>
</div>
<!-- close tidy data card column -->
<!-- open circular paths column -->
<div class="col-6">
<!-- open left path row -->
<div class="row fragment" data-fragment-index="5">
<div class="col-2 fragment" data-fragment-index="6">
<div style="text-align: center; ">
<div style="font-size: 2em">
<p><i class="bi-arrow-left-circle-fill " style="" role="img" aria-hidden="true"></i></p>
</div>
</div>
</div>
<div class="col-8 smaller">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a></a><span class="co"># Write out clean version</span></span>
<span id="cb18-2"><a></a><span class="fu">write_csv</span>(clean_df, </span>
<span id="cb18-3"><a></a>          <span class="st">"localpath/clean.csv"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="col-2">
<div style="text-align: center;">
<div style="font-size: 2em">
<p><i class="bi-arrow-left-circle-fill " style="" role="img" aria-hidden="true"></i></p>
</div>
</div>
</div>
</div>
<!-- close left path row -->
<!-- open right path row -->
<div class="row fragment" style="margin-top: 1em;" data-fragment-index="7">
<div class="col-2">
<div style="text-align: center;">
<div style="font-size: 2em">
<p><i class="bi-arrow-right-circle-fill " style="" role="img" aria-hidden="true"></i></p>
</div>
</div>
</div>
<div class="col-8 smaller">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a></a><span class="co"># Read in clean version</span></span>
<span id="cb19-2"><a></a>clean_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(</span>
<span id="cb19-3"><a></a>    <span class="st">"localpath/clean.csv"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="col-2">
<div style="text-align: center;">
<div style="font-size: 2em">
<p><i class="bi-arrow-right-circle-fill " style="" role="img" aria-hidden="true"></i></p>
</div>
</div>
</div>
</div>
<!-- close right path row -->
</div>
<!-- close circular paths column -->
<!-- open clean_df column -->
<div class="col-3 fragment" data-fragment-index="4">
<div class="card card-accent1" style="padding:0px">
<div class="card-header">
<div class="card-title" style="color: #fff; font-size: .6em">
<p><code>clean_df</code>:</p>
</div>
</div>
<div class="card-body lessgap" style="font-size: .8em">
<ul>
<li>Clean &amp; tidy tibble</li>
<li>Data needed for analysis <em>and nothing else</em></li>
</ul>
</div>
</div>
</div>
<!-- close clean_df column -->
</div>
<!-- close second row column -->
</div>
<!-- close container -->
</section>
<section id="bonus-readxl-googlesheets4" class="slide level2">
<h2>Bonus: <code>readxl</code> &amp; <code>googlesheets4</code></h2>
<p><img data-src="../images/icons/tv-icons/readxl.png" class="absolute" style="top: -1.5em; right: 4em; height: 4em;; "> <img data-src="../images/icons/tv-icons/googlesheets4.png" class="absolute" style="top: -1.5em; right: 0em; height: 4em;; "></p>
<div class="large">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Complementary packages to <code>readr</code></strong></p>
</div>
<div class="callout-content">
<ul>
<li class="fragment">Mimic readr’s <span class="func">read_*</span> functions
<ul>
<li class="fragment"><a href="https://github.com/rstudio/cheatsheets/blob/main/data-import.pdf">same cheatsheet</a></li>
</ul></li>
<li class="fragment">Specification for converting “complex” documents into a <code>tbl</code>-compatible format</li>
<li class="fragment"><em>Not</em> tidyverse packages
<ul>
<li class="fragment">Install and load them separately!</li>
</ul></li>
</ul>
</div>
</div>
</div>
</div>
<div class="fragment">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a></a><span class="co"># readxl for Excel files</span></span>
<span id="cb20-2"><a></a><span class="fu">library</span>(readxl)</span>
<span id="cb20-3"><a></a><span class="fu">read_excel</span>(<span class="st">"data.xlsx"</span>)</span>
<span id="cb20-4"><a></a></span>
<span id="cb20-5"><a></a><span class="co"># googlesheets4 for Google Sheets</span></span>
<span id="cb20-6"><a></a><span class="fu">library</span>(googlesheets4)</span>
<span id="cb20-7"><a></a><span class="fu">read_sheet</span>(<span class="st">"spreadsheet_url"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="practice-read-write-1" class="slide level2 scrollable">
<h2>Practice: Read &amp; Write (1)</h2>
<div class="container-fluid">
<div class="row">
<div class="col-5">
<div class="overlap-box">
<div class="box-title">
<p>Read in M&amp;M data:</p>
</div>
<div class="box-content">
<ol type="1">
<li class="fragment">Pull the <code>student-hub</code> repo (or find files on GitHub)</li>
<li class="fragment">Find the Excel spreadsheet: <code>data/MM data.xlsx</code></li>
<li class="fragment">Install and load the <span class="pkg">readxl</span> library</li>
<li class="fragment">Use the <code>read_excel()</code> function to assign the data to a tibble called <code>mmdata</code></li>
<li class="fragment">Examine your data in the console to see if it matches the image</li>
</ol>
</div>
</div>
</div>
<div class="col-7">
<p><img data-src="../images/screenshots/mmdata-goal.png"></p>
</div>
</div>
</div>
<div class="bubble-chain">
<p class="bubble-left fragment">
It doesn’t!
</p>
<p class="bubble-right fragment">
Oh no! Thank heavens you are smarter than a computer.
</p>
</div>
</section>
<section id="practice-read-write-2" class="slide level2 scrollable">
<h2>Practice: Read &amp; Write (2)</h2>
<div class="container-fluid">
<div class="row">
<div class="col-7">
<div class="overlap-box">
<div class="box-title">
<p>Fix, read, write:</p>
</div>
<div class="box-content">
<ol type="1">
<li class="fragment">Open <code>MM data.xlsx</code> in Excel (or similar) and examine it with your human eyeballs
<ul>
<li class="fragment">What about this file creates problems when you read-in?</li>
<li class="fragment">How might you fix the issue here in the Excel document?</li>
</ul></li>
<li class="fragment">Review the <code>?read_excel</code> documentation
<ul>
<li class="fragment">What arguments can you pass to <code>read_excel()</code> to fix the issue on read-in?</li>
</ul></li>
<li class="fragment">Use <code>read_excel()</code> to assign the data to a tibble called <code>mmdata</code> that looks like the image</li>
<li class="fragment">Use <code>write_csv()</code> to save <code>mmdata</code> to an intermediate dataset at the location <code>student-hub/data/mmdata.csv</code>
<ul>
<li class="fragment">Use an appropriate relative path!</li>
</ul></li>
</ol>
</div>
</div>
</div>
<div class="col-5">
<p><img data-src="../images/screenshots/mmdata-goal.png"></p>
</div>
</div>
</div>
<div class="bubble-chain">
<p class="bubble-left fragment">
It says that folder doesn’t exist! <br> <em>(and/or)</em> <br> It doesn’t read/write/both where I want it to!
</p>
<p class="bubble-right fragment">
Remember relative relativity. Are you reading and writing from a script, Quarto doc, or the console?
</p>
</div>
<aside class="notes">
<p>Open <code>MM data.xlsx</code> in Excel (or similar) and examine it with your human eyeballs What about this file creates problems when you read-in? How would you fix the issue here in the Excel document? (just think; don’t do it!) Review the ?read_excel documentation What arguments can you pass to read_excel() to fix the issue on read-in? Use the read_excel() function to assign the data to a tibble called mmdata that looks like the image Use write_csv() to save mmdata to an intermediate dataset: <code>in-class-materials/data/mmdata.csv</code></p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="dplyr" class="title-slide slide level1 center">
<h1><code>dplyr</code></h1>

</section>
<section id="dplyr-data-transformation" class="slide level2 left-sidebar-slide" data-fullscreen="true">
<h2><span class="pkg">dplyr</span>: Data Transformation</h2>
<p><img data-src="../images/icons/tv-icons/dplyr.png" class="absolute" style="top: 1em; right: 1em; height: 4em;; ">)</p>
<div class="sidebar-column">
<div class="sidebar-title">
<p><span class="pkg">dplyr</span>: <br> Grammar of Data Manipulation</p>
</div>
<div class="sidebar-content">
<ul>
<li class="fragment">Core tidyverse package for data transformation</li>
<li class="fragment">Works with tibbles (and data.frames)</li>
<li class="fragment">Build linear pipelines for human-friendly data wrangling</li>
</ul>
</div>
</div>
<div class="main-content">
<div class="r-stretch" style="display: grid; grid-template-columns: repeat(3, 1fr); grid-template-rows: minmax(0, 1fr) minmax(0, 1fr); gap: 0.8em; margin-top: 3em;">
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><i class="bi-check2-square " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="func">select</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>subset &amp; sort columns</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><i class="bi-funnel " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="func">filter</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>subset rows</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><i class="bi-layer-backward " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="func">arrange</span></p>
</div>
</div>
<div class="box-content" style="text-align: center; overflow: hidden; min-height: 0; font-size: 0.9em; line-height: .9;">
<p>sort rows</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><i class="bi-node-plus-fill " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="func">mutate</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>create and modify columns</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><i class="bi-calculator " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="func">summarize</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>compute with multiple rows</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><i class="bi-collection " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="func">group_by</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>perform operations on subgroups</p>
</div>
</div>
</div>
</div>
</section>
<section id="select" class="slide level2">
<h2><code>select</code></h2>
</section>
<section id="filter" class="slide level2">
<h2><code>filter</code></h2>
</section>
<section id="arrange" class="slide level2">
<h2><code>arrange</code></h2>
</section>
<section id="mutate" class="slide level2">
<h2><code>mutate</code></h2>
</section>
<section id="summarize" class="slide level2">
<h2><code>summarize</code></h2>
</section>
<section id="group_by" class="slide level2">
<h2><code>group_by</code></h2>
</section></section>
<section id="tidyr" class="title-slide slide level1 center">
<h1><code>tidyr</code></h1>

</section>

<section>
<section id="magrittr-the-pipe" class="title-slide slide level1 center">
<h1>magrittr: THE PIPE %&gt;%</h1>

</section>
<section id="the-pipe-operator" class="slide level2">
<h2>The Pipe Operator</h2>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p><strong>magrittr</strong>: dependency tidyverse package with one purpose – <strong>the pipe operator: %&gt;%</strong></p>
</div>
</div>
</div>
<p>The <strong>%&gt;%</strong> allows you to:</p>
<ul>
<li class="fragment">create some data %&gt;%
<ul>
<li class="fragment">change it with function X %&gt;%</li>
<li class="fragment">change it with function Y %&gt;%</li>
<li class="fragment">as much as you like</li>
</ul></li>
</ul>
<div class="fragment">
<p><strong>Human-readable alternative to multiple embedded functions:</strong> <code>as much as you like(change it with function Y(change it with function X(create some data)))</code></p>
</div>
</section>
<section id="keyboard-shortcut" class="slide level2">
<h2>Keyboard Shortcut</h2>
<div class="fragment highlight-red">
<p>“That’s annoying. It’s also annoying to type %&gt;% all the time.”</p>
</div>
<div class="fragment">
<p><strong>Fair! Fortunately, RStudio has a built-in shortcut:</strong></p>
<p><strong>shift + cmd/ctrl + m</strong></p>
</div>
</section>
<section id="pipe-example" class="slide level2">
<h2>Pipe Example</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a></a><span class="co"># Assign everything to mmdata.long</span></span>
<span id="cb21-2"><a></a><span class="co"># Using the mmdata tbl...</span></span>
<span id="cb21-3"><a></a>mmdata.long <span class="ot">&lt;-</span> mmdata <span class="sc">%&gt;%</span></span>
<span id="cb21-4"><a></a>  <span class="co"># ...select three columns...</span></span>
<span id="cb21-5"><a></a>  <span class="fu">select</span>(Red, Green, Blue) <span class="sc">%&gt;%</span></span>
<span id="cb21-6"><a></a>  <span class="co"># ...then make that 3 col tbl long...</span></span>
<span id="cb21-7"><a></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="st">"Red"</span>, <span class="st">"Green"</span>,<span class="st">"Blue"</span>),</span>
<span id="cb21-8"><a></a>               <span class="at">names_to =</span> <span class="st">"Color"</span>,</span>
<span id="cb21-9"><a></a>               <span class="at">values_to =</span> <span class="st">"Number"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-10"><a></a>  <span class="co"># ...then sort that tbl by new Number column...</span></span>
<span id="cb21-11"><a></a>  <span class="fu">arrange</span>(Number)</span>
<span id="cb21-12"><a></a><span class="co"># Pipeline is over, so everything assigned to mmdata.long</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="alternative-pipe" class="slide level2">
<h2>Alternative Pipe: |&gt;</h2>
<div class="fragment">
<p>“I thought this was the pipe: |”</p>
</div>
<div class="fragment">
<p>Yeah…it is. This is another one. The OR operator pipe <code>|</code> looks like a pipe. The tidyverse pipe <code>%&gt;%</code> acts like a pipe.</p>
</div>
</section></section>
<section>
<section id="dplyr-1" class="title-slide slide level1 center">
<h1>dplyr</h1>

</section>
<section id="dplyr-tidy-transformation" class="slide level2">
<h2>dplyr: Tidy Transformation</h2>
<p>Use the magrittr <strong>%&gt;%</strong> pipe to make data flow smoothly through these core dplyr functions:</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong><span class="func">filter()</span></strong> - subset/sort rows</p>
<p><strong><span class="func">select()</span></strong> - subset/sort columns</p>
<p><strong><span class="func">mutate()</span></strong> - create new column</p>
</div><div class="column" style="width:50%;">
<p><strong><span class="func">group_by()</span></strong> &amp; <strong><span class="func">summarize()</span></strong> - compute summary values</p>
<p><strong><span class="func">arrange()</span></strong> - perform operations on subgroups of data</p>
</div></div>
</section>
<section id="filter-create-a-subset" class="slide level2">
<h2>filter(): Create a Subset</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a></a><span class="fu">filter</span>(tbl, cond1, cond2, ...)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li class="fragment">Evaluates on <strong>observations</strong> (rows)</li>
<li class="fragment"><strong>Conditions</strong> are logical evaluations of <strong>values</strong>
<ul>
<li class="fragment">specified by column</li>
<li class="fragment">logical operators: <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>!=</code>, <code>==</code></li>
</ul></li>
<li class="fragment"><strong>Returns a tbl</strong> made up of all rows that meet all conditions</li>
</ul>
<p><strong>Examples:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a></a><span class="co"># Condition examples</span></span>
<span id="cb23-2"><a></a>transport <span class="sc">==</span> <span class="st">"bicycle"</span></span>
<span id="cb23-3"><a></a><span class="fu">has.handlebars</span>(transport) <span class="sc">|</span> transport <span class="sc">==</span> <span class="st">"boat"</span></span>
<span id="cb23-4"><a></a>(<span class="fu">has.handlebars</span>(transport) <span class="sc">&amp;</span> <span class="fu">n.wheels</span>(transport) <span class="sc">&lt;</span> <span class="dv">3</span>) <span class="sc">|</span> </span>
<span id="cb23-5"><a></a>  (<span class="fu">requires.gas</span>(transport) <span class="sc">&amp;</span> <span class="fu">n.wheels</span>(transport) <span class="sc">&gt;</span> <span class="dv">3</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="filter-under-the-hood" class="slide level2">
<h2>filter(): Under the Hood</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a></a><span class="co"># Basically 2 embedded 'for' loops</span></span>
<span id="cb24-2"><a></a><span class="co"># FOR each row in tbl</span></span>
<span id="cb24-3"><a></a><span class="co">#   FOR each conditional argument</span></span>
<span id="cb24-4"><a></a><span class="co">#     Evaluate logic</span></span>
<span id="cb24-5"><a></a><span class="co">#     IF true, return tbl (continue loop to next arg.)</span></span>
<span id="cb24-6"><a></a><span class="co">#     ELSE (if false), remove row, return tbl (continue loop)</span></span>
<span id="cb24-7"><a></a><span class="co">#   when no conditional arg. remain, move to next row</span></span>
<span id="cb24-8"><a></a><span class="co"># When no rows remain, return tbl and end loop</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="fragment">
<p>“Can’t I just know how to use it without this explanation?”</p>
</div>
<div class="fragment">
<p>Sure! <em>But</em> there’s going to be an exercise and mini-project posted next class directly related to this kind of thing, so you may want to keep it in mind.</p>
</div>
</section>
<section id="arrange-sort-your-rows" class="slide level2">
<h2>arrange(): Sort Your Rows</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a></a><span class="fu">arrange</span>(tbl, col1, col2, ...)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<ul>
<li class="fragment">Sort rows</li>
<li class="fragment">If 2+ variables, sorts in order given</li>
<li class="fragment">Defaults to ascending order</li>
<li class="fragment">Use <span class="func">desc()</span> or <code>-</code> for descending order</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a></a><span class="co"># Sort trial order within subject</span></span>
<span id="cb26-2"><a></a><span class="fu">arrange</span>(data, subject, trial)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>&gt; subject  trial
&gt; A        1
&gt; A        2  
&gt; B        1
&gt; B        2</code></pre>
</div><div class="column" style="width:50%;">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a></a><span class="co"># Reverse trial order</span></span>
<span id="cb28-2"><a></a><span class="fu">arrange</span>(data, subject, <span class="fu">desc</span>(trial))</span>
<span id="cb28-3"><a></a><span class="fu">arrange</span>(data, subject, <span class="sc">-</span>trial)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>&gt; subject  trial
&gt; A        2
&gt; A        1
&gt; B        2
&gt; B        1</code></pre>
</div></div>
</section>
<section id="select-subset-sort-rename-columns" class="slide level2">
<h2>select(): Subset, Sort, &amp; Rename Columns</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a></a><span class="fu">select</span>(tbl, col1, col2, ...)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Basic Examples:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a></a><span class="co"># From tibble `data` with columns: colA, colB, colC, colD</span></span>
<span id="cb31-2"><a></a><span class="co"># Return a tibble with only colA and colB</span></span>
<span id="cb31-3"><a></a><span class="fu">select</span>(data, colA, colB)</span>
<span id="cb31-4"><a></a><span class="fu">select</span>(data, <span class="sc">-</span><span class="fu">c</span>(colC, colD))</span>
<span id="cb31-5"><a></a></span>
<span id="cb31-6"><a></a><span class="co"># Rename/reorder while selecting</span></span>
<span id="cb31-7"><a></a><span class="fu">select</span>(data, colC, <span class="at">column_A =</span> colA, colB)</span>
<span id="cb31-8"><a></a></span>
<span id="cb31-9"><a></a><span class="co"># Select ranges</span></span>
<span id="cb31-10"><a></a><span class="fu">select</span>(data, colA<span class="sc">:</span>colC)    <span class="co"># inclusive range between named columns</span></span>
<span id="cb31-11"><a></a><span class="fu">select</span>(data, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)          <span class="co"># inclusive range based on column number</span></span>
<span id="cb31-12"><a></a><span class="fu">select</span>(data, <span class="sc">-</span><span class="fu">ends_with</span>(<span class="st">"D"</span>))  <span class="co"># use "tidy-select" functions</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="select-advanced-features" class="slide level2">
<h2>select(): Advanced Features</h2>
<ul>
<li class="fragment">Operates on <strong>variables</strong> (columns)</li>
<li class="fragment">Returns tibble that <strong>includes:</strong>
<ul>
<li class="fragment">argument columns</li>
<li class="fragment">in arg order</li>
<li class="fragment">optionally renamed</li>
</ul></li>
<li class="fragment">Use hyphen to <strong>exclude</strong> columns
<ul>
<li class="fragment">Includes everything else</li>
</ul></li>
</ul>
<p><strong>Related function:</strong> <span class="func">rename()</span></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a></a><span class="co"># Change column names with similar syntax</span></span>
<span id="cb32-2"><a></a><span class="co"># but don't change tibble structure</span></span>
<span id="cb32-3"><a></a><span class="fu">rename</span>(<span class="at">column_B =</span> colB)  <span class="co"># new columns: colA, column_B, colC, colD</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="mutate-create-new-variable" class="slide level2">
<h2>mutate(): Create New Variable</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a></a><span class="fu">mutate</span>(tbl, <span class="at">newvar1 =</span> ...)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Examples:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a></a><span class="co"># All obs. in new column 'hello' have the same value</span></span>
<span id="cb34-2"><a></a><span class="fu">mutate</span>(data, <span class="at">hello =</span> <span class="st">"hey there!"</span>)</span>
<span id="cb34-3"><a></a></span>
<span id="cb34-4"><a></a><span class="co"># Obs. in new column are computed by row</span></span>
<span id="cb34-5"><a></a><span class="fu">mutate</span>(data, <span class="at">col1_plus_col2 =</span> col1 <span class="sc">+</span> col2)</span>
<span id="cb34-6"><a></a><span class="fu">mutate</span>(data, <span class="at">round_col1_div_col2 =</span> <span class="fu">round</span>(col1<span class="sc">/</span>col2, <span class="dv">2</span>))</span>
<span id="cb34-7"><a></a></span>
<span id="cb34-8"><a></a><span class="co"># Multiple operations in sequence</span></span>
<span id="cb34-9"><a></a><span class="fu">mutate</span>(data,</span>
<span id="cb34-10"><a></a>  <span class="at">sum_cols =</span> col1 <span class="sc">+</span> col2,</span>
<span id="cb34-11"><a></a>  <span class="at">prop_col1 =</span> <span class="fu">round</span>(col1<span class="sc">/</span>sum_cols, <span class="dv">2</span>))</span>
<span id="cb34-12"><a></a>  </span>
<span id="cb34-13"><a></a><span class="co"># Change values in an existing column conditionally</span></span>
<span id="cb34-14"><a></a><span class="fu">mutate</span>(data, <span class="at">colA =</span> <span class="fu">ifelse</span>(colA <span class="sc">==</span> <span class="dv">0</span>, <span class="cn">NA</span>, colA))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="group_by-summarize-compute-summary-values" class="slide level2">
<h2>group_by() &amp; summarize(): Compute Summary Values</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a></a><span class="fu">group_by</span>(tbl, col1, col2, ...)</span>
<span id="cb35-2"><a></a><span class="fu">summarize</span>(tbl, <span class="at">newcol =</span> <span class="fu">fun</span>(col), ...)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Without Grouping:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a></a><span class="co"># Average all values in score column</span></span>
<span id="cb36-2"><a></a><span class="fu">summarize</span>(data, <span class="at">mean_score =</span> <span class="fu">mean</span>(score))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>&gt; mean_score
&gt; 20</code></pre>
</div><div class="column" style="width:50%;">
<p><strong>With Grouping:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a></a><span class="co"># Average score for each subject</span></span>
<span id="cb38-2"><a></a><span class="fu">group_by</span>(data, subject) <span class="sc">%&gt;%</span></span>
<span id="cb38-3"><a></a>  <span class="fu">summarize</span>(<span class="at">sub_mean_score =</span> <span class="fu">mean</span>(score),</span>
<span id="cb38-4"><a></a>           <span class="at">sub_first_score =</span> <span class="fu">first</span>(score))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>&gt; subject  sub_mean_score  sub_first_score
&gt; A        18              17
&gt; B        22              20</code></pre>
</div></div>
</section>
<section id="advanced-grouping" class="slide level2">
<h2>Advanced Grouping</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a></a><span class="co"># Grouping by multiple columns creates summary for each </span></span>
<span id="cb40-2"><a></a><span class="co"># unique combination of values</span></span>
<span id="cb40-3"><a></a><span class="fu">group_by</span>(data, subject, condition) <span class="sc">%&gt;%</span></span>
<span id="cb40-4"><a></a>  <span class="fu">summarize</span>(<span class="at">sc_mean_score =</span> <span class="fu">mean</span>(score))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<pre><code>&gt; subject  condition  sub_mean_score
&gt; A        1          17
&gt; A        2          19
&gt; B        1          24
&gt; B        2          20</code></pre>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<ul>
<li class="fragment"><strong><span class="func">summarize()</span></strong> computes across obs. in a variable</li>
<li class="fragment">Summarizing without grouping computes across all data</li>
<li class="fragment"><strong><span class="func">group_by()</span></strong> breaks observations into subsets</li>
<li class="fragment">Returns tbl with <em>only</em> new summary columns and any grouping columns</li>
</ul>
<p><strong>FYI:</strong> <code>summarize()</code> == <code>summarise()</code></p>
</div>
</div>
</div>
</section></section>
<section>
<section id="combining-data-preview" class="title-slide slide level1 center">
<h1>Combining Data (Preview)</h1>

</section>
<section id="just-a-preview" class="slide level2">
<h2>Just a Preview…</h2>
<p>The binding/merging/joining functions in the tidyverse are part of <span class="pkg">dplyr</span>, so I’m adding reference slides here.</p>
<p>They make more sense to talk about together with the <span class="pkg">tidyr</span> functions next class, so we’ll skip these for now and come back to them.</p>
</section>
<section id="bind-rows" class="slide level2">
<h2>Bind Rows</h2>
<p><strong>Append <em>rows</em> of one dataframe after the last row of another</strong></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>base::<span class="func">rbind()</span></strong> - dataframes must have exactly the same columns in the same order</p>
</div><div class="column" style="width:50%;">
<p><strong>dplyr::<span class="func">bind_rows()</span></strong> - dataframes can have different column structures, missing values will be treated as <em>NA</em></p>
</div></div>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p><strong>What’s with the base:: and dplyr:: bits?</strong></p>
<p>It’s a shortcut to specify what package the function comes from. Usually not necessary in your actual code, but it can come in handy when: 1) you don’t have that package loaded and you just need that single specific function or 2) you have multiple packages loaded that define that function and you want to specify which of them to use.</p>
</div>
</div>
</div>
</section>
<section id="bind-columns" class="slide level2">
<h2>Bind Columns</h2>
<p><strong>Append <em>columns</em> of one dataframe after the last column of another</strong></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>base::<span class="func">cbind()</span></strong> - dataframes must have the same number of rows</p>
</div><div class="column" style="width:50%;">
<p><strong>dplyr::<span class="func">bind_cols()</span></strong> - dataframes must have the same number of rows</p>
</div></div>
<div class="fragment">
<p>“If they work the same way, which should I use?”</p>
</div>
<div class="fragment">
<p><strong>Neither! Use joins instead.</strong></p>
</div>
</section>
<section id="merge-data-with-_join-functions" class="slide level2">
<h2>Merge Data with *_join() Functions</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong><span class="func">left_join()</span></strong> - includes all the rows of x and only the rows of y that have matches in x</p>
<p><strong><span class="func">right_join()</span></strong> - includes all the rows of y and only the rows of x that have matches in y</p>
</div><div class="column" style="width:50%;">
<p><strong><span class="func">inner_join()</span></strong> - includes only rows present in both x and y</p>
<p><strong><span class="func">full_join()</span></strong> - includes all rows present in either x or y, matched where possible</p>
</div></div>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>See r4ds <a href="https://r4ds.hadley.nz/joins.html">Chapter 19: Joins</a> for more explanation</p>
</div>
</div>
</div>
</section>
<section id="join-syntax" class="slide level2">
<h2>*_join() Syntax</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a></a><span class="sc">*</span><span class="fu">_join</span>(left.tbl, right.tbl, <span class="at">by =</span> ...)</span>
<span id="cb42-2"><a></a><span class="co"># replace * with left, right, inner, or full</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Examples:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a></a><span class="co"># These are all identical</span></span>
<span id="cb43-2"><a></a><span class="fu">left_join</span>(band_members, band_instruments)</span>
<span id="cb43-3"><a></a></span>
<span id="cb43-4"><a></a><span class="fu">left_join</span>(band_members, band_instruments, </span>
<span id="cb43-5"><a></a>         <span class="at">by =</span> <span class="fu">join_by</span>(name))</span>
<span id="cb43-6"><a></a></span>
<span id="cb43-7"><a></a><span class="fu">left_join</span>(band_members, band_instruments, </span>
<span id="cb43-8"><a></a>         <span class="at">by =</span> <span class="st">"name"</span>)</span>
<span id="cb43-9"><a></a></span>
<span id="cb43-10"><a></a><span class="co"># Specify to match columns with different names:</span></span>
<span id="cb43-11"><a></a>by <span class="ot">=</span> <span class="fu">join_by</span>(name <span class="sc">==</span> artist)</span>
<span id="cb43-12"><a></a></span>
<span id="cb43-13"><a></a><span class="co"># Specify multiple columns to match:</span></span>
<span id="cb43-14"><a></a><span class="fu">join_by</span>(a, c <span class="sc">==</span> d)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section></section>
<section>
<section id="practice-dplyr" class="title-slide slide level1 center">
<h1>Practice: dplyr</h1>

</section>
<section id="try-it-out" class="slide level2">
<h2>💻 Try It Out</h2>
<p><strong>Using the mmdata tibble you created earlier, experiment with:</strong></p>
<ul>
<li class="fragment"><strong><span class="func">filter()</span></strong> - Create subsets based on conditions</li>
<li class="fragment"><strong><span class="func">select()</span></strong> - Choose specific columns</li>
<li class="fragment"><strong><span class="func">mutate()</span></strong> - Create new variables</li>
<li class="fragment"><strong><span class="func">arrange()</span></strong> - Sort your data</li>
<li class="fragment"><strong><span class="func">group_by()</span></strong> &amp; <strong><span class="func">summarize()</span></strong> - Calculate group statistics</li>
</ul>
</section></section>
<section>
<section id="exercises" class="title-slide slide level1 center">
<h1>Exercises</h1>

</section>
<section id="w3c2-readwrite-practice-1-of-2" class="slide level2">
<h2>💻 W3C2: Read/Write Practice (1 of 2)</h2>
<p><strong>In the first code chunk of a new notebook (R/quarto):</strong></p>
<ul>
<li class="fragment">Use readr functions to read in a simple tabular dataset (.csv/.tsv) using a relative path and assign to a new object</li>
<li class="fragment">Use tidyverse functions to transform the data in some way (can be very simple as long as it creates recognizable changes)</li>
<li class="fragment">Use readr functions to write your transformed data to a .csv file in the same location as your original data file (give it a unique file name)</li>
<li class="fragment">Examine the assigned objects and written files; use one of the objects in a second code chunk</li>
<li class="fragment">Make necessary changes if it does not work as expected</li>
</ul>
<p><strong>Replicate</strong> the script above in a new .R script in the same directory as your notebook</p>
<p><strong>In a new chunk,</strong> <em>source</em> the .R script, again examine objects/files and make changes so things work as expected</p>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p><strong>Assessed:</strong> 9, 10, 22; <strong>Unassessed:</strong> 2, 4, 10</p>
</div>
</div>
</div>
</section>
<section id="w3c2-readwrite-practice-2-of-2" class="slide level2">
<h2>💻 W3C2: Read/Write Practice (2 of 2)</h2>
<p><strong>Find or create a variety of datasets to repeat the process:</strong></p>
<ul>
<li class="fragment"><strong>Different file types:</strong> .csv, google sheets, .xlsx, .sav, etc.</li>
<li class="fragment"><strong>Different “extra” stuff:</strong> multiple tabs, rich formatting, non-data text, header(s), etc.</li>
<li class="fragment"><strong>Different combinations of file locations:</strong> notebook and script in root folder, one in root folder and one in a subdirectory, both in two different subdirectories, writing/reading files in a lower-level subdirectory, writing/reading files in a higher-level subdirectory, etc.</li>
</ul>
<p><strong>Pay attention to:</strong> - Which packages are necessary to run which functions - Which functions include which arguments (and the default argument values) - Differences in relative paths depending on function and file locations</p>
</section>
<section id="w3c2-data-cleaning" class="slide level2">
<h2>💻 W3C2: Data Cleaning</h2>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Important</strong></p>
</div>
<div class="callout-content">
<p><strong>Important:</strong> These exercises include functions from tidyverse packages we will cover next class. Look ahead with the resources for next class or do what you can now and finish it next week.</p>
</div>
</div>
</div>
<p><strong>Find three data cleaning exercises (1 walkthrough example; 2 structured assignments) in the d2mr-assessment repo.</strong> Complete the mini-projects directly in the existing .qmd like a digital workbook.</p>
<ul>
<li class="fragment"><strong>Data cleaning walkthrough:</strong> Clean the iris Dataset (example, not a mini-project to complete/submit)</li>
<li class="fragment"><strong>Level 1 Data Cleaning:</strong> Clean the mtcars Dataset - Work with a simple dataset, focus on basic data cleaning tasks</li>
<li class="fragment"><strong>Level 2 Data Cleaning:</strong> Clean the midwest Dataset - Work with a more complex dataset, perform more involved cleaning tasks</li>
</ul>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p><strong>Assessed:</strong> 5, 6, 8, 9, 10, 11, 12; <strong>Unassessed:</strong> 1, 2, 9, 12, 13</p>
</div>
</div>
</div>
</section>
<section id="w3c2-group-uncleaning" class="slide level2 scrollable">
<h2>💻 W3C2: Group “Uncleaning”</h2>
<p><strong>Work together with a classmate to each “unclean” a dataset for the other(s) to clean.</strong> This will work best in pairs so that you can swap datasets but you can adjust things to do in a small group if you prefer.</p>
<ol type="1">
<li class="fragment">Each partner chooses a publicly available dataset (recommend the built-in ones)</li>
<li class="fragment">In a script or notebook, transform your df to make it messy and save to a .csv</li>
<li class="fragment">Swap your new messy data files</li>
<li class="fragment">In a (different) script or notebook, clean your partner’s messy data</li>
<li class="fragment">Discuss the process with your partner/group</li>
</ol>
<p><strong>Associated mini-project:</strong> <code>d2mr-assessment/01_data-cleaning/03_group-unclean</code></p>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p><strong>Assessed:</strong> 5, 6, 8, 9, 10, 11, 12; <strong>Unassessed:</strong> 1, 2, 5, 9, 14, 22</p>
</div>
</div>
</div>
</section></section>
<section>
<section id="resources" class="title-slide slide level1 center">
<h1>Resources 🗃️</h1>

</section>
<section id="todays-class" class="slide level2">
<h2>Today’s Class</h2>
<p><strong>tidyverse.org:</strong> <a href="https://www.tidyverse.org/">https://www.tidyverse.org/</a></p>
<p><strong>readr:</strong> - <a href="https://readr.tidyverse.org/">documentation</a> &amp; <a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/data-import.pdf">cheatsheet</a> - <a href="https://r4ds.hadley.nz/data-import">r4ds: 7 – Data import</a></p>
<p><strong>tibble:</strong> - <a href="https://tibble.tidyverse.org/">documentation</a> &amp; <a href="https://r4ds.had.co.nz/tibbles.html">r4ds: tibbles</a></p>
<p><strong>dplyr:</strong> - <a href="https://dplyr.tidyverse.org/">documentation</a> &amp; <a href="https://github.com/rstudio/cheatsheets/blob/main/data-transformation.pdf">cheatsheet</a> - <a href="https://r4ds.hadley.nz/data-transform">r4ds: 3 – Data transformation</a></p>
</section>
<section id="next-class" class="slide level2">
<h2>Next Class</h2>
<p><strong>tidyr:</strong> - <a href="https://tidyr.tidyverse.org/">documentation</a> &amp; <a href="https://rstudio.github.io/cheatsheets/html/tidyr.html">cheatsheet</a> - <a href="https://tidyr.tidyverse.org/articles/tidy-data.html">tidyverse guide to tidy data</a> - <a href="https://r4ds.hadley.nz/data-tidy">r4ds: 5 – Data tidying</a>*</p>
<p><strong>stringr:</strong> - <a href="https://stringr.tidyverse.org/">documentation</a> &amp; <a href="https://github.com/rstudio/cheatsheets/blob/main/strings.pdf">cheatsheet</a> - <a href="https://r4ds.hadley.nz/strings">r4ds: 14 – Strings</a>* - <a href="https://r4ds.hadley.nz/regexps">r4ds: 15 – Regular expressions</a></p>
</section>
<section id="more-resources" class="slide level2">
<h2>More Resources</h2>
<p><strong>forcats:</strong> - <a href="https://forcats.tidyverse.org/">documentation</a> &amp; <a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/factors.pdf">cheatsheet</a> - <a href="https://r4ds.hadley.nz/factors">r4ds: 16 – Factors</a>*</p>
<p><strong>purrr</strong> <em>(advanced, low priority for d2mr)</em>: - <a href="https://purrr.tidyverse.org/">documentation</a> &amp; <a href="https://github.com/rstudio/cheatsheets/blob/main/purrr.pdf">cheatsheet</a></p>
<p><strong>Quick Help:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a></a>?paste</span>
<span id="cb44-2"><a></a>?paste0</span>
<span id="cb44-3"><a></a>?filter</span>
<span id="cb44-4"><a></a>?read_csv</span>
<span id="cb44-5"><a></a>??read_csv  <span class="co"># search for functions</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>


</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">
<p>D2M-R I | Week 4</p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-code-focus/codefocus.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-fullscreen/fullscreen.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'fade',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1600,

        height: 900,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, RevealCodeFocus, RevealFullscreen, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
          const outerScaffold = trigger.parentElement.cloneNode(true);
          const codeEl = outerScaffold.querySelector('code');
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>