<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.45">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2026-01-27">

<title>Welcome to the Tidyverse – Data to Manuscript in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../images/icons/hex3.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/quarto-contrib/bootstrap-icons-1.13.1/bootstrap-icons.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Data to Manuscript in R</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-syllabus" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Syllabus</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-syllabus">    
        <li>
    <a class="dropdown-item" href="../syllabus/structure.html">
 <span class="dropdown-text">Course Structure</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../syllabus/communication.html">
 <span class="dropdown-text">Communication</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../syllabus/ai-policy.html">
 <span class="dropdown-text">AI Use</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../syllabus/climate.html">
 <span class="dropdown-text">Climate &amp; Inclusion</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-assessment" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Assessment</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-assessment">    
        <li>
    <a class="dropdown-item" href="../assessment/overview.html">
 <span class="dropdown-text">Overview</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../assessment/objectives.html">
 <span class="dropdown-text">Learning Objectives</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../assessment/accountability.html">
 <span class="dropdown-text">Accountability</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../assessment/engagement.html">
 <span class="dropdown-text">Community Engagement</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../assessment/menu.html">
 <span class="dropdown-text">Project Menu</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../assessment/enrichment.html">
 <span class="dropdown-text">Enrichment Activities</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../assessment/data-project.html">
 <span class="dropdown-text">Integrative Data Project</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-materials" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Materials</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-materials">    
        <li>
    <a class="dropdown-item" href="../github.com/d2m-r/book/index.html">
 <span class="dropdown-text">Textbook (WIP)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../materials/slides.html">
 <span class="dropdown-text">Slides</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../materials/course-resources.html">
 <span class="dropdown-text">Course Resources</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../materials/resources.html">
 <span class="dropdown-text">External Resources</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../materials/finding-data.html">
 <span class="dropdown-text">Finding Data</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="https://d2m-r.github.io/submit.html"> 
<span class="menu-text">Submit</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../d2m-r.github.io"> 
<span class="menu-text">FAQ</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#tidy-data" id="toc-tidy-data" class="nav-link active" data-scroll-target="#tidy-data">Tidy Data</a>
  <ul class="collapse">
  <li><a href="#what-makes-data-tidy" id="toc-what-makes-data-tidy" class="nav-link" data-scroll-target="#what-makes-data-tidy">What Makes Data “Tidy”?</a></li>
  <li><a href="#messy-vs.-tidy-example" id="toc-messy-vs.-tidy-example" class="nav-link" data-scroll-target="#messy-vs.-tidy-example">Messy vs.&nbsp;Tidy: Example</a></li>
  </ul></li>
  <li><a href="#terminology-detour" id="toc-terminology-detour" class="nav-link" data-scroll-target="#terminology-detour">Terminology Detour</a>
  <ul class="collapse">
  <li><a href="#messy-clean-tidy" id="toc-messy-clean-tidy" class="nav-link" data-scroll-target="#messy-clean-tidy">Messy, Clean, Tidy</a></li>
  <li><a href="#messy-is-messy" id="toc-messy-is-messy" class="nav-link" data-scroll-target="#messy-is-messy">“Messy” is messy</a></li>
  <li><a href="#tidy-data-iris" id="toc-tidy-data-iris" class="nav-link" data-scroll-target="#tidy-data-iris">Tidy Data: Iris</a></li>
  <li><a href="#data-preparation-terms" id="toc-data-preparation-terms" class="nav-link" data-scroll-target="#data-preparation-terms">Data Preparation Terms</a></li>
  </ul></li>
  <li><a href="#tidyverse-packages" id="toc-tidyverse-packages" class="nav-link" data-scroll-target="#tidyverse-packages">Tidyverse Packages</a></li>
  <li><a href="#tibble" id="toc-tibble" class="nav-link" data-scroll-target="#tibble"><code>tibble</code></a>
  <ul class="collapse">
  <li><a href="#tibble-better-data-frames" id="toc-tibble-better-data-frames" class="nav-link" data-scroll-target="#tibble-better-data-frames"><code>tibble</code>: Better Data Frames</a></li>
  <li><a href="#tibble-implicit-data" id="toc-tibble-implicit-data" class="nav-link" data-scroll-target="#tibble-implicit-data"><code>tibble</code>: implicit <code>data</code></a></li>
  </ul></li>
  <li><a href="#readr" id="toc-readr" class="nav-link" data-scroll-target="#readr"><code>readr</code></a>
  <ul class="collapse">
  <li><a href="#readr-read-write-tibbles" id="toc-readr-read-write-tibbles" class="nav-link" data-scroll-target="#readr-read-write-tibbles"><code>readr</code>: Read &amp; Write Tibbles</a></li>
  <li><a href="#what-where" id="toc-what-where" class="nav-link" data-scroll-target="#what-where">What &amp; Where</a></li>
  <li><a href="#relative-relativity" id="toc-relative-relativity" class="nav-link" data-scroll-target="#relative-relativity">Relative relativity</a></li>
  <li><a href="#importing-with-readr" id="toc-importing-with-readr" class="nav-link" data-scroll-target="#importing-with-readr">Importing with <code>readr</code></a></li>
  <li><a href="#exporting-with-readr" id="toc-exporting-with-readr" class="nav-link" data-scroll-target="#exporting-with-readr">Exporting with <code>readr</code></a></li>
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section"></a></li>
  <li><a href="#bonus-readxl-googlesheets4" id="toc-bonus-readxl-googlesheets4" class="nav-link" data-scroll-target="#bonus-readxl-googlesheets4">Bonus: <code>readxl</code> &amp; <code>googlesheets4</code></a></li>
  <li><a href="#practice-read-write-1" id="toc-practice-read-write-1" class="nav-link" data-scroll-target="#practice-read-write-1">Practice: Read &amp; Write (1)</a></li>
  <li><a href="#practice-read-write-2" id="toc-practice-read-write-2" class="nav-link" data-scroll-target="#practice-read-write-2">Practice: Read &amp; Write (2)</a></li>
  </ul></li>
  <li><a href="#dplyr" id="toc-dplyr" class="nav-link" data-scroll-target="#dplyr"><code>dplyr</code></a>
  <ul class="collapse">
  <li><a href="#dplyr-data-transformation" id="toc-dplyr-data-transformation" class="nav-link" data-scroll-target="#dplyr-data-transformation"><code>dplyr</code>: Data Transformation</a></li>
  <li><a href="#select-subset-columns" id="toc-select-subset-columns" class="nav-link" data-scroll-target="#select-subset-columns"><code>select</code>: Subset columns</a></li>
  <li><a href="#select-rename-reorder-columns" id="toc-select-rename-reorder-columns" class="nav-link" data-scroll-target="#select-rename-reorder-columns"><code>select</code>: Rename &amp; reorder columns</a></li>
  <li><a href="#select-helpers" id="toc-select-helpers" class="nav-link" data-scroll-target="#select-helpers"><code>select</code> Helpers</a></li>
  <li><a href="#filter-subset-rows" id="toc-filter-subset-rows" class="nav-link" data-scroll-target="#filter-subset-rows"><code>filter</code>: Subset rows</a></li>
  <li><a href="#filter-subset-rows-1" id="toc-filter-subset-rows-1" class="nav-link" data-scroll-target="#filter-subset-rows-1"><code>filter</code>: Subset rows</a></li>
  <li><a href="#arrange-sort-rows" id="toc-arrange-sort-rows" class="nav-link" data-scroll-target="#arrange-sort-rows"><code>arrange</code>: Sort rows</a></li>
  <li><a href="#mutate-create-modify-columns" id="toc-mutate-create-modify-columns" class="nav-link" data-scroll-target="#mutate-create-modify-columns"><code>mutate</code>: Create &amp; modify columns</a></li>
  <li><a href="#summarize-group_by-compute-summary-values" id="toc-summarize-group_by-compute-summary-values" class="nav-link" data-scroll-target="#summarize-group_by-compute-summary-values"><code>summarize</code> &amp; <code>group_by</code>: Compute summary values</a></li>
  </ul></li>
  <li><a href="#magrittr-pipes" id="toc-magrittr-pipes" class="nav-link" data-scroll-target="#magrittr-pipes"><code>magrittr</code> &amp; pipes</a>
  <ul class="collapse">
  <li><a href="#the-pipe-operators" id="toc-the-pipe-operators" class="nav-link" data-scroll-target="#the-pipe-operators">The Pipe Operator(s)</a></li>
  <li><a href="#pipe-example-18" id="toc-pipe-example-18" class="nav-link" data-scroll-target="#pipe-example-18">Pipe Example (1/8)</a></li>
  <li><a href="#pipe-example-28" id="toc-pipe-example-28" class="nav-link" data-scroll-target="#pipe-example-28">Pipe Example (2/8)</a></li>
  <li><a href="#pipe-example-38" id="toc-pipe-example-38" class="nav-link" data-scroll-target="#pipe-example-38">Pipe Example (3/8)</a></li>
  <li><a href="#pipe-example-48" id="toc-pipe-example-48" class="nav-link" data-scroll-target="#pipe-example-48">Pipe Example (4/8)</a></li>
  <li><a href="#pipe-example-58" id="toc-pipe-example-58" class="nav-link" data-scroll-target="#pipe-example-58">Pipe Example (5/8)</a></li>
  <li><a href="#pipe-example-68" id="toc-pipe-example-68" class="nav-link" data-scroll-target="#pipe-example-68">Pipe Example (6/8)</a></li>
  <li><a href="#pipe-example-78" id="toc-pipe-example-78" class="nav-link" data-scroll-target="#pipe-example-78">Pipe Example (7/8)</a></li>
  <li><a href="#pipe-example-88" id="toc-pipe-example-88" class="nav-link" data-scroll-target="#pipe-example-88">Pipe Example (8/8)</a></li>
  </ul></li>
  <li><a href="#combining-datasets" id="toc-combining-datasets" class="nav-link" data-scroll-target="#combining-datasets">Combining datasets</a>
  <ul class="collapse">
  <li><a href="#bind-and-join-datasets" id="toc-bind-and-join-datasets" class="nav-link" data-scroll-target="#bind-and-join-datasets">Bind and join datasets</a></li>
  <li><a href="#example-tibbles" id="toc-example-tibbles" class="nav-link" data-scroll-target="#example-tibbles">Example Tibbles</a></li>
  <li><a href="#binding-rows" id="toc-binding-rows" class="nav-link" data-scroll-target="#binding-rows">Binding Rows</a></li>
  <li><a href="#binding-columns" id="toc-binding-columns" class="nav-link" data-scroll-target="#binding-columns">Binding Columns</a></li>
  <li><a href="#joins-sql-style" id="toc-joins-sql-style" class="nav-link" data-scroll-target="#joins-sql-style">Joins (SQL-style)</a></li>
  <li><a href="#left_join-keep-left-df-rows" id="toc-left_join-keep-left-df-rows" class="nav-link" data-scroll-target="#left_join-keep-left-df-rows"><code>left_join</code>: Keep left-df rows</a></li>
  <li><a href="#right_join-keep-right-df-rows" id="toc-right_join-keep-right-df-rows" class="nav-link" data-scroll-target="#right_join-keep-right-df-rows"><code>right_join</code>: Keep right-df rows</a></li>
  <li><a href="#inner_join-keep-only-matched-rows" id="toc-inner_join-keep-only-matched-rows" class="nav-link" data-scroll-target="#inner_join-keep-only-matched-rows"><code>inner_join</code>: Keep only matched rows</a></li>
  <li><a href="#full_join-keep-all-rows" id="toc-full_join-keep-all-rows" class="nav-link" data-scroll-target="#full_join-keep-all-rows"><code>full_join</code>: Keep all rows</a></li>
  </ul></li>
  <li><a href="#tidyr" id="toc-tidyr" class="nav-link" data-scroll-target="#tidyr"><code>tidyr</code></a>
  <ul class="collapse">
  <li><a href="#example-data-frame-for-tidyr" id="toc-example-data-frame-for-tidyr" class="nav-link" data-scroll-target="#example-data-frame-for-tidyr">Example data frame for <code>tidyr</code></a></li>
  <li><a href="#tidyr-tidy-messy-data" id="toc-tidyr-tidy-messy-data" class="nav-link" data-scroll-target="#tidyr-tidy-messy-data"><code>tidyr</code>: Tidy messy data</a></li>
  <li><a href="#wide-vs.-long-data" id="toc-wide-vs.-long-data" class="nav-link" data-scroll-target="#wide-vs.-long-data">Wide vs.&nbsp;Long Data</a></li>
  <li><a href="#pivot_longer-reshape-wide-to-long" id="toc-pivot_longer-reshape-wide-to-long" class="nav-link" data-scroll-target="#pivot_longer-reshape-wide-to-long"><code>pivot_longer</code>: Reshape wide to long</a></li>
  <li><a href="#pivot_wider-reshape-wide-to-long" id="toc-pivot_wider-reshape-wide-to-long" class="nav-link" data-scroll-target="#pivot_wider-reshape-wide-to-long"><code>pivot_wider</code>: Reshape wide to long</a></li>
  <li><a href="#separate_wider_delim-split-column-into-multiple-columns" id="toc-separate_wider_delim-split-column-into-multiple-columns" class="nav-link" data-scroll-target="#separate_wider_delim-split-column-into-multiple-columns"><code>separate_wider_delim</code>: Split column into multiple columns</a></li>
  <li><a href="#unite-collapse-multiple-columns-into-one" id="toc-unite-collapse-multiple-columns-into-one" class="nav-link" data-scroll-target="#unite-collapse-multiple-columns-into-one"><code>unite</code>: Collapse multiple columns into one</a></li>
  <li><a href="#tools-for-handling-incomplete-and-missing-data" id="toc-tools-for-handling-incomplete-and-missing-data" class="nav-link" data-scroll-target="#tools-for-handling-incomplete-and-missing-data">Tools for handling incomplete and missing data</a></li>
  <li><a href="#expand-complete-create-missing-combinations" id="toc-expand-complete-create-missing-combinations" class="nav-link" data-scroll-target="#expand-complete-create-missing-combinations"><code>expand</code> &amp; <code>complete</code>: Create missing combinations</a></li>
  <li><a href="#drop_na-replace_na-drop-and-replace-missing-values" id="toc-drop_na-replace_na-drop-and-replace-missing-values" class="nav-link" data-scroll-target="#drop_na-replace_na-drop-and-replace-missing-values"><code>drop_na</code> &amp; <code>replace_na</code>: Drop and replace missing values</a></li>
  <li><a href="#fill-dependently-replace-missing-values" id="toc-fill-dependently-replace-missing-values" class="nav-link" data-scroll-target="#fill-dependently-replace-missing-values"><code>fill</code>: Dependently replace missing values</a></li>
  <li><a href="#nesting" id="toc-nesting" class="nav-link" data-scroll-target="#nesting">Nesting</a></li>
  </ul></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">Summary</a>
  <ul class="collapse">
  <li><a href="#tidyverse-workflow" id="toc-tidyverse-workflow" class="nav-link" data-scroll-target="#tidyverse-workflow">Tidyverse Workflow</a></li>
  <li><a href="#processflow-with-icons" id="toc-processflow-with-icons" class="nav-link" data-scroll-target="#processflow-with-icons">Process/flow with icons</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="Q1-W4_tidyverse-1.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Welcome to the Tidyverse</h1>
<p class="subtitle lead">ecosystem, read-in/-out, data manipulation</p>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 27, 2026</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="tidy-data" class="level1 page-columns page-full">
<h1>Tidy Data</h1>
<section id="what-makes-data-tidy" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="what-makes-data-tidy">What Makes Data “Tidy”?</h2>
<div class="r-stack">
<p><img src="../images/tidyverse/tidy-data-def-frag1.jpg" class="fragment" height="700"></p>
<p><img src="../images/tidyverse/tidy-data-def-frag2.jpg" class="fragment" height="700"></p>
<p><img src="../images/tidyverse/tidy-data-def-frag3.jpg" class="fragment" height="700"></p>
<p><img src="../images/tidyverse/tidy-data-def-frag4.jpg" class="fragment" height="700"></p>
<p><img src="../images/tidyverse/tidy-data-def-frag5-FULL.jpg" class="fragment" height="700"></p>
</div>
<aside>
Illustrations from the <a href="https://www.openscapes.org/">Openscapes</a> blog <a href="https://www.openscapes.org/blog/2020/10/12/tidy-data/">Tidy Data for reproducibility, efficiency, and collaboration</a> by Julia Lowndes and Allison Horst
</aside>
<hr>
<p><img src="../images/tidyverse/tolstoy.png" class="absolute" data-top="0" data-right="0" height="200"></p>
<p><img src="../images/tidyverse/tidy-data-quote-frag1.jpg" class="fragment" height="300"></p>
<p><img src="../images/tidyverse/tidy-data-quote-frag2.jpg" class="fragment" height="300"></p>
<hr>
<div class="columns">
<div class="column">
<p><img src="../images/tidyverse/tidy-data-workshop-frag1.jpg" class="fragment" height="800"></p>
</div><div class="column">
<p><img src="../images/tidyverse/tidy-data-workshop-frag2.jpg" class="fragment" height="800"></p>
</div>
</div>
</section>
<section id="messy-vs.-tidy-example" class="level2" data-background-image="../images/misc/mms.jpg" data-background-opacity="0.1">
<h2 data-background-image="../images/misc/mms.jpg" data-background-opacity="0.1" class="anchored" data-anchor-id="messy-vs.-tidy-example">Messy vs.&nbsp;Tidy: Example</h2>
<div class="container-fluid" style="margin-top: -150px;">
<div class="row" style="margin-bottom: 50px;">
<div class="col-6">

</div>
<div class="col-6">
<div class="callout callout-style-default callout-important callout-titled" style="font-size: 1.2em;">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
These tables hold exactly the same data!
</div>
</div>
<div class="callout-body-container callout-body">
<p>What are the differences? What are the advantages of each?</p>
</div>
</div>
</div>
</div>
<div class="row">
<div class="col-7">
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>mm.raw</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 30 × 8
     Bag   Red Green  Blue Orange Yellow Brown Weight
   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
 1     1    15     9     3      3      9    19   49.8
 2     2     9    17    19      3      3     8   49.0
 3     3    14     8     6      8     19     4   50.4
 4     4    15     7     3      8     16     8   49.2
 5     5    10     3     7      9     22     4   47.6
 6     6    12     7     6      5     17    11   49.8
 7     7     6     7     3      6     26    10   50.2
 8     8    14    11     4      1     14    17   51.7
 9     9     4     2    10      6     18    18   48.4
10    10     9     9     3      9      8    15   46.2
# ℹ 20 more rows</code></pre>
</div>
</div>
</div>
<div class="col-5">
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>mm.tidy</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 180 × 4
     Bag Color  Number Bag_Weight
   &lt;int&gt; &lt;chr&gt;   &lt;dbl&gt;      &lt;dbl&gt;
 1     1 Red        15       49.8
 2     1 Green       9       49.8
 3     1 Blue        3       49.8
 4     1 Orange      3       49.8
 5     1 Yellow      9       49.8
 6     1 Brown      19       49.8
 7     2 Red         9       49.0
 8     2 Green      17       49.0
 9     2 Blue       19       49.0
10     2 Orange      3       49.0
# ℹ 170 more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="bubble-chain">
<p class="bubble-left fragment">
That messy data looks pretty clean to me…
</p>
<p class="bubble-right fragment">
It <em>is</em> clean! It’s just not <strong>tidy</strong>.
</p>
</div>
</section>
</section>
<section id="terminology-detour" class="level1">
<h1>Terminology Detour</h1>
<section id="messy-clean-tidy" class="level2">
<h2 class="anchored" data-anchor-id="messy-clean-tidy">Messy, Clean, Tidy</h2>
<div class="container-fluid">
<div class="row">
<div class="col-6">
<div class="card fragment h-100" style="font-size: .8em">
<div class="card-header">
<div class="card-title" style="color: #fff">
<p>Messy data:</p>
</div>
</div>
<div class="card-body lessgap">
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>mm.raw</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 30 × 8
     Bag   Red Green  Blue Orange Yellow Brown Weight
   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
 1     1    15     9     3      3      9    19   49.8
 2     2     9    17    19      3      3     8   49.0
 3     3    14     8     6      8     19     4   50.4
 4     4    15     7     3      8     16     8   49.2
 5     5    10     3     7      9     22     4   47.6
 6     6    12     7     6      5     17    11   49.8
 7     7     6     7     3      6     26    10   50.2
 8     8    14    11     4      1     14    17   51.7
 9     9     4     2    10      6     18    18   48.4
10    10     9     9     3      9      8    15   46.2
# ℹ 20 more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="col-6">
<div class="card card-alt1 fragment h-100" style="font-size: .8em">
<div class="card-header">
<div class="card-title" style="color: #fff">
<p>Also messy data:</p>
</div>
</div>
<div class="card-body lessgap">
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>mm.messy</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 39 × 8
   ID    RED   X     GREEN WT.GRAM  Blue  Orannge Ylw. 
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;
 1 "1 "  "15"  "19 " "9 "  "49.79 " "3 "  "3 "    "9 " 
 2 "1 "  "15"  "19 " "9 "  "49.79 " "3 "  "3 "    "9 " 
 3 "2 "  "9"   "8 "  "17 " "48.98 " "19 " &lt;NA&gt;    "3 " 
 4 "3 "   &lt;NA&gt; "4 "  "8 "  "50.4 "  "6 "  "8 "    "19 "
 5 "4 "  "15 " "8 "  "7 "  "49.16 "  &lt;NA&gt; "8 "    "16 "
 6 "5"   "10 " "4 "  "3 "  "47.61 " "7 "  &lt;NA&gt;     &lt;NA&gt;
 7 "6 "  "12 " "11 " "7 "  "49.8"   "6 "  "5 "    "17 "
 8 "7 "  "6 "  "10 " "7 "  "50.23 " "3 "  "6 "    "26 "
 9 "8 "  "14 " "17 " "11 " "51.68 " "4 "  &lt;NA&gt;    "14 "
10 "8 "   &lt;NA&gt; "17 " "11 " "51.68 " "4 "  "1 "    "14 "
# ℹ 29 more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="notes">
<p><strong>messy ≠ bad</strong> (except in the tidyverse context)</p>
<ul>
<li>Data wrangling starts with reading your data, then prepping it for visualization &amp; analysis</li>
<li>To use tidyverse packages, this prepping includes tidying messy data</li>
<li>This can be shockingly complicated and time-consuming!</li>
</ul>
</div>
</section>
<section id="messy-is-messy" class="level2">
<h2 class="anchored" data-anchor-id="messy-is-messy">“Messy” is messy</h2>
<p><strong>Messy</strong> can either mean “not clean” or “not tidy”</p>
<ul>
<li><strong>Always bad:</strong> unclean + untidy (= messy)</li>
<li><strong>Sometimes good:</strong> clean + untidy (= messy)</li>
<li><strong>Usually good:</strong> clean + tidy (= tidy)</li>
</ul>
<div class="bubble-chain">
<p class="bubble-left fragment">
It would make more sense to call it “untidy.”
</p>
<p class="bubble-right fragment">
You are not wrong.
</p>
</div>
</section>
<section id="tidy-data-iris" class="level2">
<h2 class="anchored" data-anchor-id="tidy-data-iris">Tidy Data: Iris</h2>
<div class="container-fluid">
<div class="row">
<div class="col-4">
<p>The <code>iris</code> dataset is a classic example of tidy data.</p>
<p>Which of these two versions of <code>iris</code> is tidy?</p>
</div>
<div class="col-8" style="margin-top: -4.5em; padding-bottom: 1em;">
<div class="overlap-box smaller">
<div class="box-title">
<p>In tidy data:</p>
</div>
<div class="box-content">
<div class="nonincremental">
<ol>
<li>
Each variable is one column.
</li>
<li>
Each observation is one row.
</li>
<li>
Each measurement is one cell.
</li>
<li class="fragment">
<strong>Each unit depends on the research question.</strong>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="row">
<div class="col-7">
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>iris_1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1           5.1         3.5          1.4         0.2  setosa
2           4.9         3.0          1.4         0.2  setosa
3           4.7         3.2          1.3         0.2  setosa
4           4.6         3.1          1.5         0.2  setosa
5           5.0         3.6          1.4         0.2  setosa
6           5.4         3.9          1.7         0.4  setosa
7           4.6         3.4          1.4         0.3  setosa
8           5.0         3.4          1.5         0.2  setosa
9           4.4         2.9          1.4         0.2  setosa
10          4.9         3.1          1.5         0.1  setosa</code></pre>
</div>
</div>
</div>
<div class="col-5">
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>iris_2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 4
   Species Flower_Part Measurement_Type value
   &lt;fct&gt;   &lt;chr&gt;       &lt;chr&gt;            &lt;dbl&gt;
 1 setosa  Sepal       Length             5.1
 2 setosa  Sepal       Width              3.5
 3 setosa  Petal       Length             1.4
 4 setosa  Petal       Width              0.2
 5 setosa  Sepal       Length             4.9
 6 setosa  Sepal       Width              3  
 7 setosa  Petal       Length             1.4
 8 setosa  Petal       Width              0.2
 9 setosa  Sepal       Length             4.7
10 setosa  Sepal       Width              3.2</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="notes">
<p>Consider <code>iris</code>—each row is one flower with four morphological measurements (sepal length, sepal width, petal length, petal width). This is tidy for the question: <strong>“What morphological features distinguish these species?”</strong></p>
<p>Could you pivot <code>iris</code> longer with columns for <code>flower_part</code> (sepal/petal) and <code>measurement_type</code> (length/width)? Yes. Would it be tidy? Also yes—but for a different question: <strong>“What determines the size of flower parts in general?”</strong></p>
<p><strong>The key distinction:</strong> Are your columns measuring different variables or different levels of the same variable?</p>
<ul>
<li><strong>Different variables</strong> → Keep separate columns</li>
<li><strong>Different levels</strong> → Pivot longer</li>
</ul>
<p>Tidiness isn’t absolute. It’s defined by your analytical question. The same dataset can be tidy in multiple forms depending on what you’re studying.</p>
</div>
</section>
<section id="data-preparation-terms" class="level2">
<h2 class="anchored" data-anchor-id="data-preparation-terms">Data Preparation Terms</h2>
<div style="font-size: .9em">
<table class="caption-top table">
<colgroup>
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 35%">
</colgroup>
<thead>
<tr class="header">
<th>Process</th>
<th>Start State</th>
<th>Goal</th>
<th>End State</th>
<th>Examples</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Data Cleaning:</strong> <br> Error correction</td>
<td><span class="fragment" data-fragment-index="1">Raw data</span></td>
<td><span class="fragment" data-fragment-index="2">Accuracy, consistency, legibility</span></td>
<td><span class="fragment" data-fragment-index="3">Clean data, not yet specialized</span></td>
<td><span class="fragment" data-fragment-index="4">Removing duplicate data<br>Correcting syntax errors<br>Fixing typos<br>Handling missing values<br>Change data types</span></td>
</tr>
<tr class="even">
<td><strong>Data Wrangling:</strong> <br> Data preparation</td>
<td><span class="fragment" data-fragment-index="5">Clean data</span></td>
<td><span class="fragment" data-fragment-index="6">Usability for medium-scope purpose</span></td>
<td><span class="fragment" data-fragment-index="7">Interpretable and specialized data, not yet analyzable</span></td>
<td><span class="fragment" data-fragment-index="8">Preparing for narrow use cases<br>Grouping and summarizing<br>Transforming variables or values</span></td>
</tr>
<tr class="odd">
<td><strong>Data Transformation:</strong> <br> Data restructuring</td>
<td><span class="fragment" data-fragment-index="9">Interpretable data</span></td>
<td><span class="fragment" data-fragment-index="10">Usability for narrow-scope tasks</span></td>
<td><span class="fragment" data-fragment-index="11">Analyzable and visualizable data</span></td>
<td><span class="fragment" data-fragment-index="12">Reshaping long ↔︎ wide<br>Generating new data-based variables<br>Merging datasets<br>Eliminating unnecessary data</span></td>
</tr>
</tbody>
</table>
</div>
<div class="bubble-chain">
<p class="bubble-left fragment">
You use them differently in the core project instructions!
</p>
<p class="bubble-left fragment">
Those are the same thing!
</p>
<p class="bubble-left fragment">
That’s not what I learned!
</p>
<p class="bubble-right fragment">
<strong>OK FINE. Yes. You’re all correct.</strong> You’re also all incorrect. Honestly it doesn’t really matter. Just mess with your data until they are usable. Call it what you want as long as it works.
</p>
</div>
</section>
</section>
<section id="tidyverse-packages" class="level1">
<h1>Tidyverse Packages</h1>
<div class="r-stretch" style="display: grid; grid-template-columns: repeat(4, 1fr); grid-template-rows: minmax(0, 1fr) minmax(0, 1fr); gap: 0.8em; padding-bottom: 1em;">
<div class="contained-box accent1 fragment" style="display: flex; flex-direction: column; align-items: center;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><img src="../images/icons/tv-icons/tibble.png" class="img-fluid" style="max-height: 2em;"></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="pkg">tibble</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>Reimagine the dataframe</p>
</div>
</div>
<div class="contained-box accent1 fragment" style="display: flex; flex-direction: column; align-items: center;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><img src="../images/icons/tv-icons/readr.png" class="img-fluid" style="max-height: 2em;"></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="pkg">readr</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>import and export tabular data</p>
</div>
</div>
<div class="contained-box accent1 fragment" style="display: flex; flex-direction: column; align-items: center;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><img src="../images/icons/tv-icons/dplyr.png" class="img-fluid" style="max-height: 2em;"></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="pkg">dplyr</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>a grammar of data manipulation</p>
</div>
</div>
<div class="contained-box accent1 fragment" style="display: flex; flex-direction: column; align-items: center;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><img src="../images/icons/tv-icons/tidyr.png" class="img-fluid" style="max-height: 2em;"></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="pkg">tidyr</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>tidy your messy data</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><img src="../images/icons/tv-icons/purrr.png" class="img-fluid" style="max-height: 2em;"></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="pkg">purrr</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>enhance R’s functional programming</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><img src="../images/icons/tv-icons/stringr.png" class="img-fluid" style="max-height: 2em;"></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="pkg">stringr</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>simplify working with strings</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><img src="../images/icons/tv-icons/forcats.png" class="img-fluid" style="max-height: 2em;"></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="pkg">forcats</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>simplify working with factors</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><img src="../images/icons/tv-icons/ggplot2.png" class="img-fluid" style="max-height: 2em;"></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="pkg">ggplot2</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>a grammar of graphics</p>
</div>
</div>
</div>
</section>
<section id="tibble" class="level1">
<h1><code>tibble</code></h1>
<section id="tibble-better-data-frames" class="level2 left-sidebar-slide" data-fullscreen="true" style="font-size: .8;">
<h2 class="left-sidebar-slide anchored" data-fullscreen="true" style="font-size: .8;" data-anchor-id="tibble-better-data-frames"><code>tibble</code>: Better Data Frames</h2>
<p><img src="../images/icons/tv-icons/tibble.png" class="absolute" data-top=".5em" data-left="1em">)</p>
<div class="sidebar-column">
<div class="sidebar-title">
<p><span class="pkg">tibble</span>: <br>Better data frames</p>
</div>
<div class="sidebar-content" style="font-size: .8em">
<ul>
<li>Adaptation of base R’s <code>data.frame</code></li>
<li>Tibbles are <em>also</em> data.frames
<ul>
<li>Check with <code>class()</code> or <code>str()</code></li>
</ul></li>
<li>Tidyverse functions work with tibbles
<ul>
<li>usually add the <code>tibble</code> class automatically</li>
</ul></li>
<li>Functionally equivalent</li>
</ul>
</div>
</div>
<div class="main-content">
<div class="r-stack">
<p><img src="../images/screenshots/iris-tabular.png" class="fragment img-fluid" style="position: absolute; width: 60%; top: 2em; left: 2em;"></p>
<p><img src="../images/screenshots/iris-dataframe.png" class="fragment img-fluid" style="position: absolute; width: 60%; top: 50%; left: 50%; transform: translate(-50%, -50%);"></p>
<p><img src="../images/screenshots/iris-tibble.png" class="fragment img-fluid" style="position: absolute; width: 60%; bottom: 2em; right: 2em;"></p>
</div>
</div>
<div class="notes">
<p>Adaptation of base R’s data.frame structure that makes a lot of things easier Tibbles are also data.frames (check the class() or str() functions) Tidyverse package(s) work with tibbles, not base data.frames Load the tidyverse library to use tibble-related functions</p>
</div>
</section>
<section id="tibble-implicit-data" class="level2">
<h2 class="anchored" data-anchor-id="tibble-implicit-data"><code>tibble</code>: implicit <code>data</code></h2>
<p><img src="../images/icons/tv-icons/tibble.png" class="absolute" data-top="-1.5em" data-right="0em"></p>
<ul>
<li>Most Tidyverse functions <em>take</em> and <em>return</em> tibbles
<ul>
<li>Notably <code>dplyr</code>, <code>tidyr</code>, and <code>ggplot2</code></li>
<li>Tibble is the required first argument (i.e., <code>data</code>)</li>
</ul></li>
<li>As standalone functions, these require an explicit tibble argument:
<ul>
<li>1st arg: <code>function(my_tbl, arg1, arg2)</code></li>
<li>Anywhere: <code>function(arg1, arg2, data = my_tbl)</code></li>
</ul></li>
<li>In <em>pipelines</em> using (<code>%&gt;%</code> or <code>|&gt;</code>), the tibble is implicit (omitted)
<ul>
<li>Tibble output from <code>function1()</code> pipes <code>|&gt;</code> to tibble input for <code>function2()</code></li>
<li><code>function1(data, arg1, arg2) %&gt;% function2(arg1, arg2)</code></li>
</ul></li>
</ul>
<div class="large fragment callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
More on pipes later
</div>
</div>
<div class="callout-body-container callout-body">
<p>More on the pipe operator and pipelines later. For now, know that when these slides show non-executed examples as <code>function(arg1, arg2)</code> as shorthand for <code>function(data, arg1, arg2)</code>.</p>
</div>
</div>
<div class="notes">
<p>The first argument for most tidyverse functions is <code>data</code>, the <code>tbl</code> passed to the function.</p>
<p>When running a tidyverse function on its own, you must include the tibble explicitly as a required argument either unnamed in the first position (<code>function(my_tbl, arg1, arg2)</code>) or anywhere by name (<code>function(arg1, arg2, data = my_tbl)</code>).</p>
<p>However, tidyverse functions are often used in a <em>pipeline</em> where the tibble is passed from one function to the next using a pipe operator (<code>%&gt;%</code> or <code>|&gt;</code>). Since tidyverse functions both <em>take</em> and <em>return</em> a tibble, the pipe automatically passes the output of one function as the first argument (<code>data</code>) of the next function in the chain, letting you omit it.</p>
<p>More on the pipe later. For now, know that when these slides show non-executed examples as <code>function(arg1, arg2)</code> as shorthand for <code>function(data, arg1, arg2)</code>.</p>
</div>
</section>
</section>
<section id="readr" class="level1 page-columns page-full">
<h1><code>readr</code></h1>
<section id="readr-read-write-tibbles" class="level2 left-sidebar-slide" data-fullscreen="true" style="font-size: .8;">
<h2 class="left-sidebar-slide anchored" data-fullscreen="true" style="font-size: .8;" data-anchor-id="readr-read-write-tibbles"><code>readr</code>: Read &amp; Write Tibbles</h2>
<p><img src="../images/icons/tv-icons/readr.png" class="absolute" data-top=".5em" data-left="1em">)</p>
<div class="sidebar-column">
<div class="sidebar-title">
<p><span class="pkg">readr</span>: <br> Read &amp; Write Tibbles</p>
</div>
<div class="sidebar-content" style="font-size: .8em">
<ul>
<li>Import/export tabular data as tibbles</li>
<li>Functions start with <code>read_*()</code> and <code>write_*()</code></li>
<li>Handle common file types: CSV, TSV, delimited, fixed-width</li>
<li>Other packages for Excel, SPSS, Google Sheets, JSON, databases</li>
</ul>
</div>
</div>
<div class="main-content">
<p><img src="../images/screenshots/readr-specify.png" class="img-fluid" style="position: absolute; width: 80%; top: 50%; left: 50%; transform: translate(-50%, -50%);"></p>
</div>
</section>
<section id="what-where" class="level2">
<h2 class="anchored" data-anchor-id="what-where">What &amp; Where</h2>
<p><img src="../images/icons/tv-icons/readr.png" class="absolute" data-top="-1.5em" data-right="0em"></p>
<div class="container-fluid">
<div class="row d-flex">
<div class="col-6 d-flex">
<div class="overlap-box h-100 w-100 d-flex flex-column">
<div class="box-title">
<p>Determine import function:</p>
</div>
<div class="box-content flex-grow-1">
<ul>
<li>File extension?</li>
<li>Field separators?</li>
<li>Column names?</li>
<li>Non-tabular content?</li>
<li>Multiple sheets?</li>
</ul>
</div>
</div>
</div>
<div class="col-6 d-flex">
<div class="overlap-box accent1 h-100 w-100 d-flex flex-column">
<div class="box-title">
<p>Determine file path:</p>
</div>
<div class="box-content flex-grow-1">
<ul>
<li>Located in your repo</li>
<li>Protected data
<ul>
<li>Add to <code>.gitignore</code> or <code>localonly</code></li>
<li>Only call in your <em>local</em> R scripts</li>
</ul></li>
<li>Shared data
<ul>
<li>In git-managed directory</li>
<li>Callable by any/all scripts</li>
</ul></li>
<li>Use relative paths</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="relative-relativity" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="relative-relativity">Relative relativity</h2>
<div class="card" style="font-size: 1.1em; font-weight: bolder; text-align: center; border-width:8px; border-color: #c00; flex: 1 1 100%; background-color: #ffeaa9; margin-bottom: 1.5em;">
<div class="card-body" style="display: flex; align-items: center; justify-content: center; gap: .1em;">
<p><img src="../images/icons/priority.png" class="img-fluid" style="max-height: 3em;"></p>
<p>Quarto documents handle relative paths differently than R scripts.</p>
<p><img src="../images/icons/priority.png" class="img-fluid" style="max-height: 3em;"></p>
</div>
</div>
<p>In scripts, relative paths are relative to <em>the working directory</em>, your repo or project’s top-level. In Quarto docs, relative paths are relative to <em>the location of the Quarto file itself</em>.</p>
<p>If you work in a single <code>.qmd</code> in the top-level of your repo, these are equivalent. Read from: <code>repo_name/data/file.csv</code></p>
<p>If your <code>.qmd</code> is in any subfolder, you’ll need to adjust. To read the same file from a code chunk in <code>repo_name/quarto/document.qmd</code>, use: <code>../data/file.csv</code></p>
<p>This is for <em>all</em> file operations, not just <code>readr</code> functions.</p>

<div class="no-row-height column-margin column-container"><div class="margin-aside">
<p><a href="https://github.com/rstudio/cheatsheets/blob/main/data-import.pdf"><code>readr</code> cheatsheet</a></p>
</div></div></section>
<section id="importing-with-readr" class="level2 left-sidebar-slide" data-fullscreen="true" style="font-size: .8;">
<h2 class="left-sidebar-slide anchored" data-fullscreen="true" style="font-size: .8;" data-anchor-id="importing-with-readr">Importing with <code>readr</code></h2>
<p><img src="../images/icons/tv-icons/readr.png" class="absolute" data-top="1em" data-right="1em">)</p>
<div class="sidebar-column">
<div class="sidebar-title">
<p><strong>Importing</strong> with <span class="pkg">readr</span>: <code>read_*()</code></p>
</div>
<div class="sidebar-content">
<ul>
<li><code>read_*()</code> import tabular data as tibbles</li>
<li>Optional <code>col_types</code> &amp; <code>col_names</code> arguments:</li>
<li>Assign to object to save imported data</li>
</ul>
</div>
</div>
<div class="main-content" style="padding-right: 5em;">
<div class="sourceCode" id="cb13" style="margin-bottom: .5em"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Common read functions</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>()    <span class="co"># Comma separated values</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv2</span>()   <span class="co"># Semicolon separator (comma = decimal)</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="fu">read_tsv</span>()    <span class="co"># Tab separated values</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="fu">read_delim</span>()  <span class="co"># Any delimiter</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="fu">read_fwf</span>()    <span class="co"># Fixed width files</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="fu">read_table</span>()  <span class="co"># Whitespace separated</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a></span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="co"># Default behavior - guesses all data types</span></span>
<span id="cb14-3"><a href="#cb14-3"></a>my_tbl <span class="ot">&lt;-</span> read_<span class="sc">*</span>(file.csv, <span class="at">col_types =</span> <span class="cn">NULL</span>)</span>
<span id="cb14-4"><a href="#cb14-4"></a></span>
<span id="cb14-5"><a href="#cb14-5"></a><span class="co"># Specify columns with cols()</span></span>
<span id="cb14-6"><a href="#cb14-6"></a>my_cols <span class="ot">&lt;-</span> read_<span class="sc">*</span>(file.csv, <span class="at">col_types =</span> <span class="fu">cols</span>(</span>
<span id="cb14-7"><a href="#cb14-7"></a>  <span class="at">my_factor =</span> <span class="fu">col_factor</span>(),</span>
<span id="cb14-8"><a href="#cb14-8"></a>  <span class="at">your_string =</span> <span class="fu">col_character</span>()</span>
<span id="cb14-9"><a href="#cb14-9"></a>))</span>
<span id="cb14-10"><a href="#cb14-10"></a></span>
<span id="cb14-11"><a href="#cb14-11"></a><span class="co"># String shortcut:</span></span>
<span id="cb14-12"><a href="#cb14-12"></a><span class="co"># needs character for each col in order</span></span>
<span id="cb14-13"><a href="#cb14-13"></a><span class="co"># Use "?" for columns to guess</span></span>
<span id="cb14-14"><a href="#cb14-14"></a>my_shortcut <span class="ot">&lt;-</span> read_<span class="sc">*</span>(file.csv, <span class="at">col_types =</span> <span class="st">"fc"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="exporting-with-readr" class="level2 left-sidebar-slide" data-fullscreen="true" style="font-size: .8;">
<h2 class="left-sidebar-slide anchored" data-fullscreen="true" style="font-size: .8;" data-anchor-id="exporting-with-readr">Exporting with <code>readr</code></h2>
<p><img src="../images/icons/tv-icons/readr.png" class="absolute" data-top="1em" data-right="1em">)</p>
<div class="sidebar-column">
<div class="sidebar-title">
<p><strong>Exporting</strong> with <span class="pkg">readr</span>: <code>write_*()</code></p>
</div>
<div class="sidebar-content">
<div class="tightlist">
<ul>
<li><code>read_*()</code> functions have matched <code>write_*()</code> counterparts</li>
<li>Save tibbles to tabular files</li>
<li>Write <em>intermediate datasets</em> after:
<ul>
<li>De-identifying data</li>
<li>Complex wrangling</li>
<li>Dropping unneeded data</li>
<li>Managing empty data</li>
</ul></li>
<li>Run from script or console, no object assignment</li>
</ul>
</div>
</div>
</div>
<div class="main-content" style="padding-right: 5em;">
<div class="sourceCode" id="cb15" style="margin-bottom: .5em"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Common write_*() functions</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write_delim</span>()</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>()</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv2</span>()</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="fu">write_excel_csv</span>()</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="fu">write_excel_csv2</span>()</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="fu">write_tsv</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a></span>
<span id="cb16-2"><a href="#cb16-2"></a><span class="co"># Start with messy data</span></span>
<span id="cb16-3"><a href="#cb16-3"></a>messy_df <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"localpath/messy.xlsx"</span>, </span>
<span id="cb16-4"><a href="#cb16-4"></a>                     <span class="at">sheet=</span><span class="st">"my sheet"</span>)</span>
<span id="cb16-5"><a href="#cb16-5"></a></span>
<span id="cb16-6"><a href="#cb16-6"></a><span class="co"># Process in R: tidy, clean, transform...</span></span>
<span id="cb16-7"><a href="#cb16-7"></a></span>
<span id="cb16-8"><a href="#cb16-8"></a><span class="co"># Export clean version</span></span>
<span id="cb16-9"><a href="#cb16-9"></a>clean_df <span class="ot">&lt;-</span> <span class="co"># ... your cleaning steps</span></span>
<span id="cb16-10"><a href="#cb16-10"></a><span class="fu">write_csv</span>(clean_df, <span class="st">"localpath/clean.csv"</span>)</span>
<span id="cb16-11"><a href="#cb16-11"></a></span>
<span id="cb16-12"><a href="#cb16-12"></a><span class="co"># Later, read the clean version</span></span>
<span id="cb16-13"><a href="#cb16-13"></a>clean_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"localpath/clean.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="notes">
<p>Export tibbles to create intermediate datasets between initial import and final analysis Easily produce de-identified datasets to share with others Save computational time by skipping costly read-in and wrangling steps (e.g., big files, many files, complex transformations) readr can also export tibbles to tabular files with similar syntax to how it imports</p>
</div>
</section>
<section id="section" class="level2" data-fullscreen="true">
<h2 data-fullscreen="true" class="anchored" data-anchor-id="section"></h2>
<div class="container-fluid" style="position: absolute; width: 95vw; top: 50%; left: 50%; transform: translate(-50%, -50%);">
<div class="row">
<div class="col-3 fragment" data-fragment-index="1">
<p><img src="../images/screenshots/process-messy-file.png" class="img-fluid" style="max-width: 120% !important; margin-top: 0em" alt="Messy Data File"></p>
</div>
<div class="col-1 fragment" data-fragment-index="2">
<div style="text-align: center; margin-top: 50%;">
<div style="font-size: 2em">
<p><i class="bi-arrow-right-circle-fill " style="" role="img" aria-hidden="true"></i></p>
</div>
</div>
</div>
<div class="col-4 smaller fragment" data-fragment-index="2">
<div class="sourceCode" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in messy data</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>messy_df <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"localpath/messy.xlsx"</span>,</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">sheet=</span><span class="st">"my sheet"</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="col-1 fragment" data-fragment-index="3">
<div style="text-align: center; margin-top: 50%;">
<div style="font-size: 2em">
<p><i class="bi-arrow-right-circle-fill " style="" role="img" aria-hidden="true"></i></p>
</div>
</div>
</div>
<div class="col-3 smaller fragment" data-fragment-index="3">
<p><img src="../images/icons/cleaning.png" class="img-fluid" style="max-height: 3.5em;" alt="Clean"> <img src="../images/icons/lasso.png" class="img-fluid" style="max-height: 3.5em;" alt="Wrangle"></p>
</div>
</div>
<!-- open down arrow row -->
<div class="row">
<div class="col-11 fragment" style="text-align: right;" data-fragment-index="4">
<div style="font-size: 2em">
<p><i class="bi-arrow-down-circle-fill " style="" role="img" aria-hidden="true"></i></p>
</div>
</div>
<div class="col-1">
<p><span style="font-size: 0em;">.</span></p>
</div>
</div>
<!-- close down arrow row -->
<!-- open second row -->
<div class="row">
<!-- open tidy data card column -->
<div class="col-3 smaller fragment" data-fragment-index="6">
<div class="card">
<div class="card-header">
<div class="card-title" style="color: #fff; font-size: .8em">
<p>My tidy data file:</p>
</div>
</div>
<div class="card-body lessgap nonincremental" style="font-size: .8em">
<ul>
<li>Data needed for future R scripts <em>and nothing else</em></li>
<li>Minimal, tabular (.csv)</li>
<li>No protected data</li>
<li>Added variables from initial wrangling</li>
</ul>
</div>
</div>
</div>
<!-- close tidy data card column -->
<!-- open circular paths column -->
<div class="col-6">
<!-- open left path row -->
<div class="row fragment" data-fragment-index="5">
<div class="col-2 fragment" data-fragment-index="6">
<div style="text-align: center; ">
<div style="font-size: 2em">
<p><i class="bi-arrow-left-circle-fill " style="" role="img" aria-hidden="true"></i></p>
</div>
</div>
</div>
<div class="col-8 smaller">
<div class="sourceCode" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Write out clean version</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(clean_df, </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>          <span class="st">"localpath/clean.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="col-2">
<div style="text-align: center;">
<div style="font-size: 2em">
<p><i class="bi-arrow-left-circle-fill " style="" role="img" aria-hidden="true"></i></p>
</div>
</div>
</div>
</div>
<!-- close left path row -->
<!-- open right path row -->
<div class="row fragment" style="margin-top: 1em;" data-fragment-index="7">
<div class="col-2">
<div style="text-align: center;">
<div style="font-size: 2em">
<p><i class="bi-arrow-right-circle-fill " style="" role="img" aria-hidden="true"></i></p>
</div>
</div>
</div>
<div class="col-8 smaller">
<div class="sourceCode" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in clean version</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>clean_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"localpath/clean.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="col-2">
<div style="text-align: center;">
<div style="font-size: 2em">
<p><i class="bi-arrow-right-circle-fill " style="" role="img" aria-hidden="true"></i></p>
</div>
</div>
</div>
</div>
<!-- close right path row -->
</div>
<!-- close circular paths column -->
<!-- open clean_df column -->
<div class="col-3 fragment" data-fragment-index="4">
<div class="card card-accent1" style="padding:0px">
<div class="card-header">
<div class="card-title" style="color: #fff; font-size: .6em">
<p><code>clean_df</code>:</p>
</div>
</div>
<div class="card-body lessgap nonincremental" style="font-size: .8em">
<ul>
<li>Clean &amp; tidy tibble</li>
<li>Data needed for analysis <em>and nothing else</em></li>
</ul>
</div>
</div>
</div>
<!-- close clean_df column -->
</div>
<!-- close second row column -->
</div>
<!-- close container -->
</section>
<section id="bonus-readxl-googlesheets4" class="level2">
<h2 class="anchored" data-anchor-id="bonus-readxl-googlesheets4">Bonus: <code>readxl</code> &amp; <code>googlesheets4</code></h2>
<p><img src="../images/icons/tv-icons/readxl.png" class="absolute" data-top="-1.5em" data-right="4em"> <img src="../images/icons/tv-icons/googlesheets4.png" class="absolute" data-top="-1.5em" data-right="0em"></p>
<div class="large callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Complementary packages to <code>readr</code>
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Mimic readr’s <span class="func">read_*</span> functions
<ul>
<li><a href="https://github.com/rstudio/cheatsheets/blob/main/data-import.pdf">same cheatsheet</a></li>
</ul></li>
<li>Specification for converting “complex” documents into a <code>tbl</code>-compatible format</li>
<li><em>Not</em> tidyverse packages
<ul>
<li>Install and load them separately!</li>
</ul></li>
</ul>
</div>
</div>
<div class="fragment">
<div class="sourceCode" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># readxl for Excel files</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="fu">read_excel</span>(<span class="st">"data.xlsx"</span>)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="co"># googlesheets4 for Google Sheets</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(googlesheets4)</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="fu">read_sheet</span>(<span class="st">"spreadsheet_url"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="practice-read-write-1" class="level2">
<h2 class="anchored" data-anchor-id="practice-read-write-1">Practice: Read &amp; Write (1)</h2>
<div class="container-fluid">
<div class="row">
<div class="col-5">
<div class="overlap-box">
<div class="box-title">
<p>Read in M&amp;M data:</p>
</div>
<div class="box-content">
<ol type="1">
<li>Pull the <code>student-hub</code> repo (or find files on GitHub)</li>
<li>Find the Excel spreadsheet: <code>data/MM data.xlsx</code></li>
<li>Install and load the <span class="pkg">readxl</span> library</li>
<li>Use the <code>read_excel()</code> function to assign the data to a tibble called <code>mmdata</code></li>
<li>Examine your data in the console to see if it matches the image</li>
</ol>
</div>
</div>
</div>
<div class="col-7">
<p><img src="../images/screenshots/mmdata-goal.png" class="img-fluid"></p>
</div>
</div>
</div>
<div class="bubble-chain">
<p class="bubble-left fragment">
It doesn’t!
</p>
<p class="bubble-right fragment">
Oh no! Thank heavens you are smarter than a computer.
</p>
</div>
</section>
<section id="practice-read-write-2" class="level2">
<h2 class="anchored" data-anchor-id="practice-read-write-2">Practice: Read &amp; Write (2)</h2>
<div class="container-fluid">
<div class="row">
<div class="col-7">
<div class="overlap-box">
<div class="box-title">
<p>Fix, read, write:</p>
</div>
<div class="box-content">
<ol type="1">
<li>Open <code>MM data.xlsx</code> in Excel (or similar) and examine it with your human eyeballs
<ul>
<li>What about this file creates problems when you read-in?</li>
<li>How might you fix the issue here in the Excel document?</li>
</ul></li>
<li>Review the <code>?read_excel</code> documentation
<ul>
<li>What arguments can you pass to <code>read_excel()</code> to fix the issue on read-in?</li>
</ul></li>
<li>Use <code>read_excel()</code> to assign the data to a tibble called <code>mmdata</code> that looks like the image</li>
<li>Use <code>write_csv()</code> to save <code>mmdata</code> to an intermediate dataset at the location <code>student-hub/data/mmdata.csv</code>
<ul>
<li>Use an appropriate relative path!</li>
</ul></li>
</ol>
</div>
</div>
</div>
<div class="col-5">
<p><img src="../images/screenshots/mmdata-goal.png" class="img-fluid"></p>
</div>
</div>
</div>
<div class="bubble-chain">
<p class="bubble-left fragment">
It says that folder doesn’t exist! <br> <em>(and/or)</em> <br> It doesn’t read/write/both where I want it to!
</p>
<p class="bubble-right fragment">
Remember relative relativity. Are you reading and writing from a script, Quarto doc, or the console?
</p>
</div>
<div class="notes">
<p>Open <code>MM data.xlsx</code> in Excel (or similar) and examine it with your human eyeballs What about this file creates problems when you read-in? How would you fix the issue here in the Excel document? (just think; don’t do it!) Review the ?read_excel documentation What arguments can you pass to read_excel() to fix the issue on read-in? Use the read_excel() function to assign the data to a tibble called mmdata that looks like the image Use write_csv() to save mmdata to an intermediate dataset: <code>in-class-materials/data/mmdata.csv</code></p>
</div>
</section>
</section>
<section id="dplyr" class="level1">
<h1><code>dplyr</code></h1>
<section id="dplyr-data-transformation" class="level2 left-sidebar-slide" data-fullscreen="true" style="font-size: .8;">
<h2 class="left-sidebar-slide anchored" data-fullscreen="true" style="font-size: .8;" data-anchor-id="dplyr-data-transformation"><code>dplyr</code>: Data Transformation</h2>
<p><img src="../images/icons/tv-icons/dplyr.png" class="absolute" data-top=".5em" data-left="1em"></p>
<div class="sidebar-column">
<div class="sidebar-title">
<p><span class="pkg">dplyr</span>: <br> Grammar of Data Manipulation</p>
</div>
<div class="sidebar-content">
<ul>
<li>Core tidyverse package for data transformation</li>
<li>Works with tibbles (and data.frames)</li>
<li>First argument always <code>data</code> (the tibble to transform)</li>
</ul>
</div>
</div>
<div class="main-content">
<div class="r-stretch" style="display: grid; grid-template-columns: repeat(3, 1fr); grid-template-rows: minmax(0, 1fr) minmax(0, 1fr); gap: 0.8em;">
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em 0.2em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><i class="bi-check2-square " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="func">select</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>subset &amp; sort columns</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em 0.2em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><i class="bi-funnel " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="func">filter</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>subset rows</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em 0.2em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><i class="bi-layer-backward " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="func">arrange</span></p>
</div>
</div>
<div class="box-content" style="text-align: center; overflow: hidden; min-height: 0; font-size: 0.9em; line-height: .9;">
<p>sort rows</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em 0.2em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><i class="bi-node-plus-fill " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="func">mutate</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>create and modify columns</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em 0.2em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><i class="bi-calculator " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="func">summarize</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>compute with multiple rows</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em 0.2em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><i class="bi-collection " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="func">group_by</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>perform operations on subgroups</p>
</div>
</div>
</div>
</div>
</section>
<section id="select-subset-columns" class="level2" style="font-size: .8em">
<h2 style="font-size: .8em" class="anchored" data-anchor-id="select-subset-columns"><code>select</code>: Subset columns</h2>
<p><img src="../images/icons/tv-icons/dplyr.png" class="absolute" data-top="-1.5em" data-right="0em"></p>
<div class="container-fluid">
<div class="row">
<div class="col-6">
<div class="overlap-box">
<div class="box-title">
<p>Include/exclude syntax:</p>
</div>
<div class="box-content">
<div class="sourceCode" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(tbl, col1, col2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="nonincremental fragment" data-fragment-index="1">
<ul>
<li>Column names are objects, not strings
<ul>
<li><code>select(mm.sample, Bag, Red)</code></li>
<li><em>not</em> <code>select(mm.sample, "Bag", "Red")</code></li>
</ul></li>
</ul>
</div>
<div class="nonincremental fragment" data-fragment-index="2">
<ul>
<li>Include (default):
<ul>
<li><code>select(col1, col2)</code></li>
</ul></li>
</ul>
</div>
<div class="nonincremental fragment" data-fragment-index="3">
<ul>
<li>Exclude with <code>-</code>:
<ul>
<li><code>select(-col3, -col4)</code></li>
<li><code>select(-c(col3, col4))</code></li>
</ul></li>
</ul>
</div>
<div class="nonincremental fragment" data-fragment-index="4">
<ul>
<li>Use ranges:
<ul>
<li>Name: <code>select(colA:colC)</code></li>
<li>Position: <code>select(1:3)</code></li>
<li>Exclude: <code>select(-(4:6))</code></li>
</ul></li>
</ul>
</div>
</div>
</div>
</div>
<div class="col-6" style="margin-top: 1em">
<div class="fragment" data-fragment-index="5">
<div class="sourceCode" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Include specific columns </span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(mm.sample, Bag, Red, Green, Blue)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Exclude specific columns</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(mm.sample, <span class="sc">-</span>Orange, <span class="sc">-</span>Yellow, <span class="sc">-</span>Brown, <span class="sc">-</span>Weight)</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Exclude list of columns</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(mm.sample, <span class="sc">-</span><span class="fu">c</span>(Orange, Yellow, Brown, Weight))</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Include columns by name range</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(mm.sample, Bag<span class="sc">:</span>Blue)</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Exclude columns by position range</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a><span class="do">## `-` requires range in `()`</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(mm.sample, <span class="sc">-</span>(<span class="dv">5</span><span class="sc">:</span><span class="dv">8</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment" data-fragment-index="6" style="margin-top: 1em;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
    Bag   Red Green  Blue
  &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1     1    15     9     3
2     2     9    17    19
3     3    14     8     6
4     4    15     7     3
5     5    10     3     7</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="select-rename-reorder-columns" class="level2" style="font-size: .8em">
<h2 style="font-size: .8em" class="anchored" data-anchor-id="select-rename-reorder-columns"><code>select</code>: Rename &amp; reorder columns</h2>
<p><img src="../images/icons/tv-icons/dplyr.png" class="absolute" data-top="-1.5em" data-right="0em"></p>
<div class="container-fluid">
<div class="row">
<div class="col-4">
<div class="overlap-box">
<div class="box-title">
<p>Rename &amp; order:</p>
</div>
<div class="box-content">
<div class="nonincremental fragment" data-fragment-index="1">
<ul>
<li>Select &amp; reorder:
<ul>
<li><code>select(col3, col1, col2)</code></li>
</ul></li>
</ul>
</div>
<div class="nonincremental fragment" data-fragment-index="2">
<ul>
<li>Select &amp; rename:
<ul>
<li><code>select(new_name = old_name)</code></li>
</ul></li>
</ul>
</div>
<div class="nonincremental fragment" data-fragment-index="3">
<ul>
<li>Backticks for special characters:
<ul>
<li><code>select(`col 2 (two)` = col2)</code></li>
</ul></li>
</ul>
</div>
<div class="nonincremental fragment" data-fragment-index="4">
<ul>
<li>Related function: <a href="https://dplyr.tidyverse.org/reference/rename.html" class="func">rename()</a>
<ul>
<li>Rename some or all columns</li>
<li>Retain <em>all</em> columns <em>in original order</em></li>
</ul></li>
</ul>
</div>
<div class="nonincremental fragment" data-fragment-index="5">
<ul>
<li>Related function: <a href="https://dplyr.tidyverse.org/reference/relocate.html" class="func">relocate()</a>
<ul>
<li>Move columns to relative positions</li>
<li><code>relocate(col3, .before = col1)</code></li>
<li>Retain <em>all</em> columns <em>in original order</em></li>
</ul></li>
</ul>
</div>
</div>
</div>
</div>
<div class="col-3">
<div class="fragment" style="margin-top: .2em;" data-fragment-index="1">
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select and reorder</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(mm.sample, </span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>       Green, Blue, Bag, Red)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  Green  Blue   Bag   Red
  &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;
1     9     3     1    15
2    17    19     2     9
3     8     6     3    14
4     7     3     4    15
5     3     7     5    10</code></pre>
</div>
</div>
</div>
<div class="fragment" style="margin-top: .2em;" data-fragment-index="2">
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select and rename</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(mm.sample, </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>       Bag, <span class="at">rojo =</span> Red, </span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">vert =</span> Green, </span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>       <span class="st">`</span><span class="at">aoi 青</span><span class="st">`</span> <span class="ot">=</span> Blue)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
    Bag  rojo  vert `aoi 青`
  &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
1     1    15     9        3
2     2     9    17       19
3     3    14     8        6
4     4    15     7        3
5     5    10     3        7</code></pre>
</div>
</div>
</div>
</div>
<div class="col-5">
<div class="fragment" style="margin-top: .2em;" data-fragment-index="3">
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select, reorder, rename</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(mm.sample, </span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">vert =</span> Green, </span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">rojo =</span> Red, </span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>       <span class="st">`</span><span class="at">aoi 青</span><span class="st">`</span> <span class="ot">=</span> Blue, </span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>       Bag)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
   vert  rojo `aoi 青`   Bag
  &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;int&gt;
1     9    15        3     1
2    17     9       19     2
3     8    14        6     3
4     7    15        3     4
5     3    10        7     5</code></pre>
</div>
</div>
</div>
<div class="fragment" style="margin-top: .2em;" data-fragment-index="4">
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Rename w/out select or reorder</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rename</span>(mm.sample, </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">vert =</span> Green, </span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">rojo =</span> Red, </span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>       <span class="st">`</span><span class="at">aoi 青</span><span class="st">`</span> <span class="ot">=</span> Blue)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 8
    Bag  rojo  vert `aoi 青` Orange Yellow Brown Weight
  &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
1     1    15     9        3      3      9    19   49.8
2     2     9    17       19      3      3     8   49.0
3     3    14     8        6      8     19     4   50.4
4     4    15     7        3      8     16     8   49.2
5     5    10     3        7      9     22     4   47.6</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="select-helpers" class="level2">
<h2 class="anchored" data-anchor-id="select-helpers"><code>select</code> Helpers</h2>
<p><img src="../images/icons/tv-icons/dplyr.png" class="absolute" data-top="-1.5em" data-right="0em"></p>
<div class="container-fluid">
<div class="row">
<div class="col-4">
<div class="overlap-box">
<div class="box-title">
<p><a href="https://tidyselect.r-lib.org/reference/index.html" style="color: #F8FdFE">tidy-select</a></p>
</div>
<div class="box-content">
<div class="nonincremental fragment" data-fragment-index="1">
<ul>
<li><code>starts_with("prefix")</code></li>
</ul>
</div>
<div class="nonincremental fragment" data-fragment-index="2">
<ul>
<li><code>ends_with("suffix")</code></li>
</ul>
</div>
<div class="nonincremental fragment" data-fragment-index="3">
<ul>
<li><code>contains("text")</code></li>
</ul>
</div>
<div class="nonincremental fragment" data-fragment-index="4">
<ul>
<li><code>matches("regex")</code></li>
</ul>
</div>
<div class="nonincremental fragment" data-fragment-index="5">
<ul>
<li><code>num_range("x", 1:5)</code></li>
</ul>
</div>
<div class="nonincremental fragment" data-fragment-index="6">
<ul>
<li><code>everything()</code></li>
</ul>
</div>
</div>
</div>
</div>
<div class="col-4" style="margin-top: -2em">
<div class="fragment" style="margin-top: .2em;" data-fragment-index="1">
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select by first character(s)</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(mm.sample, </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">starts_with</span>(<span class="st">"B"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
    Bag  Blue Brown
  &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
1     1     3    19
2     2    19     8
3     3     6     4
4     4     3     8
5     5     7     4</code></pre>
</div>
</div>
</div>
<div class="fragment" style="margin-top: .2em;" data-fragment-index="2">
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select by last character(s)</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(mm.sample, </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">ends_with</span>(<span class="st">"n"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  Green Brown
  &lt;dbl&gt; &lt;dbl&gt;
1     9    19
2    17     8
3     8     4
4     7     8
5     3     4</code></pre>
</div>
</div>
</div>
</div>
<div class="col-4" style="margin-top: -2em">
<div class="fragment" style="margin-top: .2em;" data-fragment-index="3">
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select with regex</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(mm.sample, </span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">contains</span>(<span class="st">"ow"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  Yellow Brown
   &lt;dbl&gt; &lt;dbl&gt;
1      9    19
2      3     8
3     19     4
4     16     8
5     22     4</code></pre>
</div>
</div>
</div>
<div class="fragment" style="margin-top: .2em;" data-fragment-index="4">
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select with regex</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(mm.sample, </span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">matches</span>(<span class="st">"^B|n$"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
    Bag Green  Blue Brown
  &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1     1     9     3    19
2     2    17    19     8
3     3     8     6     4
4     4     7     3     8
5     5     3     7     4</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="notes">
<p>Operates on columns/variables (not observations/rows) Returns a tibble with only the given columns in the order given renamed if provided Remove columns with the hyphen Includes everything not explicitly mentioned Rename as you select with new_name = old_name</p>
</div>
</section>
<section id="filter-subset-rows" class="level2">
<h2 class="anchored" data-anchor-id="filter-subset-rows"><code>filter</code>: Subset rows</h2>
<p><img src="../images/icons/tv-icons/dplyr.png" class="absolute" data-top="-1.5em" data-right="0em"></p>
<!-- begin container -->
<div class="container-fluid">
<!-- begin main row -->
<div class="row">
<!-- begin left column -->
<div class="col-5">
<div class="overlap-box accent1">
<div class="box-title">
<p>Filter syntax &amp; logic:</p>
</div>
<div class="box-content">
<div class="sourceCode" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(tbl, cond1, cond2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Operates on rows (observations)</li>
<li>Conditional evaluation:
<ul>
<li>Comparison operators (e.g., <code>&gt;</code>, <code>!=</code>, <code>==</code>)</li>
<li>Logical operators (e.g., <code>&amp;</code>, <code>|</code>, <code>!</code>)</li>
<li>Boolean values (<code>TRUE</code>, <code>FALSE</code>)</li>
</ul></li>
<li>Returns tibble with rows that meet <em>all</em> conditions</li>
</ul>
</div>
</div>
</div>
<!-- End left column -->
<!-- Begin right column -->
<div class="col-7" style="margin-top: -3em; font-size: .8em;">
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Vehicle dataframe (1 column called `transport`)</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>vehicles <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">transport =</span> <span class="fu">c</span>(<span class="st">"walking"</span>, <span class="st">"bus"</span>, <span class="st">"bicycle"</span>, <span class="st">"car"</span>, <span class="st">"atv"</span>,</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"motorcycle"</span>, <span class="st">"razor scooter"</span>, <span class="st">"the el"</span>, </span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"jet ski"</span>, <span class="st">"sailboat"</span>, <span class="st">"tricycle"</span>, <span class="st">"chariot"</span>))</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Condition 1</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(vehicles, transport <span class="sc">==</span> <span class="st">"bicycle"</span>)</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Condition 2</span></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(vehicles, </span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>       <span class="fu">has.handlebars</span>(transport) <span class="sc">|</span> transport <span class="sc">==</span> <span class="st">"boat"</span>)</span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Condition 3</span></span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(vehicles, </span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>       <span class="fu">has.handlebars</span>(transport), transport <span class="sc">==</span> <span class="st">"boat"</span>)</span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Condition 3</span></span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(vehicles, </span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a>       (<span class="fu">has.handlebars</span>(transport) <span class="sc">&amp;</span> <span class="fu">n.wheels</span>(transport) <span class="sc">&lt;</span> <span class="dv">3</span>) <span class="sc">|</span></span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a>           (<span class="fu">requires.gas</span>(transport) <span class="sc">&amp;</span> <span class="fu">n.wheels</span>(transport) <span class="sc">&gt;</span> <span class="dv">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!-- Begin conditional results row -->
<div class="row">
<div class="col-3 fragment">
<p>Condition 1:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>  transport
1   bicycle</code></pre>
</div>
</div>
</div>
<div class="col-3 fragment">
<p>Condition 2:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>      transport
1       bicycle
2           atv
3    motorcycle
4 razor scooter
5       jet ski</code></pre>
</div>
</div>
</div>
<div class="col-3 fragment">
<p>Condition 3:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] transport
&lt;0 rows&gt; (or 0-length row.names)</code></pre>
</div>
</div>
</div>
<div class="col-3 fragment">
<p>Condition 4:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>      transport
1           bus
2       bicycle
3           car
4    motorcycle
5 razor scooter
6       jet ski</code></pre>
</div>
</div>
</div>
</div>
<!-- End conditional results row -->
</div>
<!-- End right column -->
</div>
<!-- end main row -->
</div>
<!-- end container -->
<div class="notes">
<p>Operates on observations/rows (not columns!) Conditions are logical evaluations using: &gt;, &gt;=, &lt;, &lt;=, != (“not equal to”), and == (“equal to”) If the condition evaluates to TRUE, it stays and is returned or passed to the next line of the pipe If FALSE, it’s filtered out</p>
</div>
</section>
<section id="filter-subset-rows-1" class="level2">
<h2 class="anchored" data-anchor-id="filter-subset-rows-1"><code>filter</code>: Subset rows</h2>
<p><img src="../images/icons/tv-icons/dplyr.png" class="absolute" data-top="-1.5em" data-right="0em"></p>
<!-- begin container -->
<div class="container-fluid">
<!-- begin main row -->
<div class="row">
<!-- begin left column -->
<div class="col-5">
<div class="overlap-box accent1">
<div class="box-title">
<p>Filter example:</p>
</div>
<div class="box-content nonincremental">
<div class="cell" style="font-size: .9em">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Condition 1</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(mm.tidy, Bag_Weight <span class="sc">&gt;</span> <span class="dv">50</span>)</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Condition 2</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(mm.tidy, </span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>       Color <span class="sc">==</span> <span class="st">"Red"</span> <span class="sc">|</span> Number <span class="sc">&gt;=</span> <span class="dv">15</span>)</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Condition 3</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(mm.tidy, </span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>       Color <span class="sc">==</span> <span class="st">"Red"</span>, Number <span class="sc">&gt;=</span> <span class="dv">15</span>)</span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Condition 4</span></span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(mm.tidy, </span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>       (Color <span class="sc">==</span> <span class="st">"Blue"</span> <span class="sc">&amp;</span> Number <span class="sc">&gt;=</span> <span class="dv">5</span>) <span class="sc">|</span></span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>           (Bag_Weight <span class="sc">&gt;</span> <span class="fl">50.5</span> <span class="sc">|</span> Bag_Weight <span class="sc">&lt;</span> <span class="dv">47</span>),</span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>       Bag <span class="sc">!=</span> <span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<!-- End left column -->
<!-- Begin right column -->
<div class="col-7" style="margin-top: -3em; font-size: .8em;">
<!-- Begin conditional results row 1 -->
<div class="row">
<div class="col-6 fragment">
<p>Condition 1:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 54 × 4
     Bag Color  Number Bag_Weight
   &lt;int&gt; &lt;chr&gt;   &lt;dbl&gt;      &lt;dbl&gt;
 1     3 Red        14       50.4
 2     3 Green       8       50.4
 3     3 Blue        6       50.4
 4     3 Orange      8       50.4
 5     3 Yellow     19       50.4
 6     3 Brown       4       50.4
 7     7 Red         6       50.2
 8     7 Green       7       50.2
 9     7 Blue        3       50.2
10     7 Orange      6       50.2
# ℹ 44 more rows</code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p>Condition 2:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 58 × 4
     Bag Color  Number Bag_Weight
   &lt;int&gt; &lt;chr&gt;   &lt;dbl&gt;      &lt;dbl&gt;
 1     1 Red        15       49.8
 2     1 Brown      19       49.8
 3     2 Red         9       49.0
 4     2 Green      17       49.0
 5     2 Blue       19       49.0
 6     3 Red        14       50.4
 7     3 Yellow     19       50.4
 8     4 Red        15       49.2
 9     4 Yellow     16       49.2
10     5 Red        10       47.6
# ℹ 48 more rows</code></pre>
</div>
</div>
</div>
</div>
<!-- End conditional results row 1

<!-- Begin conditional results row 2 -->
<div class="row">
<div class="col-6 fragment">
<p>Condition 3:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
    Bag Color Number Bag_Weight
  &lt;int&gt; &lt;chr&gt;  &lt;dbl&gt;      &lt;dbl&gt;
1     1 Red       15       49.8
2     4 Red       15       49.2
3    23 Red       20       50.0
4    29 Red       15       49.4</code></pre>
</div>
</div>
</div>
<div class="col-6 fragment">
<p>Condition 4:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 62 × 4
     Bag Color  Number Bag_Weight
   &lt;int&gt; &lt;chr&gt;   &lt;dbl&gt;      &lt;dbl&gt;
 1     2 Blue       19       49.0
 2     3 Blue        6       50.4
 3     5 Blue        7       47.6
 4     8 Red        14       51.7
 5     8 Green      11       51.7
 6     8 Blue        4       51.7
 7     8 Orange      1       51.7
 8     8 Yellow     14       51.7
 9     8 Brown      17       51.7
10     9 Blue       10       48.4
# ℹ 52 more rows</code></pre>
</div>
</div>
</div>
</div>
<!-- End conditional results row 2 -->
</div>
<!-- End right column -->
</div>
<!-- end main row -->
</div>
<!-- end container -->
<div class="notes">
<p>Operates on observations/rows (not columns!) Conditions are logical evaluations using: &gt;, &gt;=, &lt;, &lt;=, !=, == If the condition evaluates to TRUE, it stays and is returned or passed to the next line of the pipe If FALSE, it’s filtered out</p>
</div>
</section>
<section id="arrange-sort-rows" class="level2">
<h2 class="anchored" data-anchor-id="arrange-sort-rows"><code>arrange</code>: Sort rows</h2>
<p><img src="../images/icons/tv-icons/dplyr.png" class="absolute" data-top="-1.5em" data-right="0em"></p>
<div class="container-fluid">
<div class="row">
<div class="col-4">
<div class="overlap-box">
<div class="box-title">
<p>Arrange syntax:</p>
</div>
<div class="box-content">
<div class="sourceCode" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(tbl, col1, col2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Sort rows by column values</li>
<li>If 2+ variables, sorts in order given</li>
<li>Strings sorted alphabetically</li>
<li>Ascending order (default)</li>
<li>Descending order:
<ul>
<li><code>arrange(desc(col1))</code></li>
<li><code>arrange(-col1)</code></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div class="col-4" style="font-size: .8em;">
<div class="fragment" style="margin-top: 1em;">
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort by (ascending) bag weight</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(mm.tidy, Bag_Weight)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 180 × 4
     Bag Color  Number Bag_Weight
   &lt;int&gt; &lt;chr&gt;   &lt;dbl&gt;      &lt;dbl&gt;
 1    10 Red         9       46.2
 2    10 Green       9       46.2
 3    10 Blue        3       46.2
 4    10 Orange      9       46.2
 5    10 Yellow      8       46.2
 6    10 Brown      15       46.2
 7    26 Red         4       46.7
 8    26 Green       6       46.7
 9    26 Blue        7       46.7
10    26 Orange      6       46.7
# ℹ 170 more rows</code></pre>
</div>
</div>
</div>
</div>
<div class="col-4" style="font-size: .8em;">
<div class="fragment" style="margin-top: 1em;">
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort by color -&gt; desc number -&gt; desc bag</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(mm.tidy, Color, <span class="sc">-</span>Number, <span class="fu">desc</span>(Bag))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 180 × 4
     Bag Color Number Bag_Weight
   &lt;int&gt; &lt;chr&gt;  &lt;dbl&gt;      &lt;dbl&gt;
 1     2 Blue      19       49.0
 2    19 Blue      16       49.0
 3    20 Blue      13       51.7
 4    13 Blue      13       46.9
 5    11 Blue      13       50.4
 6    27 Blue      11       47.7
 7    17 Blue      11       48.7
 8     9 Blue      10       48.4
 9    16 Blue       9       48.3
10    30 Blue       7       52.1
# ℹ 170 more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="notes">
<p>Sort rows of your tibble in the order of col1, then col2, etc. Defaults to ascending order, but you can wrap the column name in the desc() function to use descending order The hyphen - is shorthand for desc()</p>
</div>
</section>
<section id="mutate-create-modify-columns" class="level2" style="font-size: .8em">
<h2 style="font-size: .8em" class="anchored" data-anchor-id="mutate-create-modify-columns"><code>mutate</code>: Create &amp; modify columns</h2>
<p><img src="../images/icons/tv-icons/dplyr.png" class="absolute" data-top="-1.5em" data-right="0em"></p>
<div class="container-fluid">
<div class="row">
<div class="col-3">
<div class="overlap-box accent1">
<div class="box-title" style="font-size: .9em">
<p>Create &amp; modify:</p>
</div>
<div class="box-content">
<div class="sourceCode" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(tbl, </span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">new_col1 =</span> ..., </span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">new_col2 =</span> ..., </span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>    ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Add named new column</li>
<li>Assign values with <code>=</code></li>
<li>Compute values by row</li>
<li>Columns created in order
<ul>
<li>Reference a newly created column in subsequent columns</li>
</ul></li>
<li>Modify an existing column by creating a new column with the same name</li>
</ul>
</div>
</div>
</div>
<div class="col-4" style="font-size: .8em, margin-top: -2em">
<div class="fragment" style="margin-top: 1em;">
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create new column: Weight_Oz</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="co"># then pipe to select cols</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(mm.sample,</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Type =</span> <span class="st">"Chocolate"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Bag, Weight, Type) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
    Bag Weight Type     
  &lt;int&gt;  &lt;dbl&gt; &lt;chr&gt;    
1     1   49.8 Chocolate
2     2   49.0 Chocolate
3     3   50.4 Chocolate
4     4   49.2 Chocolate
5     5   47.6 Chocolate</code></pre>
</div>
</div>
</div>
<div class="fragment" style="margin-top: 1em;">
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create new column: Weight_Oz</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(mm.sample,</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">Weight_Oz =</span> Weight <span class="sc">/</span> <span class="fl">28.34952</span>) <span class="sc">|&gt;</span> </span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Bag, Weight, Weight_Oz)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
    Bag Weight Weight_Oz
  &lt;int&gt;  &lt;dbl&gt;     &lt;dbl&gt;
1     1   49.8      1.76
2     2   49.0      1.73
3     3   50.4      1.78
4     4   49.2      1.73
5     5   47.6      1.68</code></pre>
</div>
</div>
</div>
</div>
<div class="col-5" style="margin-top: -4.5em">
<div class="fragment" style="margin-top: 1em;">
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create new column (total M&amp;Ms per bag)</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Then another new column (proportion of red M&amp;Ms)</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="co"># using the first new column</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(mm.sample,</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_MMs =</span> Red <span class="sc">+</span> Green <span class="sc">+</span> Blue <span class="sc">+</span> </span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>        Brown <span class="sc">+</span> Yellow <span class="sc">+</span> Orange,</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">Prop_Red =</span> Red <span class="sc">/</span> Total_MMs) <span class="sc">|&gt;</span> </span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Bag, Red, Total_MMs, Prop_Red)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
    Bag   Red Total_MMs Prop_Red
  &lt;int&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1     1    15        58    0.259
2     2     9        59    0.153
3     3    14        59    0.237
4     4    15        57    0.263
5     5    10        55    0.182</code></pre>
</div>
</div>
</div>
<div class="fragment" style="margin-top: 1em;">
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change values in existing column by overwriting</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(mm.sample,</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">Weight =</span> <span class="fu">case_when</span>(</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>        Weight <span class="sc">&lt;</span> <span class="dv">48</span> <span class="sc">~</span> <span class="st">"Light"</span>,</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>        Weight <span class="sc">&gt;</span> <span class="dv">50</span> <span class="sc">~</span> <span class="st">"Heavy"</span>,</span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>        <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Medium"</span> <span class="co"># anything left after</span></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>        )) <span class="sc">|&gt;</span> </span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(Bag, Red, Weight)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
    Bag   Red Weight
  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; 
1     1    15 Medium
2     2     9 Medium
3     3    14 Heavy 
4     4    15 Medium
5     5    10 Light </code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="notes">
<p>Adds new column(s) with names and values that you define Use the single equals sign to assign new values Use double equal signs to mean “equals” within a conditional statement *Use mutate to effectively change data in an existing variable by creating a new variable with the same name that will overwrite it</p>
</div>
</section>
<section id="summarize-group_by-compute-summary-values" class="level2" style="font-size: .8em">
<h2 style="font-size: .8em" class="anchored" data-anchor-id="summarize-group_by-compute-summary-values"><code>summarize</code> &amp; <code>group_by</code>: Compute summary values</h2>
<p><img src="../images/icons/tv-icons/dplyr.png" class="absolute" data-top="-1.5em" data-right="0em"></p>
<div class="container-fluid">
<div class="row">
<div class="col-4">
<div class="overlap-box">
<div class="box-title">
<p>Group &amp; summarize:</p>
</div>
<div class="box-content">
<div class="sourceCode" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">group_by</span>(tbl, col1, col2, ...)  <span class="sc">|&gt;</span> </span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summarize</span>(</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">summary_col1 =</span> <span class="fu">summary_func</span>(colA),</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">summary_col2 =</span> <span class="fu">summary_func</span>(colB),</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><code>group_by()</code> creates subgroups based on unique values across 1+ columns
<ul>
<li>Tidy <code>group</code>ing needs tidy data</li>
</ul></li>
<li><code>summarize()</code> computes summary functions across those groups
<ul>
<li>e.g., <code>mean()</code>, <code>max()</code>, <code>last()</code>, <code>n()</code></li>
</ul></li>
<li>Output tibble includes:
<ul>
<li>Grouping column(s)</li>
<li>New summary column(s)</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div class="col-4">
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute mean weight of all bags</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summarize</span>(mm.tidy, </span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">Mean_Weight =</span> <span class="fu">mean</span>(Bag_Weight))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  Mean_Weight
        &lt;dbl&gt;
1        49.2</code></pre>
</div>
</div>
<div class="cell" style="margin-top: .1em" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Group by color</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="fu">group_by</span>(mm.tidy, Color) <span class="sc">|&gt;</span>  </span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="co"># pipe grouped data to next function</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute total count and mean weight *per color*</span></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summarize</span>(<span class="at">Mean_Weight =</span> <span class="fu">mean</span>(Bag_Weight),</span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>          <span class="at">Total_Number =</span> <span class="fu">sum</span>(Number))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  Color  Mean_Weight Total_Number
  &lt;chr&gt;        &lt;dbl&gt;        &lt;dbl&gt;
1 Blue          49.2          217
2 Brown         49.2          374
3 Green         49.2          222
4 Orange        49.2          199
5 Red           49.2          288
6 Yellow        49.2          413</code></pre>
</div>
</div>
</div>
<div class="col-4">
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># `mm.tidy.weights` includes a Weight_Class column</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Grouping by multiple columns creates a summary value for each </span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a><span class="co"># unique combination of values in those columns</span></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a><span class="fu">group_by</span>(mm.tidy.weights, Color, Weight_Class) <span class="sc">|&gt;</span> </span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summarize</span>(<span class="at">Mean_Weight =</span> <span class="fu">mean</span>(Bag_Weight),</span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>          <span class="at">Total_Number =</span> <span class="fu">sum</span>(Number))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 18 × 4
# Groups:   Color [6]
   Color  Weight_Class Mean_Weight Total_Number
   &lt;chr&gt;  &lt;chr&gt;              &lt;dbl&gt;        &lt;dbl&gt;
 1 Blue   Heavy               51.0           63
 2 Blue   Light               47.3           50
 3 Blue   Medium              49.0          104
 4 Brown  Heavy               51.0          108
 5 Brown  Light               47.3           81
 6 Brown  Medium              49.0          185
 7 Green  Heavy               51.0           69
 8 Green  Light               47.3           50
 9 Green  Medium              49.0          103
10 Orange Heavy               51.0           57
11 Orange Light               47.3           43
12 Orange Medium              49.0           99
13 Red    Heavy               51.0           99
14 Red    Light               47.3           59
15 Red    Medium              49.0          130
16 Yellow Heavy               51.0          136
17 Yellow Light               47.3           97
18 Yellow Medium              49.0          180</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="notes">
<p>summarize() will compute a summary function (e.g., mean, maximum, last) across a variable grouping your data first lets you summarize based on subsets within 1 or more columns group_by() a categorical variable then pipe it into a summarize() the resulting tibble will ONLY have the columns you created in the summarize()</p>
<p>In the example with both mean weight and total number of M&amp;Ms, both summary values are computed for each color subgroup. Mean weight is identical for all colors; total number is not. Figure out why.</p>
</div>
</section>
</section>
<section id="magrittr-pipes" class="level1">
<h1><code>magrittr</code> &amp; pipes</h1>
<p><img src="../images/comics-memes/une-pipe.png" class="img-fluid"></p>
<hr>
<section id="the-pipe-operators" class="level2">
<h2 class="anchored" data-anchor-id="the-pipe-operators">The Pipe Operator(s)</h2>
<p><img src="../images/icons/tv-icons/dplyr.png" class="absolute" data-top="-1.5em" data-right="4em"> <img src="../images/icons/tv-icons/magrittr.png" class="absolute" data-top="-1.5em" data-right="0em"></p>
<p><span class="keyword">Pipes</span> create <span class="keyword">pipelines</span>, human-readable alternative to multiple embedded functions.</p>
<div class="container-fluid">
<div class="row">
<div class="fragment">
<div class="sourceCode" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>as much as you <span class="fu">like</span>(change it with <span class="cf">function</span> <span class="fu">Y</span>(change it with <span class="cf">function</span> <span class="fu">X</span>(create some data)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="row" style="margin-top: 1em;">
<div class="col-6 fragment">
<div class="sourceCode" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>create some data <span class="sc">|&gt;</span> </span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>    change it with <span class="cf">function</span> X <span class="sc">|&gt;</span> </span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>    change it with <span class="cf">function</span> Y <span class="sc">|&gt;</span> </span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>    as much as you like</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="col-6 fragment">
<div class="sourceCode" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>mm.tidy <span class="sc">|&gt;</span> </span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Color) <span class="sc">|&gt;</span> </span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">Mean_Number =</span> <span class="fu">mean</span>(Number)) <span class="sc">|&gt;</span> </span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(Mean_Number <span class="sc">&lt;</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="row">
<div class="fragment callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<code>|&gt;</code> vs.&nbsp;<code>%&gt;%</code>
</div>
</div>
<div class="callout-body-container callout-body">
<p><span class="pkg">base</span> R has a native <code>|&gt;</code> pipe. <span class="pkg">magrittr</span> adds the <code>%&gt;%</code> pipe for tidyverse use.</p>
<p>The <code>%&gt;%</code> pipe was the standard for many years in the tidyverse. It is usable, maintained, and popular, but no longer necessary.</p>
<p>As of R 1.4.0, <code>|&gt;</code> is the <a href="https://r4ds.hadley.nz/data-transform.html#sec-the-pipe">recommend pipe</a> for most uses. Now that it plays nicely with tidyverse pipelines, you can consistently just use <code>|&gt;</code> whether you’re working in the tidyverse or not. Updated D2M-R materials will use the <code>|&gt;</code> pipe going forward, but older materials may still use <code>%&gt;%</code>.</p>
<p><strong>Either works.</strong></p>
</div>
</div>
</div>
</div>
</section>
<section id="pipe-example-18" class="level2" style="font-size: .8em">
<h2 style="font-size: .8em" class="anchored" data-anchor-id="pipe-example-18">Pipe Example (1/8)</h2>
<div class="longer-code">
<div class="cell" style="font-size: 1.1em;" data-output-location="column-fragment">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Begin with mm.tidy</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>mm.tidy</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 180 × 4
     Bag Color  Number Bag_Weight
   &lt;int&gt; &lt;chr&gt;   &lt;dbl&gt;      &lt;dbl&gt;
 1     1 Red        15       49.8
 2     1 Green       9       49.8
 3     1 Blue        3       49.8
 4     1 Orange      3       49.8
 5     1 Yellow      9       49.8
 6     1 Brown      19       49.8
 7     2 Red         9       49.0
 8     2 Green      17       49.0
 9     2 Blue       19       49.0
10     2 Orange      3       49.0
# ℹ 170 more rows</code></pre>
</div>
</div>
</div>
</section>
<section id="pipe-example-28" class="level2 noframenumbering" data-visibility="uncounted" style="font-size: .8em">
<h2 class="noframenumbering anchored" style="font-size: .8em" data-anchor-id="pipe-example-28">Pipe Example (2/8)</h2>
<div class="longer-code">
<div class="cell" style="font-size: 1.1em;" data-output-location="column-fragment">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Begin with mm.tidy</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>mm.tidy <span class="sc">|&gt;</span></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create new column: Primary_Color</span></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">Color_Type =</span> <span class="fu">case_when</span>(</span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a>            Color <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Red"</span>, <span class="st">"Blue"</span>, <span class="st">"Yellow"</span>) <span class="sc">~</span> <span class="st">"Primary"</span>,</span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a>            <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Secondary"</span>),    </span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a>        )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 180 × 5
     Bag Color  Number Bag_Weight Color_Type
   &lt;int&gt; &lt;chr&gt;   &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;     
 1     1 Red        15       49.8 Primary   
 2     1 Green       9       49.8 Secondary 
 3     1 Blue        3       49.8 Primary   
 4     1 Orange      3       49.8 Secondary 
 5     1 Yellow      9       49.8 Primary   
 6     1 Brown      19       49.8 Secondary 
 7     2 Red         9       49.0 Primary   
 8     2 Green      17       49.0 Secondary 
 9     2 Blue       19       49.0 Primary   
10     2 Orange      3       49.0 Secondary 
# ℹ 170 more rows</code></pre>
</div>
</div>
</div>
</section>
<section id="pipe-example-38" class="level2 noframenumbering" data-visibility="uncounted" style="font-size: .8em">
<h2 class="noframenumbering anchored" style="font-size: .8em" data-anchor-id="pipe-example-38">Pipe Example (3/8)</h2>
<div class="longer-code">
<div class="cell" style="font-size: 1.1em;" data-output-location="column-fragment">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Begin with mm.tidy</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>mm.tidy <span class="sc">|&gt;</span></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create new column: Primary_Color</span></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">Color_Type =</span> <span class="fu">case_when</span>(</span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>            Color <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Red"</span>, <span class="st">"Blue"</span>, <span class="st">"Yellow"</span>) <span class="sc">~</span> <span class="st">"Primary"</span>,</span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a>            <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Secondary"</span>),    </span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">|&gt;</span> </span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Group by color type &amp; bag</span></span>
<span id="cb79-10"><a href="#cb79-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Color_Type, Bag)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 180 × 5
# Groups:   Color_Type, Bag [60]
     Bag Color  Number Bag_Weight Color_Type
   &lt;int&gt; &lt;chr&gt;   &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;     
 1     1 Red        15       49.8 Primary   
 2     1 Green       9       49.8 Secondary 
 3     1 Blue        3       49.8 Primary   
 4     1 Orange      3       49.8 Secondary 
 5     1 Yellow      9       49.8 Primary   
 6     1 Brown      19       49.8 Secondary 
 7     2 Red         9       49.0 Primary   
 8     2 Green      17       49.0 Secondary 
 9     2 Blue       19       49.0 Primary   
10     2 Orange      3       49.0 Secondary 
# ℹ 170 more rows</code></pre>
</div>
</div>
</div>
</section>
<section id="pipe-example-48" class="level2 noframenumbering" data-visibility="uncounted" style="font-size: .8em">
<h2 class="noframenumbering anchored" style="font-size: .8em" data-anchor-id="pipe-example-48">Pipe Example (4/8)</h2>
<div class="longer-code">
<div class="cell" style="font-size: 1.1em;" data-output-location="column-fragment">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Begin with mm.tidy</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>mm.tidy <span class="sc">|&gt;</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create new column: Primary_Color</span></span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">Color_Type =</span> <span class="fu">case_when</span>(</span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a>            Color <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Red"</span>, <span class="st">"Blue"</span>, <span class="st">"Yellow"</span>) <span class="sc">~</span> <span class="st">"Primary"</span>,</span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a>            <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Secondary"</span>),    </span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">|&gt;</span> </span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Group by color type &amp; bag</span></span>
<span id="cb81-10"><a href="#cb81-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Color_Type, Bag) <span class="sc">|&gt;</span></span>
<span id="cb81-11"><a href="#cb81-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Summarize total M&amp;Ms per group</span></span>
<span id="cb81-12"><a href="#cb81-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">Total_Number =</span> <span class="fu">sum</span>(Number))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 60 × 3
# Groups:   Color_Type [2]
   Color_Type   Bag Total_Number
   &lt;chr&gt;      &lt;int&gt;        &lt;dbl&gt;
 1 Primary        1           27
 2 Primary        2           31
 3 Primary        3           39
 4 Primary        4           34
 5 Primary        5           39
 6 Primary        6           35
 7 Primary        7           35
 8 Primary        8           32
 9 Primary        9           32
10 Primary       10           20
# ℹ 50 more rows</code></pre>
</div>
</div>
</div>
</section>
<section id="pipe-example-58" class="level2 noframenumbering" data-visibility="uncounted" style="font-size: .8em">
<h2 class="noframenumbering anchored" style="font-size: .8em" data-anchor-id="pipe-example-58">Pipe Example (5/8)</h2>
<div class="longer-code">
<div class="cell" style="font-size: 1.1em;" data-output-location="column-fragment">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Begin with mm.tidy</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>mm.tidy <span class="sc">|&gt;</span></span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create new column: Primary_Color</span></span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">Color_Type =</span> <span class="fu">case_when</span>(</span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>            Color <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Red"</span>, <span class="st">"Blue"</span>, <span class="st">"Yellow"</span>) <span class="sc">~</span> <span class="st">"Primary"</span>,</span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a>            <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Secondary"</span>),    </span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">|&gt;</span> </span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Group by color type &amp; bag</span></span>
<span id="cb83-10"><a href="#cb83-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Color_Type, Bag) <span class="sc">|&gt;</span></span>
<span id="cb83-11"><a href="#cb83-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Summarize total M&amp;Ms per group</span></span>
<span id="cb83-12"><a href="#cb83-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">Total_Number =</span> <span class="fu">sum</span>(Number)) <span class="sc">|&gt;</span></span>
<span id="cb83-13"><a href="#cb83-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Arrange by bag then color_type</span></span>
<span id="cb83-14"><a href="#cb83-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(Bag, Color_Type)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 60 × 3
# Groups:   Color_Type [2]
   Color_Type   Bag Total_Number
   &lt;chr&gt;      &lt;int&gt;        &lt;dbl&gt;
 1 Primary        1           27
 2 Secondary      1           31
 3 Primary        2           31
 4 Secondary      2           28
 5 Primary        3           39
 6 Secondary      3           20
 7 Primary        4           34
 8 Secondary      4           23
 9 Primary        5           39
10 Secondary      5           16
# ℹ 50 more rows</code></pre>
</div>
</div>
</div>
</section>
<section id="pipe-example-68" class="level2 noframenumbering" data-visibility="uncounted" style="font-size: .8em">
<h2 class="noframenumbering anchored" style="font-size: .8em" data-anchor-id="pipe-example-68">Pipe Example (6/8)</h2>
<div class="longer-code">
<div class="cell" style="font-size: 1.1em;" data-output-location="column-fragment">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Begin with mm.tidy</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>mm.tidy <span class="sc">|&gt;</span></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create new column: Primary_Color</span></span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">Color_Type =</span> <span class="fu">case_when</span>(</span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a>            Color <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Red"</span>, <span class="st">"Blue"</span>, <span class="st">"Yellow"</span>) <span class="sc">~</span> <span class="st">"Primary"</span>,</span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a>            <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Secondary"</span>),    </span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">|&gt;</span> </span>
<span id="cb85-9"><a href="#cb85-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Group by color type &amp; bag</span></span>
<span id="cb85-10"><a href="#cb85-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Color_Type, Bag) <span class="sc">|&gt;</span></span>
<span id="cb85-11"><a href="#cb85-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Summarize total M&amp;Ms per group</span></span>
<span id="cb85-12"><a href="#cb85-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">Total_Number =</span> <span class="fu">sum</span>(Number)) <span class="sc">|&gt;</span></span>
<span id="cb85-13"><a href="#cb85-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Arrange by bag then color_type</span></span>
<span id="cb85-14"><a href="#cb85-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(Bag, Color_Type) <span class="sc">|&gt;</span> </span>
<span id="cb85-15"><a href="#cb85-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Pivot wider: one row per bag</span></span>
<span id="cb85-16"><a href="#cb85-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb85-17"><a href="#cb85-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_from =</span> Color_Type,</span>
<span id="cb85-18"><a href="#cb85-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_from =</span> Total_Number</span>
<span id="cb85-19"><a href="#cb85-19" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 30 × 3
     Bag Primary Secondary
   &lt;int&gt;   &lt;dbl&gt;     &lt;dbl&gt;
 1     1      27        31
 2     2      31        28
 3     3      39        20
 4     4      34        23
 5     5      39        16
 6     6      35        23
 7     7      35        23
 8     8      32        29
 9     9      32        26
10    10      20        33
# ℹ 20 more rows</code></pre>
</div>
</div>
</div>
<div class="notes">
<p>We haven’t talked about pivot wider yet but it’s coming up next!</p>
</div>
</section>
<section id="pipe-example-78" class="level2 noframenumbering" data-visibility="uncounted" style="font-size: .8em">
<h2 class="noframenumbering anchored" style="font-size: .8em" data-anchor-id="pipe-example-78">Pipe Example (7/8)</h2>
<div class="longer-code">
<div class="cell" style="font-size: 1.1em;" data-output-location="column-fragment">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Begin with mm.tidy</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>mm.tidy <span class="sc">|&gt;</span></span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create new column: Primary_Color</span></span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">Color_Type =</span> <span class="fu">case_when</span>(</span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>            Color <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Red"</span>, <span class="st">"Blue"</span>, <span class="st">"Yellow"</span>) <span class="sc">~</span> <span class="st">"Primary"</span>,</span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a>            <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Secondary"</span>),    </span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">|&gt;</span> </span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Group by color type &amp; bag</span></span>
<span id="cb87-10"><a href="#cb87-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Color_Type, Bag) <span class="sc">|&gt;</span></span>
<span id="cb87-11"><a href="#cb87-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Summarize total M&amp;Ms per group</span></span>
<span id="cb87-12"><a href="#cb87-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">Total_Number =</span> <span class="fu">sum</span>(Number)) <span class="sc">|&gt;</span></span>
<span id="cb87-13"><a href="#cb87-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Arrange by bag then color_type</span></span>
<span id="cb87-14"><a href="#cb87-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(Bag, Color_Type) <span class="sc">|&gt;</span> </span>
<span id="cb87-15"><a href="#cb87-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Pivot wider: one row per bag</span></span>
<span id="cb87-16"><a href="#cb87-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb87-17"><a href="#cb87-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_from =</span> Color_Type,</span>
<span id="cb87-18"><a href="#cb87-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_from =</span> Total_Number</span>
<span id="cb87-19"><a href="#cb87-19" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span> </span>
<span id="cb87-20"><a href="#cb87-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add column determining which color type is more prevalent</span></span>
<span id="cb87-21"><a href="#cb87-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb87-22"><a href="#cb87-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">More_Prevalent =</span> </span>
<span id="cb87-23"><a href="#cb87-23" aria-hidden="true" tabindex="-1"></a>            <span class="fu">case_when</span>(</span>
<span id="cb87-24"><a href="#cb87-24" aria-hidden="true" tabindex="-1"></a>                Primary <span class="sc">&gt;</span> Secondary <span class="sc">~</span> <span class="st">"Primary"</span>,</span>
<span id="cb87-25"><a href="#cb87-25" aria-hidden="true" tabindex="-1"></a>                Primary <span class="sc">&lt;</span> Secondary <span class="sc">~</span> <span class="st">"Secondary"</span>,</span>
<span id="cb87-26"><a href="#cb87-26" aria-hidden="true" tabindex="-1"></a>                <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Equal"</span></span>
<span id="cb87-27"><a href="#cb87-27" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb87-28"><a href="#cb87-28" aria-hidden="true" tabindex="-1"></a>    ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 30 × 4
     Bag Primary Secondary More_Prevalent
   &lt;int&gt;   &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;         
 1     1      27        31 Secondary     
 2     2      31        28 Primary       
 3     3      39        20 Primary       
 4     4      34        23 Primary       
 5     5      39        16 Primary       
 6     6      35        23 Primary       
 7     7      35        23 Primary       
 8     8      32        29 Primary       
 9     9      32        26 Primary       
10    10      20        33 Secondary     
# ℹ 20 more rows</code></pre>
</div>
</div>
</div>
</section>
<section id="pipe-example-88" class="level2 noframenumbering" data-visibility="uncounted" style="font-size: .8em">
<h2 class="noframenumbering anchored" style="font-size: .8em" data-anchor-id="pipe-example-88">Pipe Example (8/8)</h2>
<div class="longer-code">
<div class="cell" style="font-size: 1.1em;" data-output-location="column-fragment">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Begin with mm.tidy</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>mm.tidy <span class="sc">|&gt;</span></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create new column: Primary_Color</span></span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">Color_Type =</span> <span class="fu">case_when</span>(</span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a>            Color <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Red"</span>, <span class="st">"Blue"</span>, <span class="st">"Yellow"</span>) <span class="sc">~</span> <span class="st">"Primary"</span>,</span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a>            <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Secondary"</span>),    </span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">|&gt;</span> </span>
<span id="cb89-9"><a href="#cb89-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Group by color type &amp; bag</span></span>
<span id="cb89-10"><a href="#cb89-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Color_Type, Bag) <span class="sc">|&gt;</span></span>
<span id="cb89-11"><a href="#cb89-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Summarize total M&amp;Ms per group</span></span>
<span id="cb89-12"><a href="#cb89-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">Total_Number =</span> <span class="fu">sum</span>(Number)) <span class="sc">|&gt;</span></span>
<span id="cb89-13"><a href="#cb89-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Arrange by bag then color_type</span></span>
<span id="cb89-14"><a href="#cb89-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(Bag, Color_Type) <span class="sc">|&gt;</span> </span>
<span id="cb89-15"><a href="#cb89-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Pivot wider: one row per bag</span></span>
<span id="cb89-16"><a href="#cb89-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb89-17"><a href="#cb89-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_from =</span> Color_Type,</span>
<span id="cb89-18"><a href="#cb89-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_from =</span> Total_Number</span>
<span id="cb89-19"><a href="#cb89-19" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span> </span>
<span id="cb89-20"><a href="#cb89-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add column determining which color type is more prevalent</span></span>
<span id="cb89-21"><a href="#cb89-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb89-22"><a href="#cb89-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">More_Prevalent =</span> </span>
<span id="cb89-23"><a href="#cb89-23" aria-hidden="true" tabindex="-1"></a>            <span class="fu">case_when</span>(</span>
<span id="cb89-24"><a href="#cb89-24" aria-hidden="true" tabindex="-1"></a>                Primary <span class="sc">&gt;</span> Secondary <span class="sc">~</span> <span class="st">"Primary"</span>,</span>
<span id="cb89-25"><a href="#cb89-25" aria-hidden="true" tabindex="-1"></a>                Primary <span class="sc">&lt;</span> Secondary <span class="sc">~</span> <span class="st">"Secondary"</span>,</span>
<span id="cb89-26"><a href="#cb89-26" aria-hidden="true" tabindex="-1"></a>                <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Equal"</span></span>
<span id="cb89-27"><a href="#cb89-27" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb89-28"><a href="#cb89-28" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span> </span>
<span id="cb89-29"><a href="#cb89-29" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Filter to only bags where primary and secondary are equal</span></span>
<span id="cb89-30"><a href="#cb89-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(More_Prevalent <span class="sc">==</span> <span class="st">"Equal"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 4
    Bag Primary Secondary More_Prevalent
  &lt;int&gt;   &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;         
1    11      29        29 Equal         </code></pre>
</div>
</div>
</div>
</section>
</section>
<section id="combining-datasets" class="level1">
<h1>Combining datasets</h1>
<p><em>Bridging <code>base</code>, <code>dplyr</code> and <code>tidyr</code></em></p>
<div class="notes">
<p>This is stuff from <code>dplyr</code> (and some analogs in base R), but conceptually it’s related to reshaping data with <code>tidyr</code>.</p>
</div>
<section id="bind-and-join-datasets" class="level2">
<h2 class="anchored" data-anchor-id="bind-and-join-datasets">Bind and join datasets</h2>
<p>Two major categories of dataset combination: <span class="keyword"><em>binding</em></span> &amp; <span class="keyword"><em>joining</em></span>.</p>
<div class="container-fluid">
<div class="row equal-height" style="height: 50vh;">
<div class="col-6">
<div class="large fragment callout callout-style-default callout-note no-icon callout-titled" style="font-size: 1.1em;">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span style="padding-left:1em;">⬅︎ Append with <code>bind</code></span>
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>“Stack” datasets horizontally or vertically</li>
<li>Assumes similarly structured data frames (or tibbles)</li>
<li>Options from both <span class="pkg">base</span> R and <span class="pkg">dplyr</span></li>
</ul>
</div>
</div>
</div>
<div class="col-6">
<div class="large fragment callout callout-style-default callout-tip no-icon callout-titled" style="font-size: 1.1em;">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span style="padding-left:1em;">➡ Merge with <code>join</code></span>
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Combine datasets based on common columns</li>
<li>Works with tibbles and data.frames of variable structure</li>
<li>Core functionality from <span class="pkg">dplyr</span></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<hr>
</section>
<section id="example-tibbles" class="level2">
<h2 class="anchored" data-anchor-id="example-tibbles">Example Tibbles</h2>
<div class="container-fluid">
<div class="row">
<div class="col-4">
<p><code>tibble1</code></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
   col1  col2  col3
  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1     1     6    11
2     2     7    12
3     3     8    13
4     4     9    14
5     5    10    15</code></pre>
</div>
</div>
</div>
<div class="col-4">
<p><code>tibble2</code></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
   col1  col2  col3
  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1    16    21    26
2    17    22    27
3    18    23    28
4    19    24    29
5    20    25    30</code></pre>
</div>
</div>
</div>
<div class="col-4">
<p><code>tibble3</code></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
   col1  col2  col3  col4
  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1    16    21    26    31
2    17    22    27    32
3    18    23    28    33
4    19    24    29    34
5    20    25    30    35</code></pre>
</div>
</div>
</div>
</div>
<div class="row">
<div class="col-6">
<p><code>tibble4</code></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  col_1 col_2 col_3
  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1    16    21    26
2    17    22    27
3    18    23    28
4    19    24    29
5    20    25    30</code></pre>
</div>
</div>
</div>
<div class="col-6">
<p><code>tibble5</code></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
   col1  col2  col3
  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1    16    21    26
2    17    22    27
3    18    23    28
4    19    24    29
5    20    25    30
6    21    26    31</code></pre>
</div>
</div>
</div>
</div>
</div>
<hr>
</section>
<section id="binding-rows" class="level2" style="font-size: .8em">
<h2 style="font-size: .8em" class="anchored" data-anchor-id="binding-rows">Binding Rows</h2>
<p><img src="../images/icons/tv-icons/dplyr.png" class="absolute" data-top="1em" data-right="1em"></p>
<div class="container-fluid">
<div class="row">
<div class="col-12 fragment">
<p>Append <strong>rows</strong> of one dataframe after the last row of another.</p>
</div>
</div>
<div class="row">
<div class="col-6">
<div class="card fragment h-100">
<div class="card-header">
<div class="card-title" style="color: #fff">
<p><span class="func">rbind</span></p>
</div>
</div>
<div class="card-body lessgap nonincremental">
<ul>
<li>Base R function</li>
<li>dfs must have exactly the same columns in exactly the same order</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(tibble1, tibble2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 3
    col1  col2  col3
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1     1     6    11
 2     2     7    12
 3     3     8    13
 4     4     9    14
 5     5    10    15
 6    16    21    26
 7    17    22    27
 8    18    23    28
 9    19    24    29
10    20    25    30</code></pre>
</div>
</div>
<div class="sourceCode" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(tibble1, tibble3) <span class="co"># error: col4 in tibble3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="col-6">
<div class="card fragment card-alt1 h-100">
<div class="card-header">
<div class="card-title" style="color: #fff">
<p><span class="func">bind_rows()</span></p>
</div>
</div>
<div class="card-body lessgap nonincremental">
<ul>
<li>Can have different columns</li>
<li>Missing values -&gt; <code>NA</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bind_rows</span>(tibble1, tibble3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 4
    col1  col2  col3  col4
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1     1     6    11    NA
 2     2     7    12    NA
 3     3     8    13    NA
 4     4     9    14    NA
 5     5    10    15    NA
 6    16    21    26    31
 7    17    22    27    32
 8    18    23    28    33
 9    19    24    29    34
10    20    25    30    35</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<hr>
</section>
<section id="binding-columns" class="level2" style="font-size: .8em">
<h2 style="font-size: .8em" class="anchored" data-anchor-id="binding-columns">Binding Columns</h2>
<p><img src="../images/icons/tv-icons/dplyr.png" class="absolute" data-top="1em" data-right="1em"></p>
<div class="container-fluid">
<div class="row">
<div class="col-12 fragment">
<p>Append <strong>columns</strong> of one dataframe after the last column of another.</p>
</div>
</div>
<div class="row">
<div class="col-6">
<div class="card fragment h-100">
<div class="card-header">
<div class="card-title" style="color: #fff">
<p><span class="func">cbind</span></p>
</div>
</div>
<div class="card-body lessgap nonincremental">
<ul>
<li>Base R function</li>
<li>dfs must have same number rows</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(tibble1, tibble4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  col1 col2 col3 col_1 col_2 col_3
1    1    6   11    16    21    26
2    2    7   12    17    22    27
3    3    8   13    18    23    28
4    4    9   14    19    24    29
5    5   10   15    20    25    30</code></pre>
</div>
</div>
<div class="sourceCode" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(tibble1, tibble5) </span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Error in data.frame(..., check.names = FALSE) :</span></span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a><span class="co"># arguments imply differing number of rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="col-6">
<div class="card fragment card-alt1 h-100">
<div class="card-header">
<div class="card-title" style="color: #fff">
<p><span class="func">bind_cols()</span></p>
</div>
</div>
<div class="card-body lessgap nonincremental">
<ul>
<li><code>dplyr</code> function</li>
<li>dfs must have same number rows</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bind_cols</span>(tibble1, tibble3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 7
  col1...1 col2...2 col3...3 col1...4 col2...5 col3...6  col4
     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;
1        1        6       11       16       21       26    31
2        2        7       12       17       22       27    32
3        3        8       13       18       23       28    33
4        4        9       14       19       24       29    34
5        5       10       15       20       25       30    35</code></pre>
</div>
</div>
<div class="sourceCode" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a><span class="fu">bind_cols</span>(tibble1, tibble5) </span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Error in `bind_cols()`:</span></span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a><span class="co"># ! Can't recycle `..1` (size 5) to match `..2` (size 6).</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="bubble-chain">
<p class="bubble-left fragment">
If they work the same, which one should I use?
</p>
<p class="bubble-right fragment">
Neither! Use joins instead.
</p>
</div>
</section>
<section id="joins-sql-style" class="level2 left-sidebar-slide" data-fullscreen="true" style="font-size: .8;">
<h2 class="left-sidebar-slide anchored" data-fullscreen="true" style="font-size: .8;" data-anchor-id="joins-sql-style">Joins (SQL-style)</h2>
<div class="sidebar-column">
<div class="sidebar-title">
<p>Joins</p>
</div>
<ul>
<li>Similar to database joins (SQL)</li>
<li>2 tibbles of 2 structures
<ul>
<li>different rows</li>
<li>different columns</li>
</ul></li>
<li>Match rows based on common column(s)
<ul>
<li>1 col: values are unique IDs</li>
<li>2+ cols: values form unique ID combos</li>
</ul></li>
</ul>
</div>
<div class="main-content" style="display: flex; align-items: center; justify-content: center; height: 100%;">
<div class="r-stretch" style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 0.8em; align-items: center;">
<div class="fragment">
<p><img src="../images/misc/joins/setup.png" class="img-fluid"></p>
</div>
<div class="fragment" style="display: flex; align-items: center; justify-content: center;">
<p><i class="bi-arrow-right-circle-fill " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="fragment">
<p><img src="../images/misc/joins/setup2.png" class="img-fluid"></p>
</div>
</div>
</div>
</section>
<section id="left_join-keep-left-df-rows" class="level2" style="font-size: .8em">
<h2 style="font-size: .8em" class="anchored" data-anchor-id="left_join-keep-left-df-rows"><code>left_join</code>: Keep left-df rows</h2>
<p><img src="../images/icons/tv-icons/dplyr.png" class="absolute" data-top="-1.5em" data-right="0em"></p>
<div class="container-fluid" style="font-size: .9em;">
<div class="row">
<div class="col-5">
<div class="overlap-box">
<div class="box-title">
<p>Left Join</p>
</div>
<div class="box-content">
<div class="sourceCode" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="fu">left_join</span>(</span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>  x,</span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>  y,</span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">join_by</span>(col1, x_col2 <span class="sc">==</span> y_col2)</span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a>  ...</span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="tightlist">
<ul>
<li>Start with all rows in <strong>left</strong> df <code>x</code></li>
<li>Look for matching rows in <strong>right</strong> df <code>y</code>
<ul>
<li>Keep rows from right df <code>y</code> that match</li>
<li>Drop unmatched rows from right df <code>y</code></li>
</ul></li>
<li>Combine columns from right df <code>y</code> into left df <code>x</code>
<ul>
<li>Matched rows have values in new cols</li>
<li>Unmatched rows have <code>NA</code> in new cols</li>
</ul></li>
<li>Default: <code>by = NULL</code> -&gt; uses all common column names</li>
<li>Specify common columns with <code>by = join_by()</code>
<ul>
<li>If same name in both dfs, just use column name</li>
<li>If different names, use <code>x_col == y_col</code> format</li>
</ul></li>
<li>Additional arguments for handling suffixes, etc.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="col-7" style="margin-top: -4em">
<div class="row">
<div class="col-12">
<p><img src="../images/misc/joins/left.png" class="img-fluid" style="max-height: 10em"></p>
</div>
</div>
<div class="row">
<div class="col-4">
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>band_members</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  name  band   
  &lt;chr&gt; &lt;chr&gt;  
1 Mick  Stones 
2 John  Beatles
3 Paul  Beatles</code></pre>
</div>
</div>
</div>
<div class="col-4">
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>band_instruments</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  name  plays 
  &lt;chr&gt; &lt;chr&gt; 
1 John  guitar
2 Paul  bass  
3 Keith guitar</code></pre>
</div>
</div>
</div>
<div class="col-4">
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>band_instruments2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  artist plays 
  &lt;chr&gt;  &lt;chr&gt; 
1 John   guitar
2 Paul   bass  
3 Keith  guitar</code></pre>
</div>
</div>
</div>
</div>
<div class="row">
<div class="col-6">
<div style="margin-top: 1em;">
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="fu">left_join</span>(band_members, </span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>    band_instruments</span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  name  band    plays 
  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; 
1 Mick  Stones  &lt;NA&gt;  
2 John  Beatles guitar
3 Paul  Beatles bass  </code></pre>
</div>
</div>
</div>
</div>
<div class="col-6">
<div style="margin-top: 1em;">
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="fu">left_join</span>(band_members, </span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>    band_instruments2, </span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="fu">join_by</span>(name <span class="sc">==</span> artist))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  name  band    plays 
  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; 
1 Mick  Stones  &lt;NA&gt;  
2 John  Beatles guitar
3 Paul  Beatles bass  </code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="right_join-keep-right-df-rows" class="level2" style="font-size: .8em">
<h2 style="font-size: .8em" class="anchored" data-anchor-id="right_join-keep-right-df-rows"><code>right_join</code>: Keep right-df rows</h2>
<p><img src="../images/icons/tv-icons/dplyr.png" class="absolute" data-top="-1.5em" data-right="0em"></p>
<div class="container-fluid" style="font-size: .9em;">
<div class="row">
<div class="col-5">
<div class="overlap-box">
<div class="box-title">
<p>Right Join</p>
</div>
<div class="box-content">
<div class="sourceCode" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="fu">right_join</span>(</span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a>  x,</span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a>  y,</span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">join_by</span>(col1, x_col2 <span class="sc">==</span> y_col2)</span>
<span id="cb118-5"><a href="#cb118-5" aria-hidden="true" tabindex="-1"></a>  ...</span>
<span id="cb118-6"><a href="#cb118-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="tightlist">
<ul>
<li>Start with all rows in <strong>right</strong> df <code>y</code></li>
<li>Look for matching rows in <strong>left</strong> df <code>x</code>
<ul>
<li>Keep rows from left df <code>x</code> that match</li>
<li>Drop unmatched rows from left df <code>x</code></li>
</ul></li>
<li>Combine columns from left df <code>x</code> into right df <code>y</code>
<ul>
<li>Matched rows have values in new cols</li>
<li>Unmatched rows have <code>NA</code> in new cols</li>
</ul></li>
</ul>
</div>
<div class="fragment">
<p><strong><code>right_join(x,y)</code> is identical to <code>left_join(y,x)</code></strong></p>
</div>
</div>
</div>
</div>
<div class="col-7" style="margin-top: -4em">
<div class="row">
<div class="col-12">
<p><img src="../images/misc/joins/right.png" class="img-fluid" style="max-height: 10em"></p>
</div>
</div>
<div class="row">
<div class="col-4">
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>band_members</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  name  band   
  &lt;chr&gt; &lt;chr&gt;  
1 Mick  Stones 
2 John  Beatles
3 Paul  Beatles</code></pre>
</div>
</div>
</div>
<div class="col-4">
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>band_instruments</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  name  plays 
  &lt;chr&gt; &lt;chr&gt; 
1 John  guitar
2 Paul  bass  
3 Keith guitar</code></pre>
</div>
</div>
</div>
<div class="col-4">
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>band_instruments2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  artist plays 
  &lt;chr&gt;  &lt;chr&gt; 
1 John   guitar
2 Paul   bass  
3 Keith  guitar</code></pre>
</div>
</div>
</div>
</div>
<div class="row">
<div class="col-6">
<div style="margin-top: 1em;">
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="fu">right_join</span>(band_members, </span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>    band_instruments</span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  name  band    plays 
  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; 
1 John  Beatles guitar
2 Paul  Beatles bass  
3 Keith &lt;NA&gt;    guitar</code></pre>
</div>
</div>
</div>
</div>
<div class="col-6">
<div style="margin-top: 1em;">
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="fu">right_join</span>(band_members, </span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a>    band_instruments2, </span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="fu">join_by</span>(name <span class="sc">==</span> artist))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  name  band    plays 
  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; 
1 John  Beatles guitar
2 Paul  Beatles bass  
3 Keith &lt;NA&gt;    guitar</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="inner_join-keep-only-matched-rows" class="level2" style="font-size: .8em">
<h2 style="font-size: .8em" class="anchored" data-anchor-id="inner_join-keep-only-matched-rows"><code>inner_join</code>: Keep only matched rows</h2>
<p><img src="../images/icons/tv-icons/dplyr.png" class="absolute" data-top="-1.5em" data-right="0em"></p>
<div class="container-fluid" style="font-size: .9em;">
<div class="row">
<div class="col-5">
<div class="overlap-box">
<div class="box-title">
<p>Inner Join</p>
</div>
<div class="box-content">
<div class="sourceCode" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inner_join</span>(</span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a>  x,</span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a>  y,</span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">join_by</span>(col1, x_col2 <span class="sc">==</span> y_col2)</span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a>  ...</span>
<span id="cb129-6"><a href="#cb129-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="tightlist">
<ul>
<li>Start with all rows in left df <code>x</code></li>
<li>Look for matching rows in right df <code>y</code>
<ul>
<li>Keep rows from right df <code>y</code> that match</li>
<li>Drop unmatched rows from right df <code>y</code></li>
</ul></li>
<li>Continue with the modified <code>y</code></li>
<li>Look for matching rows in left df <code>x</code>
<ul>
<li>Keep rows from left df <code>x</code> that match</li>
<li>Drop unmatched rows from left df <code>x</code></li>
</ul></li>
<li>Combine columns from modified right df <code>y</code> into modified left df <code>x</code>
<ul>
<li>Only matched rows exist</li>
<li>Nothing is filled with <code>NA</code></li>
</ul></li>
</ul>
</div>
<div class="fragment">
<p><strong>Same as <code>left_join(x,y)</code> then <code>right_join(x,y)</code> (or vice versa)</strong></p>
</div>
</div>
</div>
</div>
<div class="col-7" style="margin-top: -4em">
<div class="row">
<div class="col-12">
<p><img src="../images/misc/joins/inner.png" class="img-fluid" style="max-height: 10em"></p>
</div>
</div>
<div class="row">
<div class="col-4">
<div class="cell">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>band_members</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  name  band   
  &lt;chr&gt; &lt;chr&gt;  
1 Mick  Stones 
2 John  Beatles
3 Paul  Beatles</code></pre>
</div>
</div>
</div>
<div class="col-4">
<div class="cell">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a>band_instruments</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  name  plays 
  &lt;chr&gt; &lt;chr&gt; 
1 John  guitar
2 Paul  bass  
3 Keith guitar</code></pre>
</div>
</div>
</div>
<div class="col-4">
<div class="cell">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a>band_instruments2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  artist plays 
  &lt;chr&gt;  &lt;chr&gt; 
1 John   guitar
2 Paul   bass  
3 Keith  guitar</code></pre>
</div>
</div>
</div>
</div>
<div class="row">
<div class="col-6">
<div style="margin-top: 1em;">
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inner_join</span>(band_members, </span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a>    band_instruments</span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  name  band    plays 
  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; 
1 John  Beatles guitar
2 Paul  Beatles bass  </code></pre>
</div>
</div>
</div>
</div>
<div class="col-6">
<div style="margin-top: 1em;">
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inner_join</span>(band_members, </span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a>    band_instruments2,</span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="fu">join_by</span>(name <span class="sc">==</span> artist))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  name  band    plays 
  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; 
1 John  Beatles guitar
2 Paul  Beatles bass  </code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="full_join-keep-all-rows" class="level2" style="font-size: .8em">
<h2 style="font-size: .8em" class="anchored" data-anchor-id="full_join-keep-all-rows"><code>full_join</code>: Keep all rows</h2>
<p><img src="../images/icons/tv-icons/dplyr.png" class="absolute" data-top="-1.5em" data-right="0em"></p>
<div class="container-fluid" style="font-size: .9em;">
<div class="row">
<div class="col-5">
<div class="overlap-box">
<div class="box-title">
<p>Full Join</p>
</div>
<div class="box-content">
<div class="sourceCode" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="fu">full_join</span>(</span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a>  x,</span>
<span id="cb140-3"><a href="#cb140-3" aria-hidden="true" tabindex="-1"></a>  y,</span>
<span id="cb140-4"><a href="#cb140-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">join_by</span>(col1, x_col2 <span class="sc">==</span> y_col2)</span>
<span id="cb140-5"><a href="#cb140-5" aria-hidden="true" tabindex="-1"></a>  ...</span>
<span id="cb140-6"><a href="#cb140-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="tightlist">
<ul>
<li>Start with all rows in left df <code>x</code></li>
<li>Look for matching rows in right df <code>y</code>
<ul>
<li><em>Keep all rows</em></li>
</ul></li>
<li>Combine columns from right df <code>y</code> into left df <code>x</code>
<ul>
<li>Matched rows have values in new cols</li>
<li>Unmatched rows have <code>NA</code> in new cols</li>
</ul></li>
<li>Continue with the modified <code>y</code></li>
<li>Look for matching rows in left df <code>x</code>
<ul>
<li><em>Keep all rows</em></li>
</ul></li>
<li>Combine columns from modified right df <code>y</code> into modified left df <code>x</code>
<ul>
<li><em>No rows dropped</em></li>
<li>Cols from both <code>x</code> and <code>y</code> may have <code>NA</code>s</li>
</ul></li>
</ul>
</div>
<div class="fragment">
<p><strong>Critically: (1) rows are not duplicated and (2) no data is lost.</strong></p>
</div>
</div>
</div>
</div>
<div class="col-7" style="margin-top: -4em">
<div class="row">
<div class="col-12">
<p><img src="../images/misc/joins/full.png" class="img-fluid" style="max-height: 10em"></p>
</div>
</div>
<div class="row">
<div class="col-4">
<div class="cell">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>band_members</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  name  band   
  &lt;chr&gt; &lt;chr&gt;  
1 Mick  Stones 
2 John  Beatles
3 Paul  Beatles</code></pre>
</div>
</div>
</div>
<div class="col-4">
<div class="cell">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>band_instruments</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  name  plays 
  &lt;chr&gt; &lt;chr&gt; 
1 John  guitar
2 Paul  bass  
3 Keith guitar</code></pre>
</div>
</div>
</div>
<div class="col-4">
<div class="cell">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a>band_instruments2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  artist plays 
  &lt;chr&gt;  &lt;chr&gt; 
1 John   guitar
2 Paul   bass  
3 Keith  guitar</code></pre>
</div>
</div>
</div>
</div>
<div class="row">
<div class="col-6">
<div style="margin-top: 1em;">
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="fu">full_join</span>(band_members, </span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a>    band_instruments</span>
<span id="cb147-3"><a href="#cb147-3" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
  name  band    plays 
  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; 
1 Mick  Stones  &lt;NA&gt;  
2 John  Beatles guitar
3 Paul  Beatles bass  
4 Keith &lt;NA&gt;    guitar</code></pre>
</div>
</div>
</div>
</div>
<div class="col-6">
<div style="margin-top: 1em;">
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">left_join</span>(band_members, </span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a>    band_instruments2,</span>
<span id="cb149-3"><a href="#cb149-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="fu">join_by</span>(name <span class="sc">==</span> artist))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  name  band    plays 
  &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; 
1 Mick  Stones  &lt;NA&gt;  
2 John  Beatles guitar
3 Paul  Beatles bass  </code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="tidyr" class="level1">
<h1><code>tidyr</code></h1>
<section id="example-data-frame-for-tidyr" class="level2">
<h2 class="anchored" data-anchor-id="example-data-frame-for-tidyr">Example data frame for <code>tidyr</code></h2>
<div class="cell" data-output-location="column">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate example data for some tidyr functions</span></span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a>glasses <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">condition =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>),</span>
<span id="cb151-4"><a href="#cb151-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">participant =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">6</span>),</span>
<span id="cb151-5"><a href="#cb151-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">score =</span> <span class="fu">runif</span>(<span class="dv">12</span>),</span>
<span id="cb151-6"><a href="#cb151-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">notes =</span> <span class="fu">c</span>(<span class="st">"glasses_none"</span>, <span class="st">"glasses_none"</span>, <span class="st">"none_none"</span>, <span class="st">"none_none"</span>,</span>
<span id="cb151-7"><a href="#cb151-7" aria-hidden="true" tabindex="-1"></a>              <span class="st">"none_incomplete"</span>, <span class="st">"none_incomplete"</span>, <span class="st">"none_none"</span>, <span class="st">"none_none"</span>,</span>
<span id="cb151-8"><a href="#cb151-8" aria-hidden="true" tabindex="-1"></a>              <span class="st">"glasses_none"</span>, <span class="st">"glasses_none"</span>, <span class="st">"glasses_late"</span>, <span class="st">"glasses_late"</span>)</span>
<span id="cb151-9"><a href="#cb151-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb151-10"><a href="#cb151-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb151-11"><a href="#cb151-11" aria-hidden="true" tabindex="-1"></a>glasses</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 4
   condition participant  score notes          
       &lt;dbl&gt;       &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;          
 1         1           1 0.885  glasses_none   
 2         1           1 0.553  glasses_none   
 3         1           2 0.906  none_none      
 4         1           2 0.587  none_none      
 5         1           3 0.423  none_incomplete
 6         1           3 0.950  none_incomplete
 7         2           4 0.709  none_none      
 8         2           4 0.413  none_none      
 9         2           5 0.0184 glasses_none   
10         2           5 0.567  glasses_none   
11         2           6 0.490  glasses_late   
12         2           6 0.879  glasses_late   </code></pre>
</div>
</div>
</section>
<section id="tidyr-tidy-messy-data" class="level2 left-sidebar-slide" data-fullscreen="true" style="font-size: .8;">
<h2 class="left-sidebar-slide anchored" data-fullscreen="true" style="font-size: .8;" data-anchor-id="tidyr-tidy-messy-data"><code>tidyr</code>: Tidy messy data</h2>
<p><img src="../images/icons/tv-icons/tidyr.png" class="absolute" data-top=".5em" data-left="1em">)</p>
<div class="sidebar-column">
<div class="sidebar-title">
<p><span class="pkg">tidyr</span>: <br> Tidy messy data</p>
</div>
<div class="sidebar-content">
<ul>
<li>Core tidyverse package for data tidying</li>
<li>Functions to reshape, split, merge, nest, and handle missing data</li>
<li>Works seamlessly with <code>dplyr</code> and tidy pipelines</li>
</ul>
</div>
</div>
<div class="main-content">
<div class="r-stretch" style="display: grid; grid-template-columns: repeat(3, 1fr); grid-template-rows: minmax(0, 1fr) minmax(0, 1fr); gap: 0.8em; margin-top: -2em;">
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em 0.2em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><i class="bi-arrow-return-right " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="func">pivot_*</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>Reshape wide and long data</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em 0.2em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><i class="bi-scissors " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="func">separate_*_*</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>Split values into columns</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em 0.2em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><i class="bi-plus-circle " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="func">unite</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>Collapse values across columns</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em 0.2em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><i class="bi-arrows-fullscreen " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="func">expand</span>(+)</p>
</div>
</div>
<div class="box-content" style="text-align: center; overflow: hidden; min-height: 0; font-size: 0.9em; line-height: .9;">
<p>Create missing combinations of data</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em 0.2em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><i class="bi-dash-circle-dotted " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="func">drop_na</span>(+)</p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>Handle missing values</p>
</div>
</div>
<div class="contained-box fragment" style="display: flex; flex-direction: column; align-items: center; padding: 0.4em 0.3em 0.2em 0.3em;">
<div class="box-icon" style="margin-bottom: 0.1em;">
<p><i class="bi-pip " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="box-title" style="font-size: 0.9em; margin-bottom: 0.2em;">
<div style="margin-bottom: -.4em !important; margin-top: -.4em !important;">
<p><span class="func">nest</span></p>
</div>
</div>
<div class="box-content" style="text-align: center;">
<p>Embed tables in tables</p>
</div>
</div>
</div>
</div>
</section>
<section id="wide-vs.-long-data" class="level2">
<h2 class="anchored" data-anchor-id="wide-vs.-long-data">Wide vs.&nbsp;Long Data</h2>
<div class="container-fluid">
<div class="row">
<div class="col-6">
<div class="card fragment h-100">
<div class="card-header">
<div class="card-title" style="color: #fff">
<p>W–I–D–E Data</p>
</div>
</div>
<div class="card-body lessgap">
<ul>
<li>What Excel wants</li>
<li>First column (usually) contains unique values</li>
<li>Compact and human-friendly</li>
<li>Lacks precision</li>
<li>Difficult to manipulate structurally</li>
<li>Create with <code>pivot_wider()</code></li>
</ul>
</div>
</div>
</div>
<div class="col-6">
<div class="card fragment card-alt1 h-100">
<div class="card-header">
<div class="card-title" style="color: #fff">
<p>L<em>oooooo</em>ng Data</p>
</div>
</div>
<div class="card-body lessgap">
<ul>
<li>What the Tidyverse wants</li>
<li>First column (often) repeats values</li>
<li>Difficult to spot patterns or comparisons</li>
<li>Precise &amp; standardized</li>
<li>Easily manipulable</li>
<li>Create with <code>pivot_longer()</code></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="notes">
<p>WIDE</p>
<p>What you’re used to; “the Excel way” First column contains unique values Compact and human-friendly Lacks precision, hard to manipulate structurally create with pivot_wider() formerly/alternatively: spread, cast, pivot, unfold</p>
<p>LONG</p>
<p>What the tidyverse wants First column repeats values Difficulty to spot patterns or comparisons Easily manipulable, precise, standardized create with pivot_longer() formerly/alternatively: gather, melt, unpivot, fold</p>
</div>
</section>
<section id="pivot_longer-reshape-wide-to-long" class="level2" style="font-size: .8em">
<h2 style="font-size: .8em" class="anchored" data-anchor-id="pivot_longer-reshape-wide-to-long"><code>pivot_longer</code>: Reshape wide to long</h2>
<p><img src="../images/icons/tv-icons/tidyr.png" class="absolute" data-top="-1.5em" data-right="0em"></p>
<div class="container-fluid">
<div class="row">
<div class="col-5">
<div class="overlap-box" style="font-size: .9em">
<div class="box-title">
<p>Reshape long:</p>
</div>
<div class="box-content">
<div class="sourceCode" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pivot_longer</span>(</span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a>    data, </span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">c</span>(...), </span>
<span id="cb153-4"><a href="#cb153-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"new_col1"</span>, </span>
<span id="cb153-5"><a href="#cb153-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"new_col2"</span>,</span>
<span id="cb153-6"><a href="#cb153-6" aria-hidden="true" tabindex="-1"></a>    ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="nonincremental fragment" data-fragment-index="1">
<ul>
<li>Move from grid of values to key-value pairs</li>
<li>Human friendly -&gt; tidyverse friendly</li>
</ul>
</div>
<div class="nonincremental fragment" data-fragment-index="2">
<ul>
<li><code>cols = c(...)</code>: Specify columns to pivot
<ul>
<li><em>Which columns contain the data to consolidate?</em></li>
<li>Accepts tidyselect helpers</li>
</ul></li>
</ul>
</div>
<div class="nonincremental fragment" data-fragment-index="3">
<ul>
<li><code>names_to</code> = name of new column for former column names
<ul>
<li><em>Turn the pivoted columns’ <strong>names to</strong> values in this new column.</em></li>
<li>Column names will become strings</li>
</ul></li>
</ul>
</div>
<div class="nonincremental fragment" data-fragment-index="4">
<ul>
<li><code>values_to</code> = name of new column for former values
<ul>
<li><em>Turn the pivoted columns’ <strong>values to</strong> values in this new column.</em></li>
<li>Values must be of the same type</li>
</ul></li>
</ul>
</div>
</div>
</div>
</div>
<div class="col-7" style="margin-top: 1em">
<div class="fragment" data-fragment-index="5">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 30 × 8
     Bag   Red Green  Blue Orange Yellow Brown Weight
   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
 1     1    15     9     3      3      9    19   49.8
 2     2     9    17    19      3      3     8   49.0
 3     3    14     8     6      8     19     4   50.4
 4     4    15     7     3      8     16     8   49.2
 5     5    10     3     7      9     22     4   47.6
 6     6    12     7     6      5     17    11   49.8
 7     7     6     7     3      6     26    10   50.2
 8     8    14    11     4      1     14    17   51.7
 9     9     4     2    10      6     18    18   48.4
10    10     9     9     3      9      8    15   46.2
# ℹ 20 more rows</code></pre>
</div>
</div>
</div>
<div class="row">
<div class="col-12">
<div class="fragment" data-fragment-index="6" style="margin-top: 1em;">
<div class="longer-code">
<div class="cell" data-output-location="column-fragment">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a>mm.long <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(</span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a>    mm.raw,</span>
<span id="cb155-3"><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># pivot columns between Red and Brown</span></span>
<span id="cb155-4"><a href="#cb155-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> Red<span class="sc">:</span>Brown, </span>
<span id="cb155-5"><a href="#cb155-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># column names go to "Color"</span></span>
<span id="cb155-6"><a href="#cb155-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"Color"</span>, </span>
<span id="cb155-7"><a href="#cb155-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># column values go to "Number"</span></span>
<span id="cb155-8"><a href="#cb155-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"Number"</span>) </span>
<span id="cb155-9"><a href="#cb155-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-10"><a href="#cb155-10" aria-hidden="true" tabindex="-1"></a>mm.long</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 180 × 4
     Bag Weight Color  Number
   &lt;int&gt;  &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt;
 1     1   49.8 Red        15
 2     1   49.8 Green       9
 3     1   49.8 Blue        3
 4     1   49.8 Orange      3
 5     1   49.8 Yellow      9
 6     1   49.8 Brown      19
 7     2   49.0 Red         9
 8     2   49.0 Green      17
 9     2   49.0 Blue       19
10     2   49.0 Orange      3
# ℹ 170 more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="pivot_wider-reshape-wide-to-long" class="level2" style="font-size: .8em">
<h2 style="font-size: .8em" class="anchored" data-anchor-id="pivot_wider-reshape-wide-to-long"><code>pivot_wider</code>: Reshape wide to long</h2>
<p><img src="../images/icons/tv-icons/tidyr.png" class="absolute" data-top="-1.5em" data-right="0em"></p>
<div class="container-fluid">
<div class="row">
<div class="col-5">
<div class="overlap-box" style="font-size: .9em">
<div class="box-title">
<p>Reshape wide:</p>
</div>
<div class="box-content">
<div class="sourceCode" id="cb157"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pivot_wider</span>(</span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a>    data, </span>
<span id="cb157-3"><a href="#cb157-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">id_cols =</span> <span class="fu">c</span>(...),</span>
<span id="cb157-4"><a href="#cb157-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> <span class="st">"col1"</span>, </span>
<span id="cb157-5"><a href="#cb157-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> <span class="st">"col2"</span>,</span>
<span id="cb157-6"><a href="#cb157-6" aria-hidden="true" tabindex="-1"></a>    ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="nonincremental fragment" data-fragment-index="1">
<ul>
<li>Move from key-value pairs to grid of values</li>
<li>Tidyverse friendly -&gt; human friendly</li>
</ul>
</div>
<div class="nonincremental fragment" data-fragment-index="2">
<ul>
<li><code>id_cols = c(...)</code>: Specify columns to keep as identifiers
<ul>
<li><em>Which columns should remain as-is (not pivoted)?</em></li>
<li>Defaults to all non-pivoted columns</li>
</ul></li>
</ul>
</div>
<div class="nonincremental fragment" data-fragment-index="3">
<ul>
<li><code>names_from</code> = name of column to use for new column names
<ul>
<li><em>Create column <strong>names from</strong> values in which column?</em></li>
</ul></li>
</ul>
</div>
<div class="nonincremental fragment" data-fragment-index="4">
<ul>
<li><code>values_from</code> = name of column to use for new values
<ul>
<li><em>Fill new columns with <strong>values from</strong> which column?</em></li>
</ul></li>
</ul>
</div>
</div>
</div>
</div>
<div class="col-7" style="margin-top: 1em">
<div class="row">
<div class="col-5">
<div class="fragment" data-fragment-index="5">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 180 × 4
     Bag Weight Color  Number
   &lt;int&gt;  &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt;
 1     1   49.8 Red        15
 2     1   49.8 Green       9
 3     1   49.8 Blue        3
 4     1   49.8 Orange      3
 5     1   49.8 Yellow      9
 6     1   49.8 Brown      19
 7     2   49.0 Red         9
 8     2   49.0 Green      17
 9     2   49.0 Blue       19
10     2   49.0 Orange      3
# ℹ 170 more rows</code></pre>
</div>
</div>
</div>
</div>
<div class="col-7">
<div class="fragment" data-fragment-index="6">
<div class="longer-code">
<div class="sourceCode" id="cb159"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a>mm.wide <span class="ot">&lt;-</span> <span class="fu">pivot_wider</span>(</span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a>    mm.long,</span>
<span id="cb159-3"><a href="#cb159-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Every value in `Color` becomes a column</span></span>
<span id="cb159-4"><a href="#cb159-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> <span class="st">"Color"</span>, </span>
<span id="cb159-5"><a href="#cb159-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Values from `Number` go to new columns</span></span>
<span id="cb159-6"><a href="#cb159-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> <span class="st">"Number"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb159-7"><a href="#cb159-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Move `Weight` column to end</span></span>
<span id="cb159-8"><a href="#cb159-8" aria-hidden="true" tabindex="-1"></a><span class="fu">relocate</span>(Weight, <span class="at">.after =</span> <span class="fu">last_col</span>())</span>
<span id="cb159-9"><a href="#cb159-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-10"><a href="#cb159-10" aria-hidden="true" tabindex="-1"></a>mm.wide</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<div class="row">
<div class="col-12">
<div class="fragment" data-fragment-index="7" style="margin-top: 1em;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 30 × 8
     Bag   Red Green  Blue Orange Yellow Brown Weight
   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
 1     1    15     9     3      3      9    19   49.8
 2     2     9    17    19      3      3     8   49.0
 3     3    14     8     6      8     19     4   50.4
 4     4    15     7     3      8     16     8   49.2
 5     5    10     3     7      9     22     4   47.6
 6     6    12     7     6      5     17    11   49.8
 7     7     6     7     3      6     26    10   50.2
 8     8    14    11     4      1     14    17   51.7
 9     9     4     2    10      6     18    18   48.4
10    10     9     9     3      9      8    15   46.2
# ℹ 20 more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="separate_wider_delim-split-column-into-multiple-columns" class="level2" style="font-size: .8em">
<h2 style="font-size: .8em" class="anchored" data-anchor-id="separate_wider_delim-split-column-into-multiple-columns"><code>separate_wider_delim</code>: Split column into multiple columns</h2>
<p><img src="../images/icons/tv-icons/tidyr.png" class="absolute" data-top="-1.5em" data-right="0em"></p>
<div class="container-fluid">
<div class="row">
<div class="col-5">
<div class="overlap-box" style="font-size: .9em">
<div class="box-title">
<p>Split column values:</p>
</div>
<div class="box-content">
<div class="sourceCode" id="cb161"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="fu">separate_wider_delim</span>(</span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a>    data, </span>
<span id="cb161-3"><a href="#cb161-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">c</span>(<span class="st">"col1"</span>, ...), </span>
<span id="cb161-4"><a href="#cb161-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">delim =</span> <span class="st">"delimiter character(s)"</span>, </span>
<span id="cb161-5"><a href="#cb161-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">names =</span> <span class="fu">c</span>(<span class="st">"new_col1"</span>, <span class="st">"new_col2"</span>, ...),</span>
<span id="cb161-6"><a href="#cb161-6" aria-hidden="true" tabindex="-1"></a>    ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Split values in column into multiple columns based on delimiter characters</li>
<li>Non-character values (e.g., numbers) are coerced to character</li>
<li>Specify new column names</li>
<li><code>cols = c("col1", ...)</code>: Specify column(s) to separate
<ul>
<li><em>Which column(s) contain the data to split?</em></li>
</ul></li>
<li><code>delim = "delimiter character(s)"</code>: Character(s) to split on
<ul>
<li>e.g., <code>,</code> or <code>"_"</code></li>
</ul></li>
<li><code>names = c("new_col1", "new_col2", ...)</code>: Names for new columns</li>
<li>Related:
<ul>
<li><span class="func"><code>separate_wider_regex()</code></span>: split by regex match</li>
<li><span class="func"><code>separate_wider_position()</code></span>: split values by fixed widths</li>
<li><span class="func"><code>separate_longer_delim()</code></span>: split into multiple rows</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div class="col-7">
<div class="fragment">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  condition participant score notes          
      &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;          
1         1           1 0.885 glasses_none   
2         1           1 0.553 glasses_none   
3         1           2 0.906 none_none      
4         1           2 0.587 none_none      
5         1           3 0.423 none_incomplete</code></pre>
</div>
</div>
</div>
<div class="fragment" style="margin-top: 1em;">
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="fu">separate_wider_delim</span>(</span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a>    glasses,</span>
<span id="cb163-3"><a href="#cb163-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> notes,</span>
<span id="cb163-4"><a href="#cb163-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">delim =</span> <span class="st">"_"</span>,</span>
<span id="cb163-5"><a href="#cb163-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">names =</span> <span class="fu">c</span>(</span>
<span id="cb163-6"><a href="#cb163-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">"wears_glasses"</span>, <span class="st">"notes"</span></span>
<span id="cb163-7"><a href="#cb163-7" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb163-8"><a href="#cb163-8" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> </span>
<span id="cb163-9"><a href="#cb163-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 5
  condition participant score wears_glasses notes     
      &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;     
1         1           1 0.885 glasses       none      
2         1           1 0.553 glasses       none      
3         1           2 0.906 none          none      
4         1           2 0.587 none          none      
5         1           3 0.423 none          incomplete</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="unite-collapse-multiple-columns-into-one" class="level2" style="font-size: .8em">
<h2 style="font-size: .8em" class="anchored" data-anchor-id="unite-collapse-multiple-columns-into-one"><code>unite</code>: Collapse multiple columns into one</h2>
<p><img src="../images/icons/tv-icons/tidyr.png" class="absolute" data-top="-1.5em" data-right="0em"></p>
<div class="container-fluid">
<div class="row">
<div class="col-5">
<div class="overlap-box" style="font-size: .9em">
<div class="box-title">
<p>Collapse columns:</p>
</div>
<div class="box-content">
<div class="sourceCode" id="cb165"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unite</span>(</span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a>    data,</span>
<span id="cb165-3"><a href="#cb165-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">col =</span> <span class="st">"new_col"</span>,</span>
<span id="cb165-4"><a href="#cb165-4" aria-hidden="true" tabindex="-1"></a>    old_col1,</span>
<span id="cb165-5"><a href="#cb165-5" aria-hidden="true" tabindex="-1"></a>    old_col2,</span>
<span id="cb165-6"><a href="#cb165-6" aria-hidden="true" tabindex="-1"></a>    ... <span class="co"># more columns</span></span>
<span id="cb165-7"><a href="#cb165-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">"separator character(s)"</span>,</span>
<span id="cb165-8"><a href="#cb165-8" aria-hidden="true" tabindex="-1"></a>    ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Combine multiple columns into one column</li>
<li>Values are concatenated with specified separator</li>
<li><code>col = "new_col"</code>: Name of new column</li>
<li><code>sep = "separator character(s)"</code>: Character(s) to insert between values
<ul>
<li>Default: <code>_</code></li>
<li>Use empty string <code>""</code> for no separator</li>
</ul></li>
<li>Use <code>remove = FALSE</code> to keep original columns</li>
</ul>
</div>
</div>
</div>
<div class="col-7">
<div class="fragment">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  condition participant score notes          
      &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;          
1         1           1 0.885 glasses_none   
2         1           1 0.553 glasses_none   
3         1           2 0.906 none_none      
4         1           2 0.587 none_none      
5         1           3 0.423 none_incomplete</code></pre>
</div>
</div>
</div>
<div class="fragment" style="margin-top: 1em;">
<div class="cell" data-output-location="column-fragment">
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Split `notes` into two columns</span></span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a><span class="fu">separate_wider_delim</span>(</span>
<span id="cb167-3"><a href="#cb167-3" aria-hidden="true" tabindex="-1"></a>    glasses,</span>
<span id="cb167-4"><a href="#cb167-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> notes,</span>
<span id="cb167-5"><a href="#cb167-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">delim =</span> <span class="st">"_"</span>,</span>
<span id="cb167-6"><a href="#cb167-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">names =</span> <span class="fu">c</span>(</span>
<span id="cb167-7"><a href="#cb167-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">"wears_glasses"</span>, <span class="st">"notes"</span></span>
<span id="cb167-8"><a href="#cb167-8" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb167-9"><a href="#cb167-9" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> </span>
<span id="cb167-10"><a href="#cb167-10" aria-hidden="true" tabindex="-1"></a> <span class="co"># (re)unite columns with a `;` delim   </span></span>
<span id="cb167-11"><a href="#cb167-11" aria-hidden="true" tabindex="-1"></a><span class="fu">unite</span>(</span>
<span id="cb167-12"><a href="#cb167-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">col =</span> <span class="st">"conditionParticipant"</span>,</span>
<span id="cb167-13"><a href="#cb167-13" aria-hidden="true" tabindex="-1"></a>    condition, participant,</span>
<span id="cb167-14"><a href="#cb167-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">";"</span>,</span>
<span id="cb167-15"><a href="#cb167-15" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span></span>
<span id="cb167-16"><a href="#cb167-16" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  conditionParticipant score wears_glasses notes     
  &lt;chr&gt;                &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;     
1 1;1                  0.885 glasses       none      
2 1;1                  0.553 glasses       none      
3 1;2                  0.906 none          none      
4 1;2                  0.587 none          none      
5 1;3                  0.423 none          incomplete</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="tools-for-handling-incomplete-and-missing-data" class="level2">
<h2 class="anchored" data-anchor-id="tools-for-handling-incomplete-and-missing-data">Tools for handling incomplete and missing data</h2>
<p>Create a simple example dataset with missing values:</p>
</section>
<section id="expand-complete-create-missing-combinations" class="level2" style="font-size: .8em">
<h2 style="font-size: .8em" class="anchored" data-anchor-id="expand-complete-create-missing-combinations"><code>expand</code> &amp; <code>complete</code>: Create missing combinations</h2>
<p><img src="../images/icons/tv-icons/tidyr.png" class="absolute" data-top="-1.5em" data-right="0em"></p>
<div class="container-fluid">
<div class="row">
<div class="col-5">
<div class="overlap-box">
<div class="box-title">
<p>Create missing combinations:</p>
</div>
<div class="box-content">
<div class="row">
<div class="col-6">
<div class="sourceCode" id="cb169"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="fu">expand</span>(</span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true" tabindex="-1"></a>    data,</span>
<span id="cb169-3"><a href="#cb169-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">col1 =</span> <span class="fu">c</span>(...),</span>
<span id="cb169-4"><a href="#cb169-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">col2 =</span> <span class="fu">c</span>(...),</span>
<span id="cb169-5"><a href="#cb169-5" aria-hidden="true" tabindex="-1"></a>    ...)</span>
<span id="cb169-6"><a href="#cb169-6" aria-hidden="true" tabindex="-1"></a><span class="er">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="col-6">
<div class="sourceCode" id="cb170"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="fu">complete</span>(</span>
<span id="cb170-2"><a href="#cb170-2" aria-hidden="true" tabindex="-1"></a>    data,</span>
<span id="cb170-3"><a href="#cb170-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">col1 =</span> <span class="fu">c</span>(...),</span>
<span id="cb170-4"><a href="#cb170-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">col2 =</span> <span class="fu">c</span>(...),</span>
<span id="cb170-5"><a href="#cb170-5" aria-hidden="true" tabindex="-1"></a>    ...)</span>
<span id="cb170-6"><a href="#cb170-6" aria-hidden="true" tabindex="-1"></a><span class="er">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<ul>
<li><span class="func">expand</span>: Generate all possible combinations of values across specified columns</li>
<li><span class="func">complete</span>: Fill in missing rows in data with <code>NA</code> for missing combinations
<ul>
<li>Actually a wrapper for <code>expand()</code></li>
</ul></li>
<li>Useful for:
<ul>
<li>Identifying non-obvious missing data points</li>
<li>Preparing data for analyses that require complete cases</li>
<li>Ensuring consistent structure across datasets</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div class="col-7">
<div class="fragment">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 5
  date       station temp_max temp_min notes 
  &lt;date&gt;     &lt;chr&gt;      &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt; 
1 2026-01-20 North         NA       18 Clear 
2 2026-01-21 North         32       15 &lt;NA&gt;  
3 2026-01-21 South         28       NA Windy 
4 2026-01-23 South         30       20 &lt;NA&gt;  
5 2026-01-24 North         NA       17 Cloudy</code></pre>
</div>
</div>
</div>
<div class="row">
<div class="col-5">
<div class="fragment" style="margin-top: 1em;">
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb172"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="fu">expand</span>(weather, </span>
<span id="cb172-2"><a href="#cb172-2" aria-hidden="true" tabindex="-1"></a>    date, </span>
<span id="cb172-3"><a href="#cb172-3" aria-hidden="true" tabindex="-1"></a>    station)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 2
  date       station
  &lt;date&gt;     &lt;chr&gt;  
1 2026-01-20 North  
2 2026-01-20 South  
3 2026-01-21 North  
4 2026-01-21 South  
5 2026-01-23 North  
6 2026-01-23 South  
7 2026-01-24 North  
8 2026-01-24 South  </code></pre>
</div>
</div>
</div>
</div>
<div class="col-7">
<div class="fragment" style="margin-top: 1em;">
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb174"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="fu">complete</span>(weather, date, station)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 5
  date       station temp_max temp_min notes 
  &lt;date&gt;     &lt;chr&gt;      &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt; 
1 2026-01-20 North         NA       18 Clear 
2 2026-01-20 South         NA       NA &lt;NA&gt;  
3 2026-01-21 North         32       15 &lt;NA&gt;  
4 2026-01-21 South         28       NA Windy 
5 2026-01-23 North         NA       NA &lt;NA&gt;  
6 2026-01-23 South         30       20 &lt;NA&gt;  
7 2026-01-24 North         NA       17 Cloudy
8 2026-01-24 South         NA       NA &lt;NA&gt;  </code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="drop_na-replace_na-drop-and-replace-missing-values" class="level2">
<h2 class="anchored" data-anchor-id="drop_na-replace_na-drop-and-replace-missing-values"><code>drop_na</code> &amp; <code>replace_na</code>: Drop and replace missing values</h2>
<p><img src="../images/icons/tv-icons/tidyr.png" class="absolute" data-top="-1.5em" data-right="0em"></p>
<div class="overlap-box">
<div class="box-title">
<p>Drop rows with missing values</p>
</div>
<div class="box-content">
<div class="cell" data-output-location="column-fragment">
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Missing any value in any column</span></span>
<span id="cb176-2"><a href="#cb176-2" aria-hidden="true" tabindex="-1"></a><span class="fu">drop_na</span>(weather) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 5
# ℹ 5 variables: date &lt;date&gt;, station &lt;chr&gt;, temp_max &lt;dbl&gt;, temp_min &lt;dbl&gt;,
#   notes &lt;chr&gt;</code></pre>
</div>
</div>
<div class="cell" data-output-location="column-fragment">
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Missing values in specific columns</span></span>
<span id="cb178-2"><a href="#cb178-2" aria-hidden="true" tabindex="-1"></a><span class="fu">drop_na</span>(weather, temp_max, temp_min)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 5
  date       station temp_max temp_min notes
  &lt;date&gt;     &lt;chr&gt;      &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;
1 2026-01-21 North         32       15 &lt;NA&gt; 
2 2026-01-23 South         30       20 &lt;NA&gt; </code></pre>
</div>
</div>
</div>
</div>
<div class="overlap-box overlap-box-blue">
<div class="box-title">
<p>Replace all <code>NA</code> in columns with specific value</p>
</div>
<div class="box-content">
<div class="cell" data-output-location="column-fragment">
<div class="sourceCode cell-code" id="cb180"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="fu">replace_na</span>(weather, </span>
<span id="cb180-2"><a href="#cb180-2" aria-hidden="true" tabindex="-1"></a>           <span class="fu">list</span>(<span class="at">temp_max =</span> <span class="dv">999</span>, </span>
<span id="cb180-3"><a href="#cb180-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">temp_min =</span> <span class="sc">-</span><span class="dv">999</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 5
  date       station temp_max temp_min notes 
  &lt;date&gt;     &lt;chr&gt;      &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt; 
1 2026-01-20 North        999       18 Clear 
2 2026-01-21 North         32       15 &lt;NA&gt;  
3 2026-01-21 South         28     -999 Windy 
4 2026-01-23 South         30       20 &lt;NA&gt;  
5 2026-01-24 North        999       17 Cloudy</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="fill-dependently-replace-missing-values" class="level2" style="font-size: .7em;">
<h2 style="font-size: .7em;" class="anchored" data-anchor-id="fill-dependently-replace-missing-values"><code>fill</code>: Dependently replace missing values</h2>
<p><img src="../images/icons/tv-icons/tidyr.png" class="absolute" data-top="-1.5em" data-right="0em"></p>
<div class="container-fluid">
<div class="row">
<div class="col-4">
<div class="card fragment h-100">
<div class="card-header">
<div class="card-title" style="color: #fff">
<p>Fill <code>NA</code> with previous:</p>
</div>
</div>
<div class="card-body lessgap">
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb182"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fill</span>(weather, temp_max, <span class="at">.direction =</span> <span class="st">"down"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 5
  date       station temp_max temp_min notes 
  &lt;date&gt;     &lt;chr&gt;      &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt; 
1 2026-01-20 North         NA       18 Clear 
2 2026-01-21 North         32       15 &lt;NA&gt;  
3 2026-01-21 South         28       NA Windy 
4 2026-01-23 South         30       20 &lt;NA&gt;  
5 2026-01-24 North         30       17 Cloudy</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="col-4">
<div class="card fragment card-alt1 h-100">
<div class="card-header">
<div class="card-title" style="color: #fff">
<p>Fill <code>NA</code> with next:</p>
</div>
</div>
<div class="card-body lessgap">
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb184"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fill</span>(weather, temp_max, <span class="at">.direction =</span> <span class="st">"up"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 5
  date       station temp_max temp_min notes 
  &lt;date&gt;     &lt;chr&gt;      &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt; 
1 2026-01-20 North         32       18 Clear 
2 2026-01-21 North         32       15 &lt;NA&gt;  
3 2026-01-21 South         28       NA Windy 
4 2026-01-23 South         30       20 &lt;NA&gt;  
5 2026-01-24 North         NA       17 Cloudy</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="col-4">
<div class="card fragment h-100">
<div class="card-header">
<div class="card-title" style="color: #fff">
<p>Fill previous, then next:</p>
</div>
</div>
<div class="card-body lessgap">
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb186"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fill</span>(weather, temp_max, <span class="at">.direction =</span> <span class="st">"downup"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 5
  date       station temp_max temp_min notes 
  &lt;date&gt;     &lt;chr&gt;      &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt; 
1 2026-01-20 North         32       18 Clear 
2 2026-01-21 North         32       15 &lt;NA&gt;  
3 2026-01-21 South         28       NA Windy 
4 2026-01-23 South         30       20 &lt;NA&gt;  
5 2026-01-24 North         30       17 Cloudy</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="nesting" class="level2">
<h2 class="anchored" data-anchor-id="nesting">Nesting</h2>
<p><img src="../images/icons/tv-icons/tidyr.png" class="absolute" data-top="-1.5em" data-right="0em"></p>
<p><span class="keyword">Nesting</span>: embedding a data frame within a data frame</p>
<p><span class="keyword">Rectangling</span>: the reverse process of un-nesting (e.g., making JSON into tidy tibbles)</p>
<p>These are beyond the scope of this class, but here’s some fine print if you’re interested:</p>
<div class="fragment nonincremental callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Nested Data
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>nested df is one where 1+ columns is a list of data frames</li>
<li>conceptually related to grouping with <code>group_by()</code>:
<ul>
<li>1 row in input -&gt; 1 group in output</li>
</ul></li>
</ul>
<p>Imagine a data frame with columns x, y, and z:</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(x) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">mean =</span> <span class="fu">mean</span>(y), <span class="at">sum =</span> <span class="fu">sum</span>(z))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Each row in the summarized output processes data (here the mean of y and the sum of z) about multiple rows in the input, defined by the unique values of the group (here x).</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a>df2 <span class="sc">%&gt;%</span> <span class="fu">nest</span>(<span class="at">my_nested_var =</span> <span class="fu">c</span>(y, z))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Each row in the nested output contains the data itself (unchanged) associated with those rows (the values in columns y and z) as defined by the unique values of everything that isn’t nested (here x). Since the data is unchanged, the data in the new variable is itself a table (or tibble). The columns in the nested tibble are the columns you passed to it and the rows are all the original rows within each “group”.</p>
</div>
</div>
<div class="alert alert-warning fragment nonincremental" style="position: absolute; width: 50%; top: 3em; right: 3em;, font-size: .8em">
<p><strong>You probably won’t need this</strong> so don’t stress if that seems like gibberish. It’s just a useful concept.</p>
<p>For more info see <a href="https://tidyr.tidyverse.org/articles/nest.html">this tidyverse article on nesting</a>.</p>
<p>Page 2 of the <a href="https://github.com/rstudio/cheatsheets/blob/main/tidyr.pdf">tidyr cheatsheet</a> is dedicated to nesting concepts and functions.</p>
</div>
</section>
</section>
<section id="summary" class="level1">
<h1>Summary</h1>
<section id="tidyverse-workflow" class="level2">
<h2 class="anchored" data-anchor-id="tidyverse-workflow">Tidyverse Workflow</h2>
</section>
<section id="processflow-with-icons" class="level2">
<h2 class="anchored" data-anchor-id="processflow-with-icons">Process/flow with icons</h2>
<div style="display: grid; grid-template-columns: 1fr 0.3fr 1fr 0.3fr 1fr 0.3fr 1fr; grid-template-rows: auto 3em auto; gap: 8px;">
<!-- Row 1: Steps 1-4 -->
<div class="flow-box fragment" style="grid-column: 1; grid-row: 1; background-color: #800000;">
<ol type="1">
<li>Import data with <code>readr</code></li>
</ol>
<div class="flow-icon-circle">
<p><i class="bi-diamond-half " style="" role="img" aria-hidden="true"></i></p>
</div>
</div>
<div class="flow-arrow fragment" style="grid-column: 2; grid-row: 1;">
<p><i class="bi-arrow-right-circle-fill " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="flow-box fragment" style="grid-column: 3; grid-row: 1; background-color: #6e0e10;">
<ol start="2" type="1">
<li>Apply structure with <code>tibble</code></li>
</ol>
<div class="flow-icon-circle">
<p><i class="bi-diamond-half " style="" role="img" aria-hidden="true"></i></p>
</div>
</div>
<div class="flow-arrow fragment" style="grid-column: 4; grid-row: 1;">
<p><i class="bi-arrow-right-circle-fill " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="flow-box fragment" style="grid-column: 5; grid-row: 1; background-color: #5b1b21;">
<ol start="3" type="1">
<li>Tidy data with <code>tidyr</code></li>
</ol>
<div class="flow-icon-circle">
<p><i class="bi-diamond-half " style="" role="img" aria-hidden="true"></i></p>
</div>
</div>
<div class="flow-arrow fragment" style="grid-column: 6; grid-row: 1;">
<p><i class="bi-arrow-right-circle-fill " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="flow-box fragment" style="grid-column: 7; grid-row: 1; background-color: #492931;">
<ol start="4" type="1">
<li>Manipulate tibbles with <code>dplyr</code></li>
</ol>
<div class="flow-icon-circle">
<p><i class="bi-diamond-half " style="" role="img" aria-hidden="true"></i></p>
</div>
</div>
<!-- Down arrow -->
<div class="flow-arrow fragment" style="grid-column: 7; grid-row: 2;">
<p><i class="bi-arrow-down-circle-fill " style="" role="img" aria-hidden="true"></i></p>
</div>
<!-- Row 2: Steps 5-8 (in reverse order) -->
<div class="flow-box fragment" style="grid-column: 7; grid-row: 3; background-color: #373642;">
<ol start="5" type="1">
<li>Manipulate strings with <code>stringr</code></li>
</ol>
<div class="flow-icon-circle">
<p><i class="bi-diamond-half " style="" role="img" aria-hidden="true"></i></p>
</div>
</div>
<div class="flow-arrow fragment" style="grid-column: 6; grid-row: 3;">
<p><i class="bi-arrow-left-circle-fill " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="flow-box fragment" style="grid-column: 5; grid-row: 3; background-color: #254452;">
<ol start="6" type="1">
<li>Manipulate factors with <code>forcats</code></li>
</ol>
<div class="flow-icon-circle">
<p><i class="bi-diamond-half " style="" role="img" aria-hidden="true"></i></p>
</div>
</div>
<div class="flow-arrow fragment" style="grid-column: 4; grid-row: 3;">
<p><i class="bi-arrow-left-circle-fill " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="flow-box fragment" style="grid-column: 3; grid-row: 3; background-color: #125163;">
<ol start="7" type="1">
<li>Visualize with <code>ggplot2</code></li>
</ol>
<div class="flow-icon-circle">
<p><i class="bi-diamond-half " style="" role="img" aria-hidden="true"></i></p>
</div>
</div>
<div class="flow-arrow fragment" style="grid-column: 2; grid-row: 3;">
<p><i class="bi-arrow-left-circle-fill " style="" role="img" aria-hidden="true"></i></p>
</div>
<div class="flow-box fragment" style="grid-column: 1; grid-row: 3; background-color: #005f73;">
<ol start="8" type="1">
<li>Model with <code>broom</code> and <code>modelr</code></li>
</ol>
<div class="flow-icon-circle">
<p><i class="bi-diamond-half " style="" role="img" aria-hidden="true"></i></p>
</div>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>